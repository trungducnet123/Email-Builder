!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=41)}([function(t,e,n){var i,o;/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
!function(e,n){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(n,r){"use strict";function s(t,e,n){e=e||ut;var i,o=e.createElement("script");if(o.text=t,n)for(i in St)n[i]&&(o[i]=n[i]);e.head.appendChild(o).parentNode.removeChild(o)}function a(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?gt[vt.call(t)]||"object":typeof t}function l(t){var e=!!t&&"length"in t&&t.length,n=a(t);return!Ct(t)&&!_t(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function c(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function u(t,e,n){return Ct(e)?kt.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?kt.grep(t,function(t){return t===e!==n}):"string"!=typeof e?kt.grep(t,function(t){return mt.call(e,t)>-1!==n}):kt.filter(e,t,n)}function h(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function d(t){var e={};return kt.each(t.match(Ht)||[],function(t,n){e[n]=!0}),e}function f(t){return t}function p(t){throw t}function m(t,e,n,i){var o;try{t&&Ct(o=t.promise)?o.call(t).done(e).fail(n):t&&Ct(o=t.then)?o.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}function g(){ut.removeEventListener("DOMContentLoaded",g),n.removeEventListener("load",g),kt.ready()}function v(t,e){return e.toUpperCase()}function y(t){return t.replace(Wt,"ms-").replace($t,v)}function b(){this.expando=kt.expando+b.uid++}function w(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Ut.test(t)?JSON.parse(t):t)}function x(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(Vt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=w(n)}catch(t){}qt.set(t,e,n)}else n=void 0;return n}function C(t,e,n,i){var o,r,s=20,a=i?function(){return i.cur()}:function(){return kt.css(t,e,"")},l=a(),c=n&&n[3]||(kt.cssNumber[e]?"":"px"),u=(kt.cssNumber[e]||"px"!==c&&+l)&&Xt.exec(kt.css(t,e));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;s--;)kt.style(t,e,u+c),(1-r)*(1-(r=a()/l||.5))<=0&&(s=0),u/=r;u*=2,kt.style(t,e,u+c),n=n||[]}return n&&(u=+u||+l||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=o)),o}function _(t){var e,n=t.ownerDocument,i=t.nodeName,o=Qt[i];return o||(e=n.body.appendChild(n.createElement(i)),o=kt.css(e,"display"),e.parentNode.removeChild(e),"none"===o&&(o="block"),Qt[i]=o,o)}function S(t,e){for(var n,i,o=[],r=0,s=t.length;r<s;r++)i=t[r],i.style&&(n=i.style.display,e?("none"===n&&(o[r]=jt.get(i,"display")||null,o[r]||(i.style.display="")),""===i.style.display&&Gt(i)&&(o[r]=_(i))):"none"!==n&&(o[r]="none",jt.set(i,"display",n)));for(r=0;r<s;r++)null!=o[r]&&(t[r].style.display=o[r]);return t}function k(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&c(t,e)?kt.merge([t],n):n}function T(t,e){for(var n=0,i=t.length;n<i;n++)jt.set(t[n],"globalEval",!e||jt.get(e[n],"globalEval"))}function E(t,e,n,i,o){for(var r,s,l,c,u,h,d=e.createDocumentFragment(),f=[],p=0,m=t.length;p<m;p++)if((r=t[p])||0===r)if("object"===a(r))kt.merge(f,r.nodeType?[r]:r);else if(ie.test(r)){for(s=s||d.appendChild(e.createElement("div")),l=(te.exec(r)||["",""])[1].toLowerCase(),c=ne[l]||ne._default,s.innerHTML=c[1]+kt.htmlPrefilter(r)+c[2],h=c[0];h--;)s=s.lastChild;kt.merge(f,s.childNodes),s=d.firstChild,s.textContent=""}else f.push(e.createTextNode(r));for(d.textContent="",p=0;r=f[p++];)if(i&&kt.inArray(r,i)>-1)o&&o.push(r);else if(u=kt.contains(r.ownerDocument,r),s=k(d.appendChild(r),"script"),u&&T(s),n)for(h=0;r=s[h++];)ee.test(r.type||"")&&n.push(r);return d}function L(){return!0}function A(){return!1}function P(){try{return ut.activeElement}catch(t){}}function M(t,e,n,i,o,r){var s,a;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=void 0);for(a in e)M(t,a,n,i,e[a],r);return t}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=A;else if(!o)return t;return 1===r&&(s=o,o=function(t){return kt().off(t),s.apply(this,arguments)},o.guid=s.guid||(s.guid=kt.guid++)),t.each(function(){kt.event.add(this,e,o,i,n)})}function N(t,e){return c(t,"table")&&c(11!==e.nodeType?e:e.firstChild,"tr")?kt(t).children("tbody")[0]||t:t}function D(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function O(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function I(t,e){var n,i,o,r,s,a,l,c;if(1===e.nodeType){if(jt.hasData(t)&&(r=jt.access(t),s=jt.set(e,r),c=r.events)){delete s.handle,s.events={};for(o in c)for(n=0,i=c[o].length;n<i;n++)kt.event.add(e,o,c[o][n])}qt.hasData(t)&&(a=qt.access(t),l=kt.extend({},a),qt.set(e,l))}}function H(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Jt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function F(t,e,n,i){e=ft.apply([],e);var o,r,a,l,c,u,h=0,d=t.length,f=d-1,p=e[0],m=Ct(p);if(m||d>1&&"string"==typeof p&&!xt.checkClone&&ue.test(p))return t.each(function(o){var r=t.eq(o);m&&(e[0]=p.call(this,o,r.html())),F(r,e,n,i)});if(d&&(o=E(e,t[0].ownerDocument,!1,t,i),r=o.firstChild,1===o.childNodes.length&&(o=r),r||i)){for(a=kt.map(k(o,"script"),D),l=a.length;h<d;h++)c=o,h!==f&&(c=kt.clone(c,!0,!0),l&&kt.merge(a,k(c,"script"))),n.call(t[h],c,h);if(l)for(u=a[a.length-1].ownerDocument,kt.map(a,O),h=0;h<l;h++)c=a[h],ee.test(c.type||"")&&!jt.access(c,"globalEval")&&kt.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?kt._evalUrl&&kt._evalUrl(c.src):s(c.textContent.replace(he,""),u,c))}return t}function R(t,e,n){for(var i,o=e?kt.filter(e,t):t,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||kt.cleanData(k(i)),i.parentNode&&(n&&kt.contains(i.ownerDocument,i)&&T(k(i,"script")),i.parentNode.removeChild(i));return t}function B(t,e,n){var i,o,r,s,a=t.style;return n=n||fe(t),n&&(s=n.getPropertyValue(e)||n[e],""!==s||kt.contains(t.ownerDocument,t)||(s=kt.style(t,e)),!xt.pixelBoxStyles()&&de.test(s)&&pe.test(e)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r)),void 0!==s?s+"":s}function W(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function $(t){if(t in we)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=be.length;n--;)if((t=be[n]+e)in we)return t}function z(t){var e=kt.cssProps[t];return e||(e=kt.cssProps[t]=$(t)||t),e}function j(t,e,n){var i=Xt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function q(t,e,n,i,o,r){var s="width"===e?1:0,a=0,l=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(l+=kt.css(t,n+Yt[s],!0,o)),i?("content"===n&&(l-=kt.css(t,"padding"+Yt[s],!0,o)),"margin"!==n&&(l-=kt.css(t,"border"+Yt[s]+"Width",!0,o))):(l+=kt.css(t,"padding"+Yt[s],!0,o),"padding"!==n?l+=kt.css(t,"border"+Yt[s]+"Width",!0,o):a+=kt.css(t,"border"+Yt[s]+"Width",!0,o));return!i&&r>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-l-a-.5))),l}function U(t,e,n){var i=fe(t),o=B(t,e,i),r="border-box"===kt.css(t,"boxSizing",!1,i),s=r;if(de.test(o)){if(!n)return o;o="auto"}return s=s&&(xt.boxSizingReliable()||o===t.style[e]),("auto"===o||!parseFloat(o)&&"inline"===kt.css(t,"display",!1,i))&&(o=t["offset"+e[0].toUpperCase()+e.slice(1)],s=!0),(o=parseFloat(o)||0)+q(t,e,n||(r?"border":"content"),s,i,o)+"px"}function V(t,e,n,i,o){return new V.prototype.init(t,e,n,i,o)}function K(){Ce&&(!1===ut.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(K):n.setTimeout(K,kt.fx.interval),kt.fx.tick())}function X(){return n.setTimeout(function(){xe=void 0}),xe=Date.now()}function Y(t,e){var n,i=0,o={height:t};for(e=e?1:0;i<4;i+=2-e)n=Yt[i],o["margin"+n]=o["padding"+n]=t;return e&&(o.opacity=o.width=t),o}function G(t,e,n){for(var i,o=(J.tweeners[e]||[]).concat(J.tweeners["*"]),r=0,s=o.length;r<s;r++)if(i=o[r].call(n,e,t))return i}function Z(t,e,n){var i,o,r,s,a,l,c,u,h="width"in e||"height"in e,d=this,f={},p=t.style,m=t.nodeType&&Gt(t),g=jt.get(t,"fxshow");n.queue||(s=kt._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,kt.queue(t,"fx").length||s.empty.fire()})}));for(i in e)if(o=e[i],_e.test(o)){if(delete e[i],r=r||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!g||void 0===g[i])continue;m=!0}f[i]=g&&g[i]||kt.style(t,i)}if((l=!kt.isEmptyObject(e))||!kt.isEmptyObject(f)){h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=g&&g.display,null==c&&(c=jt.get(t,"display")),u=kt.css(t,"display"),"none"===u&&(c?u=c:(S([t],!0),c=t.style.display||c,u=kt.css(t,"display"),S([t]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===kt.css(t,"float")&&(l||(d.done(function(){p.display=c}),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1;for(i in f)l||(g?"hidden"in g&&(m=g.hidden):g=jt.access(t,"fxshow",{display:c}),r&&(g.hidden=!m),m&&S([t],!0),d.done(function(){m||S([t]),jt.remove(t,"fxshow");for(i in f)kt.style(t,i,f[i])})),l=G(m?g[i]:0,i,d),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}}function Q(t,e){var n,i,o,r,s;for(n in t)if(i=y(n),o=e[i],r=t[n],Array.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),(s=kt.cssHooks[i])&&"expand"in s){r=s.expand(r),delete t[i];for(n in r)n in t||(t[n]=r[n],e[n]=o)}else e[i]=o}function J(t,e,n){var i,o,r=0,s=J.prefilters.length,a=kt.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=xe||X(),n=Math.max(0,c.startTime+c.duration-e),i=n/c.duration||0,r=1-i,s=0,l=c.tweens.length;s<l;s++)c.tweens[s].run(r);return a.notifyWith(t,[c,r,n]),r<1&&l?n:(l||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:kt.extend({},e),opts:kt.extend(!0,{specialEasing:{},easing:kt.easing._default},n),originalProperties:e,originalOptions:n,startTime:xe||X(),duration:n.duration,tweens:[],createTween:function(e,n){var i=kt.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)c.tweens[n].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),u=c.props;for(Q(u,c.opts.specialEasing);r<s;r++)if(i=J.prefilters[r].call(c,t,u,c.opts))return Ct(i.stop)&&(kt._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return kt.map(u,G,c),Ct(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),kt.fx.timer(kt.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}function tt(t){return(t.match(Ht)||[]).join(" ")}function et(t){return t.getAttribute&&t.getAttribute("class")||""}function nt(t){return Array.isArray(t)?t:"string"==typeof t?t.match(Ht)||[]:[]}function it(t,e,n,i){var o;if(Array.isArray(e))kt.each(e,function(e,o){n||Ie.test(t)?i(t,o):it(t+"["+("object"==typeof o&&null!=o?e:"")+"]",o,n,i)});else if(n||"object"!==a(e))i(t,e);else for(o in e)it(t+"["+o+"]",e[o],n,i)}function ot(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(Ht)||[];if(Ct(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function rt(t,e,n,i){function o(a){var l;return r[a]=!0,kt.each(t[a]||[],function(t,a){var c=a(e,n,i);return"string"!=typeof c||s||r[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)}),l}var r={},s=t===Ke;return o(e.dataTypes[0])||!r["*"]&&o("*")}function st(t,e){var n,i,o=kt.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:i||(i={}))[n]=e[n]);return i&&kt.extend(!0,t,i),t}function at(t,e,n){for(var i,o,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(o in a)if(a[o]&&a[o].test(i)){l.unshift(o);break}if(l[0]in n)r=l[0];else{for(o in n){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}s||(s=o)}r=r||s}if(r)return r!==l[0]&&l.unshift(r),n[r]}function lt(t,e,n,i){var o,r,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(r=u.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(o in c)if(a=o.split(" "),a[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[o]:!0!==c[o]&&(r=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}var ct=[],ut=n.document,ht=Object.getPrototypeOf,dt=ct.slice,ft=ct.concat,pt=ct.push,mt=ct.indexOf,gt={},vt=gt.toString,yt=gt.hasOwnProperty,bt=yt.toString,wt=bt.call(Object),xt={},Ct=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},_t=function(t){return null!=t&&t===t.window},St={type:!0,src:!0,noModule:!0},kt=function(t,e){return new kt.fn.init(t,e)},Tt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;kt.fn=kt.prototype={jquery:"3.3.1",constructor:kt,length:0,toArray:function(){return dt.call(this)},get:function(t){return null==t?dt.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=kt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return kt.each(this,t)},map:function(t){return this.pushStack(kt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(dt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:pt,sort:ct.sort,splice:ct.splice},kt.extend=kt.fn.extend=function(){var t,e,n,i,o,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||Ct(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],i=t[e],s!==i&&(c&&i&&(kt.isPlainObject(i)||(o=Array.isArray(i)))?(o?(o=!1,r=n&&Array.isArray(n)?n:[]):r=n&&kt.isPlainObject(n)?n:{},s[e]=kt.extend(c,r,i)):void 0!==i&&(s[e]=i));return s},kt.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==vt.call(t))&&(!(e=ht(t))||"function"==typeof(n=yt.call(e,"constructor")&&e.constructor)&&bt.call(n)===wt)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){s(t)},each:function(t,e){var n,i=0;if(l(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(Tt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(l(Object(t))?kt.merge(n,"string"==typeof t?[t]:t):pt.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:mt.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;i<n;i++)t[o++]=e[i];return t.length=o,t},grep:function(t,e,n){for(var i=[],o=0,r=t.length,s=!n;o<r;o++)!e(t[o],o)!==s&&i.push(t[o]);return i},map:function(t,e,n){var i,o,r=0,s=[];if(l(t))for(i=t.length;r<i;r++)null!=(o=e(t[r],r,n))&&s.push(o);else for(r in t)null!=(o=e(t[r],r,n))&&s.push(o);return ft.apply([],s)},guid:1,support:xt}),"function"==typeof Symbol&&(kt.fn[Symbol.iterator]=ct[Symbol.iterator]),kt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){gt["[object "+e+"]"]=e.toLowerCase()});var Et=/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(t){function e(t,e,n,i){var o,r,s,a,l,u,d,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!i&&((e?e.ownerDocument||e:B)!==M&&P(e),e=e||M,D)){if(11!==p&&(l=mt.exec(t)))if(o=l[1]){if(9===p){if(!(s=e.getElementById(o)))return n;if(s.id===o)return n.push(s),n}else if(f&&(s=f.getElementById(o))&&F(e,s)&&s.id===o)return n.push(s),n}else{if(l[2])return G.apply(n,e.getElementsByTagName(t)),n;if((o=l[3])&&w.getElementsByClassName&&e.getElementsByClassName)return G.apply(n,e.getElementsByClassName(o)),n}if(w.qsa&&!q[t+" "]&&(!O||!O.test(t))){if(1!==p)f=e,d=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(bt,wt):e.setAttribute("id",a=R),u=S(t),r=u.length;r--;)u[r]="#"+a+" "+h(u[r]);d=u.join(","),f=gt.test(t)&&c(e.parentNode)||e}if(d)try{return G.apply(n,f.querySelectorAll(d)),n}catch(t){}finally{a===R&&e.removeAttribute("id")}}}return T(t.replace(rt,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>x.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[R]=!0,t}function o(t){var e=M.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var n=t.split("|"),i=n.length;i--;)x.attrHandle[n[i]]=e}function s(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Ct(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function l(t){return i(function(e){return e=+e,i(function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function c(t){return t&&void 0!==t.getElementsByTagName&&t}function u(){}function h(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function d(t,e,n){var i=e.dir,o=e.next,r=o||i,s=n&&"parentNode"===r,a=$++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||s)return t(e,n,o);return!1}:function(e,n,l){var c,u,h,d=[W,a];if(l){for(;e=e[i];)if((1===e.nodeType||s)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||s)if(h=e[R]||(e[R]={}),u=h[e.uniqueID]||(h[e.uniqueID]={}),o&&o===e.nodeName.toLowerCase())e=e[i]||e;else{if((c=u[r])&&c[0]===W&&c[1]===a)return d[2]=c[2];if(u[r]=d,d[2]=t(e,n,l))return!0}return!1}}function f(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function p(t,n,i){for(var o=0,r=n.length;o<r;o++)e(t,n[o],i);return i}function m(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,c=null!=e;a<l;a++)(r=t[a])&&(n&&!n(r,i,o)||(s.push(r),c&&e.push(a)));return s}function g(t,e,n,o,r,s){return o&&!o[R]&&(o=g(o)),r&&!r[R]&&(r=g(r,s)),i(function(i,s,a,l){var c,u,h,d=[],f=[],g=s.length,v=i||p(e||"*",a.nodeType?[a]:a,[]),y=!t||!i&&e?v:m(v,d,t,a,l),b=n?r||(i?t:g||o)?[]:s:y;if(n&&n(y,b,a,l),o)for(c=m(b,f),o(c,[],a,l),u=c.length;u--;)(h=c[u])&&(b[f[u]]=!(y[f[u]]=h));if(i){if(r||t){if(r){for(c=[],u=b.length;u--;)(h=b[u])&&c.push(y[u]=h);r(null,b=[],c,l)}for(u=b.length;u--;)(h=b[u])&&(c=r?Q(i,h):d[u])>-1&&(i[c]=!(s[c]=h))}}else b=m(b===s?b.splice(g,b.length):b),r?r(null,s,b,l):G.apply(s,b)})}function v(t){for(var e,n,i,o=t.length,r=x.relative[t[0].type],s=r||x.relative[" "],a=r?1:0,l=d(function(t){return t===e},s,!0),c=d(function(t){return Q(e,t)>-1},s,!0),u=[function(t,n,i){var o=!r&&(i||n!==E)||((e=n).nodeType?l(t,n,i):c(t,n,i));return e=null,o}];a<o;a++)if(n=x.relative[t[a].type])u=[d(f(u),n)];else{if(n=x.filter[t[a].type].apply(null,t[a].matches),n[R]){for(i=++a;i<o&&!x.relative[t[i].type];i++);return g(a>1&&f(u),a>1&&h(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(rt,"$1"),n,a<i&&v(t.slice(a,i)),i<o&&v(t=t.slice(i)),i<o&&h(t))}u.push(n)}return f(u)}function y(t,n){var o=n.length>0,r=t.length>0,s=function(i,s,a,l,c){var u,h,d,f=0,p="0",g=i&&[],v=[],y=E,b=i||r&&x.find.TAG("*",c),w=W+=null==y?1:Math.random()||.1,C=b.length;for(c&&(E=s===M||s||c);p!==C&&null!=(u=b[p]);p++){if(r&&u){for(h=0,s||u.ownerDocument===M||(P(u),a=!D);d=t[h++];)if(d(u,s||M,a)){l.push(u);break}c&&(W=w)}o&&((u=!d&&u)&&f--,i&&g.push(u))}if(f+=p,o&&p!==f){for(h=0;d=n[h++];)d(g,v,s,a);if(i){if(f>0)for(;p--;)g[p]||v[p]||(v[p]=X.call(l));v=m(v)}G.apply(l,v),c&&!i&&v.length>0&&f+n.length>1&&e.uniqueSort(l)}return c&&(W=w,E=y),g};return o?i(s):s}var b,w,x,C,_,S,k,T,E,L,A,P,M,N,D,O,I,H,F,R="sizzle"+1*new Date,B=t.document,W=0,$=0,z=n(),j=n(),q=n(),U=function(t,e){return t===e&&(A=!0),0},V={}.hasOwnProperty,K=[],X=K.pop,Y=K.push,G=K.push,Z=K.slice,Q=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tt="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",nt="\\["+tt+"*("+et+")(?:"+tt+"*([*^$|!~]?=)"+tt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+et+"))|)"+tt+"*\\]",it=":("+et+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+nt+")*)|.*)\\)|)",ot=new RegExp(tt+"+","g"),rt=new RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),st=new RegExp("^"+tt+"*,"+tt+"*"),at=new RegExp("^"+tt+"*([>+~]|"+tt+")"+tt+"*"),lt=new RegExp("="+tt+"*([^\\]'\"]*?)"+tt+"*\\]","g"),ct=new RegExp(it),ut=new RegExp("^"+et+"$"),ht={ID:new RegExp("^#("+et+")"),CLASS:new RegExp("^\\.("+et+")"),TAG:new RegExp("^("+et+"|[*])"),ATTR:new RegExp("^"+nt),PSEUDO:new RegExp("^"+it),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},dt=/^(?:input|select|textarea|button)$/i,ft=/^h\d$/i,pt=/^[^{]+\{\s*\[native \w/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/[+~]/,vt=new RegExp("\\\\([\\da-f]{1,6}"+tt+"?|("+tt+")|.)","ig"),yt=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},bt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,wt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},xt=function(){P()},Ct=d(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{G.apply(K=Z.call(B.childNodes),B.childNodes),K[B.childNodes.length].nodeType}catch(t){G={apply:K.length?function(t,e){Y.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}w=e.support={},_=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},P=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:B;return i!==M&&9===i.nodeType&&i.documentElement?(M=i,N=M.documentElement,D=!_(M),B!==M&&(n=M.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xt,!1):n.attachEvent&&n.attachEvent("onunload",xt)),w.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=o(function(t){return t.appendChild(M.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=pt.test(M.getElementsByClassName),w.getById=o(function(t){return N.appendChild(t).id=R,!M.getElementsByName||!M.getElementsByName(R).length}),w.getById?(x.filter.ID=function(t){var e=t.replace(vt,yt);return function(t){return t.getAttribute("id")===e}},x.find.ID=function(t,e){if(void 0!==e.getElementById&&D){var n=e.getElementById(t);return n?[n]:[]}}):(x.filter.ID=function(t){var e=t.replace(vt,yt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},x.find.ID=function(t,e){if(void 0!==e.getElementById&&D){var n,i,o,r=e.getElementById(t);if(r){if((n=r.getAttributeNode("id"))&&n.value===t)return[r];for(o=e.getElementsByName(t),i=0;r=o[i++];)if((n=r.getAttributeNode("id"))&&n.value===t)return[r]}return[]}}),x.find.TAG=w.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):w.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},x.find.CLASS=w.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&D)return e.getElementsByClassName(t)},I=[],O=[],(w.qsa=pt.test(M.querySelectorAll))&&(o(function(t){N.appendChild(t).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+tt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||O.push("\\["+tt+"*(?:value|"+J+")"),t.querySelectorAll("[id~="+R+"-]").length||O.push("~="),t.querySelectorAll(":checked").length||O.push(":checked"),t.querySelectorAll("a#"+R+"+*").length||O.push(".#.+[+~]")}),o(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=M.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&O.push("name"+tt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&O.push(":enabled",":disabled"),N.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&O.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),O.push(",.*:")})),(w.matchesSelector=pt.test(H=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&o(function(t){w.disconnectedMatch=H.call(t,"*"),H.call(t,"[s!='']:x"),I.push("!=",it)}),O=O.length&&new RegExp(O.join("|")),I=I.length&&new RegExp(I.join("|")),e=pt.test(N.compareDocumentPosition),F=e||pt.test(N.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},U=e?function(t,e){if(t===e)return A=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!w.sortDetached&&e.compareDocumentPosition(t)===n?t===M||t.ownerDocument===B&&F(B,t)?-1:e===M||e.ownerDocument===B&&F(B,e)?1:L?Q(L,t)-Q(L,e):0:4&n?-1:1)}:function(t,e){if(t===e)return A=!0,0;var n,i=0,o=t.parentNode,r=e.parentNode,a=[t],l=[e];if(!o||!r)return t===M?-1:e===M?1:o?-1:r?1:L?Q(L,t)-Q(L,e):0;if(o===r)return s(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;a[i]===l[i];)i++;return i?s(a[i],l[i]):a[i]===B?-1:l[i]===B?1:0},M):M},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==M&&P(t),n=n.replace(lt,"='$1']"),w.matchesSelector&&D&&!q[n+" "]&&(!I||!I.test(n))&&(!O||!O.test(n)))try{var i=H.call(t,n);if(i||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return e(n,M,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==M&&P(t),F(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==M&&P(t);var n=x.attrHandle[e.toLowerCase()],i=n&&V.call(x.attrHandle,e.toLowerCase())?n(t,e,!D):void 0;return void 0!==i?i:w.attributes||!D?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.escape=function(t){return(t+"").replace(bt,wt)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,o=0;if(A=!w.detectDuplicates,L=!w.sortStable&&t.slice(0),t.sort(U),A){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return L=null,t},C=e.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=C(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=C(e);return n},x=e.selectors={cacheLength:50,createPseudo:i,match:ht,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(vt,yt),t[3]=(t[3]||t[4]||t[5]||"").replace(vt,yt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ht.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ct.test(n)&&(e=S(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(vt,yt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+tt+")"+t+"("+tt+"|$)"))&&z(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(o){var r=e.attr(o,t);return null==r?"!="===n:!n||(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r.replace(ot," ")+" ").indexOf(i)>-1:"|="===n&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var c,u,h,d,f,p,m=r!==s?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a,b=!1;if(g){if(r){for(;m;){for(d=e;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===t&&!p&&"nextSibling"}return!0}if(p=[s?g.firstChild:g.lastChild],s&&y){for(d=g,h=d[R]||(d[R]={}),u=h[d.uniqueID]||(h[d.uniqueID]={}),c=u[t]||[],f=c[0]===W&&c[1],b=f&&c[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(b=f=0)||p.pop();)if(1===d.nodeType&&++b&&d===e){u[t]=[W,f,b];break}}else if(y&&(d=e,h=d[R]||(d[R]={}),u=h[d.uniqueID]||(h[d.uniqueID]={}),c=u[t]||[],f=c[0]===W&&c[1],b=f),!1===b)for(;(d=++f&&d&&d[m]||(b=f=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&(h=d[R]||(d[R]={}),u=h[d.uniqueID]||(h[d.uniqueID]={}),u[t]=[W,b]),d!==e)););return(b-=o)===i||b%i==0&&b/i>=0}}},PSEUDO:function(t,n){var o,r=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[R]?r(n):r.length>1?(o=[t,t,"",n],x.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,o=r(t,n),s=o.length;s--;)i=Q(t,o[s]),t[i]=!(e[i]=o[s])}):function(t){return r(t,0,o)}):r}},pseudos:{not:i(function(t){var e=[],n=[],o=k(t.replace(rt,"$1"));return o[R]?i(function(t,e,n,i){for(var r,s=o(t,null,i,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,i,r){return e[0]=t,o(e,null,r,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(vt,yt),function(e){return(e.textContent||e.innerText||C(e)).indexOf(t)>-1}}),lang:i(function(t){return ut.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(vt,yt).toLowerCase(),function(e){var n;do{if(n=D?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===N},focus:function(t){return t===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:a(!1),disabled:a(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return ft.test(t.nodeName)},input:function(t){return dt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,n){return[n<0?n+e:n]}),even:l(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:l(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:l(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:l(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=function(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}(b);return u.prototype=x.filters=x.pseudos,x.setFilters=new u,S=e.tokenize=function(t,n){var i,o,r,s,a,l,c,u=j[t+" "];if(u)return n?0:u.slice(0);for(a=t,l=[],c=x.preFilter;a;){i&&!(o=st.exec(a))||(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),i=!1,(o=at.exec(a))&&(i=o.shift(),r.push({value:i,type:o[0].replace(rt," ")}),a=a.slice(i.length));for(s in x.filter)!(o=ht[s].exec(a))||c[s]&&!(o=c[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):j(t,l).slice(0)},k=e.compile=function(t,e){var n,i=[],o=[],r=q[t+" "];if(!r){for(e||(e=S(t)),n=e.length;n--;)r=v(e[n]),r[R]?i.push(r):o.push(r);r=q(t,y(o,i)),r.selector=t}return r},T=e.select=function(t,e,n,i){var o,r,s,a,l,u="function"==typeof t&&t,d=!i&&S(t=u.selector||t);if(n=n||[],1===d.length){if(r=d[0]=d[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&9===e.nodeType&&D&&x.relative[r[1].type]){if(!(e=(x.find.ID(s.matches[0].replace(vt,yt),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=ht.needsContext.test(t)?0:r.length;o--&&(s=r[o],!x.relative[a=s.type]);)if((l=x.find[a])&&(i=l(s.matches[0].replace(vt,yt),gt.test(r[0].type)&&c(e.parentNode)||e))){if(r.splice(o,1),!(t=i.length&&h(r)))return G.apply(n,i),n;break}}return(u||k(t,d))(i,e,!D,n,!e||gt.test(t)&&c(e.parentNode)||e),n},w.sortStable=R.split("").sort(U).join("")===R,w.detectDuplicates=!!A,P(),w.sortDetached=o(function(t){return 1&t.compareDocumentPosition(M.createElement("fieldset"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||r(J,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(n);kt.find=Et,kt.expr=Et.selectors,kt.expr[":"]=kt.expr.pseudos,kt.uniqueSort=kt.unique=Et.uniqueSort,kt.text=Et.getText,kt.isXMLDoc=Et.isXML,kt.contains=Et.contains,kt.escapeSelector=Et.escape;var Lt=function(t,e,n){for(var i=[],o=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&kt(t).is(n))break;i.push(t)}return i},At=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},Pt=kt.expr.match.needsContext,Mt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;kt.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?kt.find.matchesSelector(i,t)?[i]:[]:kt.find.matches(t,kt.grep(e,function(t){return 1===t.nodeType}))},kt.fn.extend({find:function(t){var e,n,i=this.length,o=this;if("string"!=typeof t)return this.pushStack(kt(t).filter(function(){for(e=0;e<i;e++)if(kt.contains(o[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)kt.find(t,o[e],n);return i>1?kt.uniqueSort(n):n},filter:function(t){return this.pushStack(u(this,t||[],!1))},not:function(t){return this.pushStack(u(this,t||[],!0))},is:function(t){return!!u(this,"string"==typeof t&&Pt.test(t)?kt(t):t||[],!1).length}});var Nt,Dt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(kt.fn.init=function(t,e,n){var i,o;if(!t)return this;if(n=n||Nt,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:Dt.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof kt?e[0]:e,kt.merge(this,kt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:ut,!0)),Mt.test(i[1])&&kt.isPlainObject(e))for(i in e)Ct(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return o=ut.getElementById(i[2]),o&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):Ct(t)?void 0!==n.ready?n.ready(t):t(kt):kt.makeArray(t,this)}).prototype=kt.fn,Nt=kt(ut);var Ot=/^(?:parents|prev(?:Until|All))/,It={children:!0,contents:!0,next:!0,prev:!0};kt.fn.extend({has:function(t){var e=kt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(kt.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,o=this.length,r=[],s="string"!=typeof t&&kt(t);if(!Pt.test(t))for(;i<o;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&kt.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?kt.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?mt.call(kt(t),this[0]):mt.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(kt.uniqueSort(kt.merge(this.get(),kt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),kt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Lt(t,"parentNode")},parentsUntil:function(t,e,n){return Lt(t,"parentNode",n)},next:function(t){return h(t,"nextSibling")},prev:function(t){return h(t,"previousSibling")},nextAll:function(t){return Lt(t,"nextSibling")},prevAll:function(t){return Lt(t,"previousSibling")},nextUntil:function(t,e,n){return Lt(t,"nextSibling",n)},prevUntil:function(t,e,n){return Lt(t,"previousSibling",n)},siblings:function(t){return At((t.parentNode||{}).firstChild,t)},children:function(t){return At(t.firstChild)},contents:function(t){return c(t,"iframe")?t.contentDocument:(c(t,"template")&&(t=t.content||t),kt.merge([],t.childNodes))}},function(t,e){kt.fn[t]=function(n,i){var o=kt.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=kt.filter(i,o)),this.length>1&&(It[t]||kt.uniqueSort(o),Ot.test(t)&&o.reverse()),this.pushStack(o)}});var Ht=/[^\x20\t\r\n\f]+/g;kt.Callbacks=function(t){t="string"==typeof t?d(t):kt.extend({},t);var e,n,i,o,r=[],s=[],l=-1,c=function(){for(o=o||t.once,i=e=!0;s.length;l=-1)for(n=s.shift();++l<r.length;)!1===r[l].apply(n[0],n[1])&&t.stopOnFalse&&(l=r.length,n=!1);t.memory||(n=!1),e=!1,o&&(r=n?[]:"")},u={add:function(){return r&&(n&&!e&&(l=r.length-1,s.push(n)),function e(n){kt.each(n,function(n,i){Ct(i)?t.unique&&u.has(i)||r.push(i):i&&i.length&&"string"!==a(i)&&e(i)})}(arguments),n&&!e&&c()),this},remove:function(){return kt.each(arguments,function(t,e){for(var n;(n=kt.inArray(e,r,n))>-1;)r.splice(n,1),n<=l&&l--}),this},has:function(t){return t?kt.inArray(t,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=s=[],r=n="",this},disabled:function(){return!r},lock:function(){return o=s=[],n||e||(r=n=""),this},locked:function(){return!!o},fireWith:function(t,n){return o||(n=n||[],n=[t,n.slice?n.slice():n],s.push(n),e||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},kt.extend({Deferred:function(t){var e=[["notify","progress",kt.Callbacks("memory"),kt.Callbacks("memory"),2],["resolve","done",kt.Callbacks("once memory"),kt.Callbacks("once memory"),0,"resolved"],["reject","fail",kt.Callbacks("once memory"),kt.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return o.then(null,t)},pipe:function(){var t=arguments;return kt.Deferred(function(n){kt.each(e,function(e,i){var o=Ct(t[i[4]])&&t[i[4]];r[i[1]](function(){var t=o&&o.apply(this,arguments);t&&Ct(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,o?[t]:arguments)})}),t=null}).promise()},then:function(t,i,o){function r(t,e,i,o){return function(){var a=this,l=arguments,c=function(){var n,c;if(!(t<s)){if((n=i.apply(a,l))===e.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,Ct(c)?o?c.call(n,r(s,e,f,o),r(s,e,p,o)):(s++,c.call(n,r(s,e,f,o),r(s,e,p,o),r(s,e,f,e.notifyWith))):(i!==f&&(a=void 0,l=[n]),(o||e.resolveWith)(a,l))}},u=o?c:function(){try{c()}catch(n){kt.Deferred.exceptionHook&&kt.Deferred.exceptionHook(n,u.stackTrace),t+1>=s&&(i!==p&&(a=void 0,l=[n]),e.rejectWith(a,l))}};t?u():(kt.Deferred.getStackHook&&(u.stackTrace=kt.Deferred.getStackHook()),n.setTimeout(u))}}var s=0;return kt.Deferred(function(n){e[0][3].add(r(0,n,Ct(o)?o:f,n.notifyWith)),e[1][3].add(r(0,n,Ct(t)?t:f)),e[2][3].add(r(0,n,Ct(i)?i:p))}).promise()},promise:function(t){return null!=t?kt.extend(t,o):o}},r={};return kt.each(e,function(t,n){var s=n[2],a=n[5];o[n[1]]=s.add,a&&s.add(function(){i=a},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(n[3].fire),r[n[0]]=function(){return r[n[0]+"With"](this===r?void 0:this,arguments),this},r[n[0]+"With"]=s.fireWith}),o.promise(r),t&&t.call(r,r),r},when:function(t){var e=arguments.length,n=e,i=Array(n),o=dt.call(arguments),r=kt.Deferred(),s=function(t){return function(n){i[t]=this,o[t]=arguments.length>1?dt.call(arguments):n,--e||r.resolveWith(i,o)}};if(e<=1&&(m(t,r.done(s(n)).resolve,r.reject,!e),"pending"===r.state()||Ct(o[n]&&o[n].then)))return r.then();for(;n--;)m(o[n],s(n),r.reject);return r.promise()}});var Ft=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;kt.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&Ft.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},kt.readyException=function(t){n.setTimeout(function(){throw t})};var Rt=kt.Deferred();kt.fn.ready=function(t){return Rt.then(t).catch(function(t){kt.readyException(t)}),this},kt.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--kt.readyWait:kt.isReady)||(kt.isReady=!0,!0!==t&&--kt.readyWait>0||Rt.resolveWith(ut,[kt]))}}),kt.ready.then=Rt.then,"complete"===ut.readyState||"loading"!==ut.readyState&&!ut.documentElement.doScroll?n.setTimeout(kt.ready):(ut.addEventListener("DOMContentLoaded",g),n.addEventListener("load",g));var Bt=function(t,e,n,i,o,r,s){var l=0,c=t.length,u=null==n;if("object"===a(n)){o=!0;for(l in n)Bt(t,e,l,n[l],!0,r,s)}else if(void 0!==i&&(o=!0,Ct(i)||(s=!0),u&&(s?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(kt(t),n)})),e))for(;l<c;l++)e(t[l],n,s?i:i.call(t[l],l,e(t[l],n)));return o?t:u?e.call(t):c?e(t[0],n):r},Wt=/^-ms-/,$t=/-([a-z])/g,zt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};b.uid=1,b.prototype={cache:function(t){var e=t[this.expando];return e||(e={},zt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,o=this.cache(t);if("string"==typeof e)o[y(e)]=n;else for(i in e)o[y(i)]=e[i];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][y(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){Array.isArray(e)?e=e.map(y):(e=y(e),e=e in i?[e]:e.match(Ht)||[]),n=e.length;for(;n--;)delete i[e[n]]}(void 0===e||kt.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!kt.isEmptyObject(e)}};var jt=new b,qt=new b,Ut=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Vt=/[A-Z]/g;kt.extend({hasData:function(t){return qt.hasData(t)||jt.hasData(t)},data:function(t,e,n){return qt.access(t,e,n)},removeData:function(t,e){qt.remove(t,e)},_data:function(t,e,n){return jt.access(t,e,n)},_removeData:function(t,e){jt.remove(t,e)}}),kt.fn.extend({data:function(t,e){var n,i,o,r=this[0],s=r&&r.attributes;if(void 0===t){if(this.length&&(o=qt.get(r),1===r.nodeType&&!jt.get(r,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=y(i.slice(5)),x(r,i,o[i])));jt.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof t?this.each(function(){qt.set(this,t)}):Bt(this,function(e){var n;if(r&&void 0===e){if(void 0!==(n=qt.get(r,t)))return n;if(void 0!==(n=x(r,t)))return n}else this.each(function(){qt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){qt.remove(this,t)})}}),kt.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=jt.get(t,e),n&&(!i||Array.isArray(n)?i=jt.access(t,e,kt.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=kt.queue(t,e),i=n.length,o=n.shift(),r=kt._queueHooks(t,e),s=function(){kt.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,s,r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return jt.get(t,n)||jt.access(t,n,{empty:kt.Callbacks("once memory").add(function(){jt.remove(t,[e+"queue",n])})})}}),kt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?kt.queue(this[0],t):void 0===e?this:this.each(function(){var n=kt.queue(this,t,e);kt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&kt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){kt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=kt.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=jt.get(r[s],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(e)}});var Kt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Xt=new RegExp("^(?:([+-])=|)("+Kt+")([a-z%]*)$","i"),Yt=["Top","Right","Bottom","Left"],Gt=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&kt.contains(t.ownerDocument,t)&&"none"===kt.css(t,"display")},Zt=function(t,e,n,i){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];o=n.apply(t,i||[]);for(r in e)t.style[r]=s[r];return o},Qt={};kt.fn.extend({show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Gt(this)?kt(this).show():kt(this).hide()})}});var Jt=/^(?:checkbox|radio)$/i,te=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ee=/^$|^module$|\/(?:java|ecma)script/i,ne={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ne.optgroup=ne.option,ne.tbody=ne.tfoot=ne.colgroup=ne.caption=ne.thead,ne.th=ne.td;var ie=/<|&#?\w+;/;!function(){var t=ut.createDocumentFragment(),e=t.appendChild(ut.createElement("div")),n=ut.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),xt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",xt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var oe=ut.documentElement,re=/^key/,se=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ae=/^([^.]*)(?:\.(.+)|)/;kt.event={global:{},add:function(t,e,n,i,o){var r,s,a,l,c,u,h,d,f,p,m,g=jt.get(t);if(g)for(n.handler&&(r=n,n=r.handler,o=r.selector),o&&kt.find.matchesSelector(oe,o),n.guid||(n.guid=kt.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(e){return void 0!==kt&&kt.event.triggered!==e.type?kt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(Ht)||[""],c=e.length;c--;)a=ae.exec(e[c])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f&&(h=kt.event.special[f]||{},f=(o?h.delegateType:h.bindType)||f,h=kt.event.special[f]||{},u=kt.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&kt.expr.match.needsContext.test(o),namespace:p.join(".")},r),(d=l[f])||(d=l[f]=[],d.delegateCount=0,h.setup&&!1!==h.setup.call(t,i,p,s)||t.addEventListener&&t.addEventListener(f,s)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),o?d.splice(d.delegateCount++,0,u):d.push(u),kt.event.global[f]=!0)},remove:function(t,e,n,i,o){var r,s,a,l,c,u,h,d,f,p,m,g=jt.hasData(t)&&jt.get(t);if(g&&(l=g.events)){for(e=(e||"").match(Ht)||[""],c=e.length;c--;)if(a=ae.exec(e[c])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f){for(h=kt.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,d=l[f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=d.length;r--;)u=d[r],!o&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(r,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,g.handle)||kt.removeEvent(t,f,g.handle),delete l[f])}else for(f in l)kt.event.remove(t,f+e[c],n,i,!0);kt.isEmptyObject(l)&&jt.remove(t,"handle events")}},dispatch:function(t){var e,n,i,o,r,s,a=kt.event.fix(t),l=new Array(arguments.length),c=(jt.get(this,"events")||{})[a.type]||[],u=kt.event.special[a.type]||{};for(l[0]=a,e=1;e<arguments.length;e++)l[e]=arguments[e];if(a.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,a)){for(s=kt.event.handlers.call(this,a,c),e=0;(o=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(r.namespace)||(a.handleObj=r,a.data=r.data,void 0!==(i=((kt.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,l))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,i,o,r,s,a=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(r=[],s={},n=0;n<l;n++)i=e[n],o=i.selector+" ",void 0===s[o]&&(s[o]=i.needsContext?kt(o,this).index(c)>-1:kt.find(o,this,null,[c]).length),s[o]&&r.push(i);r.length&&a.push({elem:c,handlers:r})}return c=this,l<e.length&&a.push({elem:c,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(kt.Event.prototype,t,{enumerable:!0,configurable:!0,get:Ct(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[kt.expando]?t:new kt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==P()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===P()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&c(this,"input"))return this.click(),!1},_default:function(t){return c(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},kt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},kt.Event=function(t,e){if(!(this instanceof kt.Event))return new kt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?L:A,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&kt.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[kt.expando]=!0},kt.Event.prototype={constructor:kt.Event,isDefaultPrevented:A,isPropagationStopped:A,isImmediatePropagationStopped:A,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=L,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=L,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=L,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},kt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&re.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&se.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},kt.event.addProp),kt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){kt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,r=t.handleObj;return o&&(o===i||kt.contains(i,o))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),kt.fn.extend({on:function(t,e,n,i){return M(this,t,e,n,i)},one:function(t,e,n,i){return M(this,t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,kt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=A),this.each(function(){kt.event.remove(this,t,n,e)})}});var le=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ce=/<script|<style|<link/i,ue=/checked\s*(?:[^=]|=\s*.checked.)/i,he=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;kt.extend({htmlPrefilter:function(t){return t.replace(le,"<$1></$2>")},clone:function(t,e,n){var i,o,r,s,a=t.cloneNode(!0),l=kt.contains(t.ownerDocument,t);if(!(xt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||kt.isXMLDoc(t)))for(s=k(a),r=k(t),i=0,o=r.length;i<o;i++)H(r[i],s[i]);if(e)if(n)for(r=r||k(t),s=s||k(a),i=0,o=r.length;i<o;i++)I(r[i],s[i]);else I(t,a);return s=k(a,"script"),s.length>0&&T(s,!l&&k(t,"script")),a},cleanData:function(t){for(var e,n,i,o=kt.event.special,r=0;void 0!==(n=t[r]);r++)if(zt(n)){if(e=n[jt.expando]){if(e.events)for(i in e.events)o[i]?kt.event.remove(n,i):kt.removeEvent(n,i,e.handle);n[jt.expando]=void 0}n[qt.expando]&&(n[qt.expando]=void 0)}}}),kt.fn.extend({detach:function(t){return R(this,t,!0)},remove:function(t){return R(this,t)},text:function(t){return Bt(this,function(t){return void 0===t?kt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return F(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){N(this,t).appendChild(t)}})},prepend:function(){return F(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=N(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return F(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return F(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(kt.cleanData(k(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return kt.clone(this,t,e)})},html:function(t){return Bt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ce.test(t)&&!ne[(te.exec(t)||["",""])[1].toLowerCase()]){t=kt.htmlPrefilter(t);try{for(;n<i;n++)e=this[n]||{},1===e.nodeType&&(kt.cleanData(k(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return F(this,arguments,function(e){var n=this.parentNode;kt.inArray(this,t)<0&&(kt.cleanData(k(this)),n&&n.replaceChild(e,this))},t)}}),kt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){kt.fn[t]=function(t){for(var n,i=[],o=kt(t),r=o.length-1,s=0;s<=r;s++)n=s===r?this:this.clone(!0),kt(o[s])[e](n),pt.apply(i,n.get());return this.pushStack(i)}});var de=new RegExp("^("+Kt+")(?!px)[a-z%]+$","i"),fe=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},pe=new RegExp(Yt.join("|"),"i");!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",oe.appendChild(l).appendChild(c);var t=n.getComputedStyle(c);i="1%"!==t.top,a=12===e(t.marginLeft),c.style.right="60%",s=36===e(t.right),o=36===e(t.width),c.style.position="absolute",r=36===c.offsetWidth||"absolute",oe.removeChild(l),c=null}}function e(t){return Math.round(parseFloat(t))}var i,o,r,s,a,l=ut.createElement("div"),c=ut.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",xt.clearCloneStyle="content-box"===c.style.backgroundClip,kt.extend(xt,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),a},scrollboxSize:function(){return t(),r}}))}();var me=/^(none|table(?!-c[ea]).+)/,ge=/^--/,ve={position:"absolute",visibility:"hidden",display:"block"},ye={letterSpacing:"0",fontWeight:"400"},be=["Webkit","Moz","ms"],we=ut.createElement("div").style;kt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=B(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,s,a=y(e),l=ge.test(e),c=t.style;if(l||(e=z(a)),s=kt.cssHooks[e]||kt.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(t,!1,i))?o:c[e];r=typeof n,"string"===r&&(o=Xt.exec(n))&&o[1]&&(n=C(t,e,o),r="number"),null!=n&&n===n&&("number"===r&&(n+=o&&o[3]||(kt.cssNumber[a]?"":"px")),xt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(l?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,i){var o,r,s,a=y(e);return ge.test(e)||(e=z(a)),s=kt.cssHooks[e]||kt.cssHooks[a],s&&"get"in s&&(o=s.get(t,!0,n)),void 0===o&&(o=B(t,e,i)),"normal"===o&&e in ye&&(o=ye[e]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),kt.each(["height","width"],function(t,e){kt.cssHooks[e]={get:function(t,n,i){if(n)return!me.test(kt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?U(t,e,i):Zt(t,ve,function(){return U(t,e,i)})},set:function(t,n,i){var o,r=fe(t),s="border-box"===kt.css(t,"boxSizing",!1,r),a=i&&q(t,e,i,s,r);return s&&xt.scrollboxSize()===r.position&&(a-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(r[e])-q(t,e,"border",!1,r)-.5)),a&&(o=Xt.exec(n))&&"px"!==(o[3]||"px")&&(t.style[e]=n,n=kt.css(t,e)),j(t,n,a)}}}),kt.cssHooks.marginLeft=W(xt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(B(t,"marginLeft"))||t.getBoundingClientRect().left-Zt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),kt.each({margin:"",padding:"",border:"Width"},function(t,e){kt.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];i<4;i++)o[t+Yt[i]+e]=r[i]||r[i-2]||r[0];return o}},"margin"!==t&&(kt.cssHooks[t+e].set=j)}),kt.fn.extend({css:function(t,e){return Bt(this,function(t,e,n){var i,o,r={},s=0;if(Array.isArray(e)){for(i=fe(t),o=e.length;s<o;s++)r[e[s]]=kt.css(t,e[s],!1,i);return r}return void 0!==n?kt.style(t,e,n):kt.css(t,e)},t,e,arguments.length>1)}}),kt.Tween=V,V.prototype={constructor:V,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||kt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(kt.cssNumber[n]?"":"px")},cur:function(){var t=V.propHooks[this.prop];return t&&t.get?t.get(this):V.propHooks._default.get(this)},run:function(t){var e,n=V.propHooks[this.prop];return this.options.duration?this.pos=e=kt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):V.propHooks._default.set(this),this}},V.prototype.init.prototype=V.prototype,V.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=kt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){kt.fx.step[t.prop]?kt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[kt.cssProps[t.prop]]&&!kt.cssHooks[t.prop]?t.elem[t.prop]=t.now:kt.style(t.elem,t.prop,t.now+t.unit)}}},V.propHooks.scrollTop=V.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},kt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},kt.fx=V.prototype.init,kt.fx.step={};var xe,Ce,_e=/^(?:toggle|show|hide)$/,Se=/queueHooks$/;kt.Animation=kt.extend(J,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return C(n.elem,t,Xt.exec(e),n),n}]},tweener:function(t,e){Ct(t)?(e=t,t=["*"]):t=t.match(Ht);for(var n,i=0,o=t.length;i<o;i++)n=t[i],J.tweeners[n]=J.tweeners[n]||[],J.tweeners[n].unshift(e)},prefilters:[Z],prefilter:function(t,e){e?J.prefilters.unshift(t):J.prefilters.push(t)}}),kt.speed=function(t,e,n){var i=t&&"object"==typeof t?kt.extend({},t):{complete:n||!n&&e||Ct(t)&&t,duration:t,easing:n&&e||e&&!Ct(e)&&e};return kt.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in kt.fx.speeds?i.duration=kt.fx.speeds[i.duration]:i.duration=kt.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){Ct(i.old)&&i.old.call(this),i.queue&&kt.dequeue(this,i.queue)},i},kt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=kt.isEmptyObject(t),r=kt.speed(e,n,i),s=function(){var e=J(this,kt.extend({},t),r);(o||jt.get(this,"finish"))&&e.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",r=kt.timers,s=jt.get(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&Se.test(o)&&i(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(n),e=!1,r.splice(o,1));!e&&n||kt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=jt.get(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=kt.timers,s=i?i.length:0;for(n.finish=!0,kt.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<s;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),kt.each(["toggle","show","hide"],function(t,e){var n=kt.fn[e];kt.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(Y(e,!0),t,i,o)}}),kt.each({slideDown:Y("show"),slideUp:Y("hide"),slideToggle:Y("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){kt.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),kt.timers=[],kt.fx.tick=function(){var t,e=0,n=kt.timers;for(xe=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||kt.fx.stop(),xe=void 0},kt.fx.timer=function(t){kt.timers.push(t),kt.fx.start()},kt.fx.interval=13,kt.fx.start=function(){Ce||(Ce=!0,K())},kt.fx.stop=function(){Ce=null},kt.fx.speeds={slow:600,fast:200,_default:400},kt.fn.delay=function(t,e){return t=kt.fx?kt.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var o=n.setTimeout(e,t);i.stop=function(){n.clearTimeout(o)}})},function(){var t=ut.createElement("input"),e=ut.createElement("select"),n=e.appendChild(ut.createElement("option"));t.type="checkbox",xt.checkOn=""!==t.value,xt.optSelected=n.selected,t=ut.createElement("input"),t.value="t",t.type="radio",xt.radioValue="t"===t.value}();var ke,Te=kt.expr.attrHandle;kt.fn.extend({attr:function(t,e){return Bt(this,kt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){kt.removeAttr(this,t)})}}),kt.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?kt.prop(t,e,n):(1===r&&kt.isXMLDoc(t)||(o=kt.attrHooks[e.toLowerCase()]||(kt.expr.match.bool.test(e)?ke:void 0)),void 0!==n?null===n?void kt.removeAttr(t,e):o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:(t.setAttribute(e,n+""),n):o&&"get"in o&&null!==(i=o.get(t,e))?i:(i=kt.find.attr(t,e),null==i?void 0:i))},attrHooks:{type:{set:function(t,e){if(!xt.radioValue&&"radio"===e&&c(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,o=e&&e.match(Ht);if(o&&1===t.nodeType)for(;n=o[i++];)t.removeAttribute(n)}}),ke={set:function(t,e,n){return!1===e?kt.removeAttr(t,n):t.setAttribute(n,n),n}},kt.each(kt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=Te[e]||kt.find.attr;Te[e]=function(t,e,i){var o,r,s=e.toLowerCase();return i||(r=Te[s],Te[s]=o,o=null!=n(t,e,i)?s:null,Te[s]=r),o}});var Ee=/^(?:input|select|textarea|button)$/i,Le=/^(?:a|area)$/i;kt.fn.extend({prop:function(t,e){return Bt(this,kt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[kt.propFix[t]||t]})}}),kt.extend({prop:function(t,e,n){var i,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&kt.isXMLDoc(t)||(e=kt.propFix[e]||e,o=kt.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=kt.find.attr(t,"tabindex");return e?parseInt(e,10):Ee.test(t.nodeName)||Le.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),xt.optSelected||(kt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),kt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){kt.propFix[this.toLowerCase()]=this}),kt.fn.extend({addClass:function(t){var e,n,i,o,r,s,a,l=0;if(Ct(t))return this.each(function(e){kt(this).addClass(t.call(this,e,et(this)))});if(e=nt(t),e.length)for(;n=this[l++];)if(o=et(n),i=1===n.nodeType&&" "+tt(o)+" "){for(s=0;r=e[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=tt(i),o!==a&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,o,r,s,a,l=0;if(Ct(t))return this.each(function(e){kt(this).removeClass(t.call(this,e,et(this)))});if(!arguments.length)return this.attr("class","");if(e=nt(t),e.length)for(;n=this[l++];)if(o=et(n),i=1===n.nodeType&&" "+tt(o)+" "){for(s=0;r=e[s++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");a=tt(i),o!==a&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):Ct(t)?this.each(function(n){kt(this).toggleClass(t.call(this,n,et(this),e),e)}):this.each(function(){var e,o,r,s;if(i)for(o=0,r=kt(this),s=nt(t);e=s[o++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==n||(e=et(this),e&&jt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":jt.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+tt(et(n))+" ").indexOf(e)>-1)return!0;return!1}});var Ae=/\r/g;kt.fn.extend({val:function(t){var e,n,i,o=this[0];{if(arguments.length)return i=Ct(t),this.each(function(n){var o;1===this.nodeType&&(o=i?t.call(this,n,kt(this).val()):t,null==o?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=kt.map(o,function(t){return null==t?"":t+""})),(e=kt.valHooks[this.type]||kt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return(e=kt.valHooks[o.type]||kt.valHooks[o.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(Ae,""):null==n?"":n)}}}),kt.extend({valHooks:{option:{get:function(t){var e=kt.find.attr(t,"value");return null!=e?e:tt(kt.text(t))}},select:{get:function(t){var e,n,i,o=t.options,r=t.selectedIndex,s="select-one"===t.type,a=s?null:[],l=s?r+1:o.length;for(i=r<0?l:s?r:0;i<l;i++)if(n=o[i],(n.selected||i===r)&&!n.disabled&&(!n.parentNode.disabled||!c(n.parentNode,"optgroup"))){if(e=kt(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,i,o=t.options,r=kt.makeArray(e),s=o.length;s--;)i=o[s],(i.selected=kt.inArray(kt.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),kt.each(["radio","checkbox"],function(){kt.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=kt.inArray(kt(t).val(),e)>-1}},xt.checkOn||(kt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),xt.focusin="onfocusin"in n;var Pe=/^(?:focusinfocus|focusoutblur)$/,Me=function(t){t.stopPropagation()};kt.extend(kt.event,{trigger:function(t,e,i,o){var r,s,a,l,c,u,h,d,f=[i||ut],p=yt.call(t,"type")?t.type:t,m=yt.call(t,"namespace")?t.namespace.split("."):[];if(s=d=a=i=i||ut,3!==i.nodeType&&8!==i.nodeType&&!Pe.test(p+kt.event.triggered)&&(p.indexOf(".")>-1&&(m=p.split("."),p=m.shift(),m.sort()),c=p.indexOf(":")<0&&"on"+p,t=t[kt.expando]?t:new kt.Event(p,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:kt.makeArray(e,[t]),h=kt.event.special[p]||{},o||!h.trigger||!1!==h.trigger.apply(i,e))){if(!o&&!h.noBubble&&!_t(i)){for(l=h.delegateType||p,Pe.test(l+p)||(s=s.parentNode);s;s=s.parentNode)f.push(s),a=s;a===(i.ownerDocument||ut)&&f.push(a.defaultView||a.parentWindow||n)}for(r=0;(s=f[r++])&&!t.isPropagationStopped();)d=s,t.type=r>1?l:h.bindType||p,u=(jt.get(s,"events")||{})[t.type]&&jt.get(s,"handle"),u&&u.apply(s,e),(u=c&&s[c])&&u.apply&&zt(s)&&(t.result=u.apply(s,e),!1===t.result&&t.preventDefault());return t.type=p,o||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),e)||!zt(i)||c&&Ct(i[p])&&!_t(i)&&(a=i[c],a&&(i[c]=null),kt.event.triggered=p,t.isPropagationStopped()&&d.addEventListener(p,Me),i[p](),t.isPropagationStopped()&&d.removeEventListener(p,Me),kt.event.triggered=void 0,a&&(i[c]=a)),t.result}},simulate:function(t,e,n){var i=kt.extend(new kt.Event,n,{type:t,isSimulated:!0});kt.event.trigger(i,null,e)}}),kt.fn.extend({trigger:function(t,e){return this.each(function(){kt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return kt.event.trigger(t,e,n,!0)}}),xt.focusin||kt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){kt.event.simulate(e,t.target,kt.event.fix(t))};kt.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=jt.access(i,e);o||i.addEventListener(t,n,!0),jt.access(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=jt.access(i,e)-1;o?jt.access(i,e,o):(i.removeEventListener(t,n,!0),jt.remove(i,e))}}});var Ne=n.location,De=Date.now(),Oe=/\?/;kt.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||kt.error("Invalid XML: "+t),e};var Ie=/\[\]$/,He=/\r?\n/g,Fe=/^(?:submit|button|image|reset|file)$/i,Re=/^(?:input|select|textarea|keygen)/i;kt.param=function(t,e){var n,i=[],o=function(t,e){var n=Ct(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!kt.isPlainObject(t))kt.each(t,function(){o(this.name,this.value)});else for(n in t)it(n,t[n],e,o);return i.join("&")},kt.fn.extend({serialize:function(){return kt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=kt.prop(this,"elements");return t?kt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!kt(this).is(":disabled")&&Re.test(this.nodeName)&&!Fe.test(t)&&(this.checked||!Jt.test(t))}).map(function(t,e){var n=kt(this).val();return null==n?null:Array.isArray(n)?kt.map(n,function(t){return{name:e.name,value:t.replace(He,"\r\n")}}):{name:e.name,value:n.replace(He,"\r\n")}}).get()}});var Be=/%20/g,We=/#.*$/,$e=/([?&])_=[^&]*/,ze=/^(.*?):[ \t]*([^\r\n]*)$/gm,je=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,qe=/^(?:GET|HEAD)$/,Ue=/^\/\//,Ve={},Ke={},Xe="*/".concat("*"),Ye=ut.createElement("a");Ye.href=Ne.href,kt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ne.href,type:"GET",isLocal:je.test(Ne.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":kt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?st(st(t,kt.ajaxSettings),e):st(kt.ajaxSettings,t)},ajaxPrefilter:ot(Ve),ajaxTransport:ot(Ke),ajax:function(t,e){function i(t,e,i,a){var c,d,f,w,x,C=e;u||(u=!0,l&&n.clearTimeout(l),o=void 0,s=a||"",_.readyState=t>0?4:0,c=t>=200&&t<300||304===t,i&&(w=at(p,_,i)),w=lt(p,w,_,c),c?(p.ifModified&&(x=_.getResponseHeader("Last-Modified"),x&&(kt.lastModified[r]=x),(x=_.getResponseHeader("etag"))&&(kt.etag[r]=x)),204===t||"HEAD"===p.type?C="nocontent":304===t?C="notmodified":(C=w.state,d=w.data,f=w.error,c=!f)):(f=C,!t&&C||(C="error",t<0&&(t=0))),_.status=t,_.statusText=(e||C)+"",c?v.resolveWith(m,[d,C,_]):v.rejectWith(m,[_,C,f]),_.statusCode(b),b=void 0,h&&g.trigger(c?"ajaxSuccess":"ajaxError",[_,p,c?d:f]),y.fireWith(m,[_,C]),h&&(g.trigger("ajaxComplete",[_,p]),--kt.active||kt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var o,r,s,a,l,c,u,h,d,f,p=kt.ajaxSetup({},e),m=p.context||p,g=p.context&&(m.nodeType||m.jquery)?kt(m):kt.event,v=kt.Deferred(),y=kt.Callbacks("once memory"),b=p.statusCode||{},w={},x={},C="canceled",_={readyState:0,getResponseHeader:function(t){var e;if(u){if(!a)for(a={};e=ze.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return u?s:null},setRequestHeader:function(t,e){return null==u&&(t=x[t.toLowerCase()]=x[t.toLowerCase()]||t,w[t]=e),this},overrideMimeType:function(t){return null==u&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)_.always(t[_.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||C;return o&&o.abort(e),i(0,e),this}};if(v.promise(_),p.url=((t||p.url||Ne.href)+"").replace(Ue,Ne.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(Ht)||[""],null==p.crossDomain){c=ut.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=Ye.protocol+"//"+Ye.host!=c.protocol+"//"+c.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=kt.param(p.data,p.traditional)),rt(Ve,p,e,_),u)return _;h=kt.event&&p.global,h&&0==kt.active++&&kt.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!qe.test(p.type),r=p.url.replace(We,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Be,"+")):(f=p.url.slice(r.length),p.data&&(p.processData||"string"==typeof p.data)&&(r+=(Oe.test(r)?"&":"?")+p.data,delete p.data),!1===p.cache&&(r=r.replace($e,"$1"),f=(Oe.test(r)?"&":"?")+"_="+De+++f),p.url=r+f),p.ifModified&&(kt.lastModified[r]&&_.setRequestHeader("If-Modified-Since",kt.lastModified[r]),kt.etag[r]&&_.setRequestHeader("If-None-Match",kt.etag[r])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&_.setRequestHeader("Content-Type",p.contentType),_.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Xe+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)_.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(m,_,p)||u))return _.abort();if(C="abort",y.add(p.complete),_.done(p.success),_.fail(p.error),o=rt(Ke,p,e,_)){if(_.readyState=1,h&&g.trigger("ajaxSend",[_,p]),u)return _;p.async&&p.timeout>0&&(l=n.setTimeout(function(){_.abort("timeout")},p.timeout));try{u=!1,o.send(w,i)}catch(t){if(u)throw t;i(-1,t)}}else i(-1,"No Transport");return _},getJSON:function(t,e,n){return kt.get(t,e,n,"json")},getScript:function(t,e){return kt.get(t,void 0,e,"script")}}),kt.each(["get","post"],function(t,e){kt[e]=function(t,n,i,o){return Ct(n)&&(o=o||i,i=n,n=void 0),kt.ajax(kt.extend({url:t,type:e,dataType:o,data:n,success:i},kt.isPlainObject(t)&&t))}}),kt._evalUrl=function(t){return kt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},kt.fn.extend({wrapAll:function(t){var e;return this[0]&&(Ct(t)&&(t=t.call(this[0])),e=kt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return Ct(t)?this.each(function(e){kt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=kt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=Ct(t);return this.each(function(n){kt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){kt(this).replaceWith(this.childNodes)}),this}}),kt.expr.pseudos.hidden=function(t){return!kt.expr.pseudos.visible(t)},kt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},kt.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var Ge={0:200,1223:204},Ze=kt.ajaxSettings.xhr();xt.cors=!!Ze&&"withCredentials"in Ze,xt.ajax=Ze=!!Ze,kt.ajaxTransport(function(t){var e,i;if(xt.cors||Ze&&!t.crossDomain)return{send:function(o,r){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(s in o)a.setRequestHeader(s,o[s]);e=function(t){return function(){e&&(e=i=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(Ge[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),i=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout(function(){e&&i()})},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),kt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),kt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return kt.globalEval(t),t}}}),kt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),kt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,o){e=kt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&o("error"===t.type?404:200,t.type)}),ut.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Qe=[],Je=/(=)\?(?=&|$)|\?\?/;kt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Qe.pop()||kt.expando+"_"+De++;return this[t]=!0,t}}),kt.ajaxPrefilter("json jsonp",function(t,e,i){var o,r,s,a=!1!==t.jsonp&&(Je.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Je.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=Ct(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Je,"$1"+o):!1!==t.jsonp&&(t.url+=(Oe.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return s||kt.error(o+" was not called"),s[0]},t.dataTypes[0]="json",r=n[o],n[o]=function(){s=arguments},i.always(function(){void 0===r?kt(n).removeProp(o):n[o]=r,t[o]&&(t.jsonpCallback=e.jsonpCallback,Qe.push(o)),s&&Ct(r)&&r(s[0]),s=r=void 0}),"script"}),xt.createHTMLDocument=function(){var t=ut.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),kt.parseHTML=function(t,e,n){if("string"!=typeof t)return[];"boolean"==typeof e&&(n=e,e=!1);var i,o,r;return e||(xt.createHTMLDocument?(e=ut.implementation.createHTMLDocument(""),i=e.createElement("base"),i.href=ut.location.href,e.head.appendChild(i)):e=ut),o=Mt.exec(t),r=!n&&[],o?[e.createElement(o[1])]:(o=E([t],e,r),r&&r.length&&kt(r).remove(),kt.merge([],o.childNodes))},kt.fn.load=function(t,e,n){var i,o,r,s=this,a=t.indexOf(" ");return a>-1&&(i=tt(t.slice(a)),t=t.slice(0,a)),Ct(e)?(n=e,e=void 0):e&&"object"==typeof e&&(o="POST"),s.length>0&&kt.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done(function(t){r=arguments,s.html(i?kt("<div>").append(kt.parseHTML(t)).find(i):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,r||[t.responseText,e,t])})}),this},kt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){kt.fn[e]=function(t){return this.on(e,t)}}),kt.expr.pseudos.animated=function(t){return kt.grep(kt.timers,function(e){return t===e.elem}).length},kt.offset={setOffset:function(t,e,n){var i,o,r,s,a,l,c,u=kt.css(t,"position"),h=kt(t),d={};"static"===u&&(t.style.position="relative"),a=h.offset(),r=kt.css(t,"top"),l=kt.css(t,"left"),c=("absolute"===u||"fixed"===u)&&(r+l).indexOf("auto")>-1,c?(i=h.position(),s=i.top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),Ct(e)&&(e=e.call(t,n,kt.extend({},a))),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+o),"using"in e?e.using.call(t,d):h.css(d)}},kt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){kt.offset.setOffset(this,t,e)});var e,n,i=this[0];if(i)return i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var t,e,n,i=this[0],o={top:0,left:0};if("fixed"===kt.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===kt.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&(o=kt(t).offset(),o.top+=kt.css(t,"borderTopWidth",!0),o.left+=kt.css(t,"borderLeftWidth",!0))}return{top:e.top-o.top-kt.css(i,"marginTop",!0),left:e.left-o.left-kt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===kt.css(t,"position");)t=t.offsetParent;return t||oe})}}),kt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;kt.fn[t]=function(i){return Bt(this,function(t,i,o){var r;if(_t(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===o)return r?r[e]:t[i];r?r.scrollTo(n?r.pageXOffset:o,n?o:r.pageYOffset):t[i]=o},t,i,arguments.length)}}),kt.each(["top","left"],function(t,e){kt.cssHooks[e]=W(xt.pixelPosition,function(t,n){if(n)return n=B(t,e),de.test(n)?kt(t).position()[e]+"px":n})}),kt.each({Height:"height",Width:"width"},function(t,e){kt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){kt.fn[i]=function(o,r){var s=arguments.length&&(n||"boolean"!=typeof o),a=n||(!0===o||!0===r?"margin":"border");return Bt(this,function(e,n,o){var r;return _t(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===o?kt.css(e,n,a):kt.style(e,n,o,a)},e,s?o:void 0,s)}})}),kt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){kt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),kt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),kt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),kt.proxy=function(t,e){var n,i,o;if("string"==typeof e&&(n=t[e],e=t,t=n),Ct(t))return i=dt.call(arguments,2),o=function(){return t.apply(e||this,i.concat(dt.call(arguments)))},o.guid=t.guid=t.guid||kt.guid++,o},kt.holdReady=function(t){t?kt.readyWait++:kt.ready(!0)},kt.isArray=Array.isArray,kt.parseJSON=JSON.parse,kt.nodeName=c,kt.isFunction=Ct,kt.isWindow=_t,kt.camelCase=y,kt.type=a,kt.now=Date.now,kt.isNumeric=function(t){var e=kt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},i=[],void 0!==(o=function(){return kt}.apply(e,i))&&(t.exports=o);var tn=n.jQuery,en=n.$;return kt.noConflict=function(t){return n.$===kt&&(n.$=en),t&&n.jQuery===kt&&(n.jQuery=tn),kt},r||(n.jQuery=n.$=kt),kt})},function(t,e,n){var i,o,r;!function(s){o=[n(0)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.ui=t.ui||{},t.ui.version="1.12.1"})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){return new RegExp(" "+e+" ").test(" "+t.className+" ")},o=function(t,e){i(t,e)||(t.className+=" "+e)},r=function(t,e){var n=" "+t.className.replace(/[\t\r\n]/g," ")+" ";if(i(t,e)){for(;n.indexOf(" "+e+" ")>=0;)n=n.replace(" "+e+" "," ");t.className=n.replace(/^\s+|\s+$/g,"")}},s=function(t){var e=document.createElement("div");return e.appendChild(document.createTextNode(t)),e.innerHTML},a=function(t){t.style.opacity="",t.style.display="block"},l=function(t){if(t&&!t.length)return a(t);for(var e=0;e<t.length;++e)a(t[e])},c=function(t){t.style.opacity="",t.style.display="none"},u=function(t){if(t&&!t.length)return c(t);for(var e=0;e<t.length;++e)c(t[e])},h=function(t,e){for(var n=e.parentNode;null!==n;){if(n===t)return!0;n=n.parentNode}return!1},d=function(t){t.style.left="-9999px",t.style.display="block";var e,n=t.clientHeight;return e="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(t).getPropertyValue("padding-top"),10):parseInt(t.currentStyle.padding),t.style.left="",t.style.display="none","-"+parseInt((n+e)/2)+"px"},f=function(t,e){if(+t.style.opacity<1){e=e||16,t.style.opacity=0,t.style.display="block";var n=+new Date,i=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){t.style.opacity=+t.style.opacity+(new Date-n)/100,n=+new Date,+t.style.opacity<1&&setTimeout(i,e)});i()}t.style.display="block"},p=function(t,e){e=e||16,t.style.opacity=1;var n=+new Date,i=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){t.style.opacity=+t.style.opacity-(new Date-n)/100,n=+new Date,+t.style.opacity>0?setTimeout(i,e):t.style.display="none"});i()},m=function(t){if("function"==typeof MouseEvent){var e=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0});t.dispatchEvent(e)}else if(document.createEvent){var n=document.createEvent("MouseEvents");n.initEvent("click",!1,!1),t.dispatchEvent(n)}else document.createEventObject?t.fireEvent("onclick"):"function"==typeof t.onclick&&t.onclick()},g=function(t){"function"==typeof t.stopPropagation?(t.stopPropagation(),t.preventDefault()):window.event&&window.event.hasOwnProperty("cancelBubble")&&(window.event.cancelBubble=!0)};e.hasClass=i,e.addClass=o,e.removeClass=r,e.escapeHtml=s,e._show=a,e.show=l,e._hide=c,e.hide=u,e.isDescendant=h,e.getTopMargin=d,e.fadeIn=f,e.fadeOut=p,e.fireClick=m,e.stopEventPropagation=g},function(t,e,n){"use strict";var i=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(2),s=n(11),a=i(s),l=n(37),c=i(l),u=function(){var t=document.createElement("div");for(t.innerHTML=c.default;t.firstChild;)document.body.appendChild(t.firstChild)},h=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=document.querySelector(".sweet-alert");return t||(u(),t=h()),t}),d=function(){var t=h();if(t)return t.querySelector("input")},f=function(){return document.querySelector(".sweet-overlay")},p=function(t,e){var n=o.hexToRgb(e);t.style.boxShadow="0 0 2px rgba("+n+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"},m=function(t){var e=h();r.fadeIn(f(),10),r.show(e),r.addClass(e,"showSweetAlert"),r.removeClass(e,"hideSweetAlert"),window.previousActiveElement=document.activeElement,e.querySelector("button.confirm").focus(),setTimeout(function(){r.addClass(e,"visible")},500);var n=e.getAttribute("data-timer");if("null"!==n&&""!==n){var i=t;e.timeout=setTimeout(function(){(i||null)&&"true"===e.getAttribute("data-has-done-function")?i(null):sweetAlert.close()},n)}},g=function(){var t=h(),e=d();r.removeClass(t,"show-input"),e.value=a.default.inputValue,e.setAttribute("type",a.default.inputType),e.setAttribute("placeholder",a.default.inputPlaceholder),v()},v=function(t){if(t&&13===t.keyCode)return!1;var e=h(),n=e.querySelector(".sa-input-error");r.removeClass(n,"show");var i=e.querySelector(".sa-error-container");r.removeClass(i,"show")},y=function(){h().style.marginTop=r.getTopMargin(h())};e.sweetAlertInitialize=u,e.getModal=h,e.getOverlay=f,e.getInput=d,e.setFocusStyle=p,e.openModal=m,e.resetInput=g,e.resetInputError=v,e.fixVerticalPosition=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},o=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?parseInt(e[1],16)+", "+parseInt(e[2],16)+", "+parseInt(e[3],16):null},r=function(){return window.attachEvent&&!window.addEventListener},s=function(t){window.console&&window.console.log("SweetAlert: "+t)},a=function(t,e){t=String(t).replace(/[^0-9a-f]/gi,""),t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),e=e||0;var n,i,o="#";for(i=0;i<3;i++)n=parseInt(t.substr(2*i,2),16),n=Math.round(Math.min(Math.max(0,n+n*e),255)).toString(16),o+=("00"+n).substr(n.length);return o};e.extend=i,e.hexToRgb=o,e.isIE8=r,e.logStr=s,e.colorLuminance=a},function(t,e,n){var i,o,r;/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(s){o=[n(0),n(1)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){var e=0,n=Array.prototype.slice;return t.cleanData=function(e){return function(n){var i,o,r;for(r=0;null!=(o=n[r]);r++)try{i=t._data(o,"events"),i&&i.remove&&t(o).triggerHandler("remove")}catch(t){}e(n)}}(t.cleanData),t.widget=function(e,n,i){var o,r,s,a={},l=e.split(".")[0];e=e.split(".")[1];var c=l+"-"+e;return i||(i=n,n=t.Widget),t.isArray(i)&&(i=t.extend.apply(null,[{}].concat(i))),t.expr[":"][c.toLowerCase()]=function(e){return!!t.data(e,c)},t[l]=t[l]||{},o=t[l][e],r=t[l][e]=function(t,e){if(!this._createWidget)return new r(t,e);arguments.length&&this._createWidget(t,e)},t.extend(r,o,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),s=new n,s.options=t.widget.extend({},s.options),t.each(i,function(e,i){if(!t.isFunction(i))return void(a[e]=i);a[e]=function(){function t(){return n.prototype[e].apply(this,arguments)}function o(t){return n.prototype[e].apply(this,t)}return function(){var e,n=this._super,r=this._superApply;return this._super=t,this._superApply=o,e=i.apply(this,arguments),this._super=n,this._superApply=r,e}}()}),r.prototype=t.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||e:e},a,{constructor:r,namespace:l,widgetName:e,widgetFullName:c}),o?(t.each(o._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,r,n._proto)}),delete o._childConstructors):n._childConstructors.push(r),t.widget.bridge(e,r),r},t.widget.extend=function(e){for(var i,o,r=n.call(arguments,1),s=0,a=r.length;s<a;s++)for(i in r[s])o=r[s][i],r[s].hasOwnProperty(i)&&void 0!==o&&(t.isPlainObject(o)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],o):t.widget.extend({},o):e[i]=o);return e},t.widget.bridge=function(e,i){var o=i.prototype.widgetFullName||e;t.fn[e]=function(r){var s="string"==typeof r,a=n.call(arguments,1),l=this;return s?this.length||"instance"!==r?this.each(function(){var n,i=t.data(this,o);return"instance"===r?(l=i,!1):i?t.isFunction(i[r])&&"_"!==r.charAt(0)?(n=i[r].apply(i,a),n!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+r+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+r+"'")}):l=void 0:(a.length&&(r=t.widget.extend.apply(null,[r].concat(a))),this.each(function(){var e=t.data(this,o);e?(e.option(r||{}),e._init&&e._init()):t.data(this,o,new i(r,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(n,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,n){e._removeClass(n,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i,o,r,s=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(s={},i=e.split("."),e=i.shift(),i.length){for(o=s[e]=t.widget.extend({},this.options[e]),r=0;r<i.length-1;r++)o[i[r]]=o[i[r]]||{},o=o[i[r]];if(e=i.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];s[e]=n}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var n,i,o;for(n in e)o=this.classesElementLookup[n],e[n]!==this.options.classes[n]&&o&&o.length&&(i=t(o.get()),this._removeClass(o,n),i.addClass(this._classes({element:i,keys:n,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function n(n,r){var s,a;for(a=0;a<n.length;a++)s=o.classesElementLookup[n[a]]||t(),s=t(e.add?t.unique(s.get().concat(e.element.get())):s.not(e.element).get()),o.classesElementLookup[n[a]]=s,i.push(n[a]),r&&e.classes[n[a]]&&i.push(e.classes[n[a]])}var i=[],o=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&n(e.keys.match(/\S+/g)||[],!0),e.extra&&n(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var n=this;t.each(n.classesElementLookup,function(i,o){-1!==t.inArray(e.target,o)&&(n.classesElementLookup[i]=t(o.not(e.target).get()))})},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,i){i="boolean"==typeof i?i:n;var o="string"==typeof t||null===t,r={extra:o?e:n,keys:o?t:e,element:o?this.element:t,add:i};return r.element.toggleClass(this._classes(r),i),this},_on:function(e,n,i){var o,r=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=o=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),t.each(i,function(i,s){function a(){if(e||!0!==r.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof s?r[s]:s).apply(r,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||t.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.on(c,u,a):n.on(c,a)})},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(n).off(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,n,i){var o,r,s=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(o in r)o in n||(n[o]=r[o]);return this.element.trigger(n,i),!(t.isFunction(s)&&!1===s.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?!0===o||"number"==typeof o?n:o.effect||n:e;o=o||{},"number"==typeof o&&(o={duration:o}),s=!t.isEmptyObject(o),o.complete=r,o.delay&&i.delay(o.delay),s&&t.effects&&t.effects.effect[a]?i[e](o):a!==e&&i[a]?i[a](o.duration,o.easing,r):i.queue(function(n){t(this)[e](),r&&r.call(i[0]),n()})}}),t.widget})},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}function e(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function n(t,n){return e(t).appendChild(n)}function i(t,e,n,i){var o=document.createElement(t);if(n&&(o.className=n),i&&(o.style.cssText=i),"string"==typeof e)o.appendChild(document.createTextNode(e));else if(e)for(var r=0;r<e.length;++r)o.appendChild(e[r]);return o}function o(t,e,n,o){var r=i(t,e,n,o);return r.setAttribute("role","presentation"),r}function r(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function s(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function a(e,n){var i=e.className;t(n).test(i)||(e.className+=(i?" ":"")+n)}function l(e,n){for(var i=e.split(" "),o=0;o<i.length;o++)i[o]&&!t(i[o]).test(n)&&(n+=" "+i[o]);return n}function c(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function u(t,e,n){e||(e={});for(var i in t)!t.hasOwnProperty(i)||!1===n&&e.hasOwnProperty(i)||(e[i]=t[i]);return e}function h(t,e,n,i,o){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var r=i||0,s=o||0;;){var a=t.indexOf("\t",r);if(a<0||a>=e)return s+(e-r);s+=a-r,s+=n-s%n,r=a+1}}function d(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}function f(t,e,n){for(var i=0,o=0;;){var r=t.indexOf("\t",i);-1==r&&(r=t.length);var s=r-i;if(r==t.length||o+s>=e)return i+Math.min(s,e-o);if(o+=r-i,o+=n-o%n,i=r+1,o>=e)return i}}function p(t){for(;Ks.length<=t;)Ks.push(m(Ks)+" ");return Ks[t]}function m(t){return t[t.length-1]}function g(t,e){for(var n=[],i=0;i<t.length;i++)n[i]=e(t[i],i);return n}function v(t,e,n){for(var i=0,o=n(e);i<t.length&&n(t[i])<=o;)i++;t.splice(i,0,e)}function y(){}function b(t,e){var n;return Object.create?n=Object.create(t):(y.prototype=t,n=new y),e&&u(e,n),n}function w(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Xs.test(t))}function x(t,e){return e?!!(e.source.indexOf("\\w")>-1&&w(t))||e.test(t):w(t)}function C(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function _(t){return t.charCodeAt(0)>=768&&Ys.test(t)}function S(t,e,n){for(;(n<0?e>0:e<t.length)&&_(t.charAt(e));)e+=n;return e}function k(t,e,n){for(var i=e>n?-1:1;;){if(e==n)return e;var o=(e+n)/2,r=i<0?Math.ceil(o):Math.floor(o);if(r==e)return t(r)?e:n;t(r)?n=r:e=r+i}}function T(t,e,n){var r=this;this.input=n,r.scrollbarFiller=i("div",null,"CodeMirror-scrollbar-filler"),r.scrollbarFiller.setAttribute("cm-not-content","true"),r.gutterFiller=i("div",null,"CodeMirror-gutter-filler"),r.gutterFiller.setAttribute("cm-not-content","true"),r.lineDiv=o("div",null,"CodeMirror-code"),r.selectionDiv=i("div",null,null,"position: relative; z-index: 1"),r.cursorDiv=i("div",null,"CodeMirror-cursors"),r.measure=i("div",null,"CodeMirror-measure"),r.lineMeasure=i("div",null,"CodeMirror-measure"),r.lineSpace=o("div",[r.measure,r.lineMeasure,r.selectionDiv,r.cursorDiv,r.lineDiv],null,"position: relative; outline: none");var s=o("div",[r.lineSpace],"CodeMirror-lines");r.mover=i("div",[s],null,"position: relative"),r.sizer=i("div",[r.mover],"CodeMirror-sizer"),r.sizerWidth=null,r.heightForcer=i("div",null,null,"position: absolute; height: "+zs+"px; width: 1px;"),r.gutters=i("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=i("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=i("div",[r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),ys&&bs<8&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),ws||ps&&As||(r.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(r.wrapper):t(r.wrapper)),r.viewFrom=r.viewTo=e.first,r.reportedViewFrom=r.reportedViewTo=e.first,r.view=[],r.renderedView=null,r.externalMeasured=null,r.viewOffset=0,r.lastWrapHeight=r.lastWrapWidth=0,r.updateLineNumbers=null,r.nativeBarWidth=r.barHeight=r.barWidth=0,r.scrollbarsClipped=!1,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.alignWidgets=!1,r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r.shift=!1,r.selForContextMenu=null,r.activeTouch=null,n.init(r)}function E(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var i=0;;++i){var o=n.children[i],r=o.chunkSize();if(e<r){n=o;break}e-=r}return n.lines[e]}function L(t,e,n){var i=[],o=e.line;return t.iter(e.line,n.line+1,function(t){var r=t.text;o==n.line&&(r=r.slice(0,n.ch)),o==e.line&&(r=r.slice(e.ch)),i.push(r),++o}),i}function A(t,e,n){var i=[];return t.iter(e,n,function(t){i.push(t.text)}),i}function P(t,e){var n=e-t.height;if(n)for(var i=t;i;i=i.parent)i.height+=n}function M(t){if(null==t.parent)return null;for(var e=t.parent,n=d(e.lines,t),i=e.parent;i;e=i,i=i.parent)for(var o=0;i.children[o]!=e;++o)n+=i.children[o].chunkSize();return n+e.first}function N(t,e){var n=t.first;t:do{for(var i=0;i<t.children.length;++i){var o=t.children[i],r=o.height;if(e<r){t=o;continue t}e-=r,n+=o.chunkSize()}return n}while(!t.lines);for(var s=0;s<t.lines.length;++s){var a=t.lines[s],l=a.height;if(e<l)break;e-=l}return n+s}function D(t,e){return e>=t.first&&e<t.first+t.size}function O(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function I(t,e,n){if(void 0===n&&(n=null),!(this instanceof I))return new I(t,e,n);this.line=t,this.ch=e,this.sticky=n}function H(t,e){return t.line-e.line||t.ch-e.ch}function F(t,e){return t.sticky==e.sticky&&0==H(t,e)}function R(t){return I(t.line,t.ch)}function B(t,e){return H(t,e)<0?e:t}function W(t,e){return H(t,e)<0?t:e}function $(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function z(t,e){if(e.line<t.first)return I(t.first,0);var n=t.first+t.size-1;return e.line>n?I(n,E(t,n).text.length):j(e,E(t,e.line).text.length)}function j(t,e){var n=t.ch;return null==n||n>e?I(t.line,e):n<0?I(t.line,0):t}function q(t,e){for(var n=[],i=0;i<e.length;i++)n[i]=z(t,e[i]);return n}function U(){Gs=!0}function V(){Zs=!0}function K(t,e,n){this.marker=t,this.from=e,this.to=n}function X(t,e){if(t)for(var n=0;n<t.length;++n){var i=t[n];if(i.marker==e)return i}}function Y(t,e){for(var n,i=0;i<t.length;++i)t[i]!=e&&(n||(n=[])).push(t[i]);return n}function G(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}function Z(t,e,n){var i;if(t)for(var o=0;o<t.length;++o){var r=t[o],s=r.marker,a=null==r.from||(s.inclusiveLeft?r.from<=e:r.from<e);if(a||r.from==e&&"bookmark"==s.type&&(!n||!r.marker.insertLeft)){var l=null==r.to||(s.inclusiveRight?r.to>=e:r.to>e);(i||(i=[])).push(new K(s,r.from,l?null:r.to))}}return i}function Q(t,e,n){var i;if(t)for(var o=0;o<t.length;++o){var r=t[o],s=r.marker,a=null==r.to||(s.inclusiveRight?r.to>=e:r.to>e);if(a||r.from==e&&"bookmark"==s.type&&(!n||r.marker.insertLeft)){var l=null==r.from||(s.inclusiveLeft?r.from<=e:r.from<e);(i||(i=[])).push(new K(s,l?null:r.from-e,null==r.to?null:r.to-e))}}return i}function J(t,e){if(e.full)return null;var n=D(t,e.from.line)&&E(t,e.from.line).markedSpans,i=D(t,e.to.line)&&E(t,e.to.line).markedSpans;if(!n&&!i)return null;var o=e.from.ch,r=e.to.ch,s=0==H(e.from,e.to),a=Z(n,o,s),l=Q(i,r,s),c=1==e.text.length,u=m(e.text).length+(c?o:0);if(a)for(var h=0;h<a.length;++h){var d=a[h];if(null==d.to){var f=X(l,d.marker);f?c&&(d.to=null==f.to?null:f.to+u):d.to=o}}if(l)for(var p=0;p<l.length;++p){var g=l[p];if(null!=g.to&&(g.to+=u),null==g.from){var v=X(a,g.marker);v||(g.from=u,c&&(a||(a=[])).push(g))}else g.from+=u,c&&(a||(a=[])).push(g)}a&&(a=tt(a)),l&&l!=a&&(l=tt(l));var y=[a];if(!c){var b,w=e.text.length-2;if(w>0&&a)for(var x=0;x<a.length;++x)null==a[x].to&&(b||(b=[])).push(new K(a[x].marker,null,null));for(var C=0;C<w;++C)y.push(b);y.push(l)}return y}function tt(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function et(t,e,n){var i=null;if(t.iter(e.line,n.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||i&&-1!=d(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(var o=[{from:e,to:n}],r=0;r<i.length;++r)for(var s=i[r],a=s.find(0),l=0;l<o.length;++l){var c=o[l];if(!(H(c.to,a.from)<0||H(c.from,a.to)>0)){var u=[l,1],h=H(c.from,a.from),f=H(c.to,a.to);(h<0||!s.inclusiveLeft&&!h)&&u.push({from:c.from,to:a.from}),(f>0||!s.inclusiveRight&&!f)&&u.push({from:a.to,to:c.to}),o.splice.apply(o,u),l+=u.length-3}}return o}function nt(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function it(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function ot(t){return t.inclusiveLeft?-1:0}function rt(t){return t.inclusiveRight?1:0}function st(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var i=t.find(),o=e.find(),r=H(i.from,o.from)||ot(t)-ot(e);if(r)return-r;var s=H(i.to,o.to)||rt(t)-rt(e);return s||e.id-t.id}function at(t,e){var n,i=Zs&&t.markedSpans;if(i)for(var o=void 0,r=0;r<i.length;++r)o=i[r],o.marker.collapsed&&null==(e?o.from:o.to)&&(!n||st(n,o.marker)<0)&&(n=o.marker);return n}function lt(t){return at(t,!0)}function ct(t){return at(t,!1)}function ut(t,e,n,i,o){var r=E(t,e),s=Zs&&r.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var c=l.marker.find(0),u=H(c.from,n)||ot(l.marker)-ot(o),h=H(c.to,i)||rt(l.marker)-rt(o);if(!(u>=0&&h<=0||u<=0&&h>=0)&&(u<=0&&(l.marker.inclusiveRight&&o.inclusiveLeft?H(c.to,n)>=0:H(c.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&o.inclusiveLeft?H(c.from,i)<=0:H(c.from,i)<0)))return!0}}}function ht(t){for(var e;e=lt(t);)t=e.find(-1,!0).line;return t}function dt(t){for(var e;e=ct(t);)t=e.find(1,!0).line;return t}function ft(t){for(var e,n;e=ct(t);)t=e.find(1,!0).line,(n||(n=[])).push(t);return n}function pt(t,e){var n=E(t,e),i=ht(n);return n==i?e:M(i)}function mt(t,e){if(e>t.lastLine())return e;var n,i=E(t,e);if(!gt(t,i))return e;for(;n=ct(i);)i=n.find(1,!0).line;return M(i)+1}function gt(t,e){var n=Zs&&e.markedSpans;if(n)for(var i=void 0,o=0;o<n.length;++o)if(i=n[o],i.marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&vt(t,e,i))return!0}}function vt(t,e,n){if(null==n.to){var i=n.marker.find(1,!0);return vt(t,i.line,X(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var o=void 0,r=0;r<e.markedSpans.length;++r)if(o=e.markedSpans[r],o.marker.collapsed&&!o.marker.widgetNode&&o.from==n.to&&(null==o.to||o.to!=n.from)&&(o.marker.inclusiveLeft||n.marker.inclusiveRight)&&vt(t,e,o))return!0}function yt(t){t=ht(t);for(var e=0,n=t.parent,i=0;i<n.lines.length;++i){var o=n.lines[i];if(o==t)break;e+=o.height}for(var r=n.parent;r;n=r,r=n.parent)for(var s=0;s<r.children.length;++s){var a=r.children[s];if(a==n)break;e+=a.height}return e}function bt(t){if(0==t.height)return 0;for(var e,n=t.text.length,i=t;e=lt(i);){var o=e.find(0,!0);i=o.from.line,n+=o.from.ch-o.to.ch}for(i=t;e=ct(i);){var r=e.find(0,!0);n-=i.text.length-r.from.ch,i=r.to.line,n+=i.text.length-r.to.ch}return n}function wt(t){var e=t.display,n=t.doc;e.maxLine=E(n,n.first),e.maxLineLength=bt(e.maxLine),e.maxLineChanged=!0,n.iter(function(t){var n=bt(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)})}function xt(t,e,n,i){if(!t)return i(e,n,"ltr",0);for(var o=!1,r=0;r<t.length;++r){var s=t[r];(s.from<n&&s.to>e||e==n&&s.to==e)&&(i(Math.max(s.from,e),Math.min(s.to,n),1==s.level?"rtl":"ltr",r),o=!0)}o||i(e,n,"ltr")}function Ct(t,e,n){var i;Qs=null;for(var o=0;o<t.length;++o){var r=t[o];if(r.from<e&&r.to>e)return o;r.to==e&&(r.from!=r.to&&"before"==n?i=o:Qs=o),r.from==e&&(r.from!=r.to&&"before"!=n?i=o:Qs=o)}return null!=i?i:Qs}function _t(t,e){var n=t.order;return null==n&&(n=t.order=Js(t.text,e)),n}function St(t,e){return t._handlers&&t._handlers[e]||ta}function kt(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var i=t._handlers,o=i&&i[e];if(o){var r=d(o,n);r>-1&&(i[e]=o.slice(0,r).concat(o.slice(r+1)))}}}function Tt(t,e){var n=St(t,e);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),o=0;o<n.length;++o)n[o].apply(null,i)}function Et(t,e,n){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),Tt(t,n||e.type,t,e),Dt(e)||e.codemirrorIgnore}function Lt(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),i=0;i<e.length;++i)-1==d(n,e[i])&&n.push(e[i])}function At(t,e){return St(t,e).length>0}function Pt(t){t.prototype.on=function(t,e){ea(this,t,e)},t.prototype.off=function(t,e){kt(this,t,e)}}function Mt(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Nt(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function Dt(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function Ot(t){Mt(t),Nt(t)}function It(t){return t.target||t.srcElement}function Ht(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),Ps&&t.ctrlKey&&1==e&&(e=3),e}function Ft(t){if(null==Ws){var e=i("span","​");n(t,i("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Ws=e.offsetWidth<=1&&e.offsetHeight>2&&!(ys&&bs<8))}var o=Ws?i("span","​"):i("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return o.setAttribute("cm-text",""),o}function Rt(t){if(null!=$s)return $s;var i=n(t,document.createTextNode("AخA")),o=Os(i,0,1).getBoundingClientRect(),r=Os(i,1,2).getBoundingClientRect();return e(t),!(!o||o.left==o.right)&&($s=r.right-o.right<3)}function Bt(t){if(null!=sa)return sa;var e=n(t,i("span","x")),o=e.getBoundingClientRect(),r=Os(e,0,1).getBoundingClientRect();return sa=Math.abs(o.left-r.left)>1}function Wt(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),aa[t]=e}function $t(t,e){la[t]=e}function zt(t){if("string"==typeof t&&la.hasOwnProperty(t))t=la[t];else if(t&&"string"==typeof t.name&&la.hasOwnProperty(t.name)){var e=la[t.name];"string"==typeof e&&(e={name:e}),t=b(e,t),t.name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return zt("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return zt("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function jt(t,e){e=zt(e);var n=aa[e.name];if(!n)return jt(t,"text/plain");var i=n(t,e);if(ca.hasOwnProperty(e.name)){var o=ca[e.name];for(var r in o)o.hasOwnProperty(r)&&(i.hasOwnProperty(r)&&(i["_"+r]=i[r]),i[r]=o[r])}if(i.name=e.name,e.helperType&&(i.helperType=e.helperType),e.modeProps)for(var s in e.modeProps)i[s]=e.modeProps[s];return i}function qt(t,e){u(e,ca.hasOwnProperty(t)?ca[t]:ca[t]={})}function Ut(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var o=e[i];o instanceof Array&&(o=o.concat([])),n[i]=o}return n}function Vt(t,e){for(var n;t.innerMode&&(n=t.innerMode(e))&&n.mode!=t;)e=n.state,t=n.mode;return n||{mode:t,state:e}}function Kt(t,e,n){return!t.startState||t.startState(e,n)}function Xt(t,e,n,i){var o=[t.state.modeGen],r={};ne(t,e.text,t.doc.mode,n,function(t,e){return o.push(t,e)},r,i);for(var s=n.state,a=0;a<t.state.overlays.length;++a)!function(i){n.baseTokens=o;var a=t.state.overlays[i],l=1,c=0;n.state=!0,ne(t,e.text,a.mode,n,function(t,e){for(var n=l;c<t;){var i=o[l];i>t&&o.splice(l,1,t,o[l+1],i),l+=2,c=Math.min(t,i)}if(e)if(a.opaque)o.splice(n,l-n,t,"overlay "+e),l=n+2;else for(;n<l;n+=2){var r=o[n+1];o[n+1]=(r?r+" ":"")+"overlay "+e}},r),n.state=s,n.baseTokens=null,n.baseTokenPos=1}(a);return{styles:o,classes:r.bgClass||r.textClass?r:null}}function Yt(t,e,n){if(!e.styles||e.styles[0]!=t.state.modeGen){var i=Gt(t,M(e)),o=e.text.length>t.options.maxHighlightLength&&Ut(t.doc.mode,i.state),r=Xt(t,e,i);o&&(i.state=o),e.stateAfter=i.save(!o),e.styles=r.styles,r.classes?e.styleClasses=r.classes:e.styleClasses&&(e.styleClasses=null),n===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function Gt(t,e,n){var i=t.doc,o=t.display;if(!i.mode.startState)return new da(i,!0,e);var r=ie(t,e,n),s=r>i.first&&E(i,r-1).stateAfter,a=s?da.fromSaved(i,s,r):new da(i,Kt(i.mode),r);return i.iter(r,e,function(n){Zt(t,n.text,a);var i=a.line;n.stateAfter=i==e-1||i%5==0||i>=o.viewFrom&&i<o.viewTo?a.save():null,a.nextLine()}),n&&(i.modeFrontier=a.line),a}function Zt(t,e,n,i){var o=t.doc.mode,r=new ua(e,t.options.tabSize,n);for(r.start=r.pos=i||0,""==e&&Qt(o,n.state);!r.eol();)Jt(o,r,n.state),r.start=r.pos}function Qt(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var n=Vt(t,e);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function Jt(t,e,n,i){for(var o=0;o<10;o++){i&&(i[0]=Vt(t,n).mode);var r=t.token(e,n);if(e.pos>e.start)return r}throw new Error("Mode "+t.name+" failed to advance stream.")}function te(t,e,n,i){var o,r=t.doc,s=r.mode;e=z(r,e);var a,l=E(r,e.line),c=Gt(t,e.line,n),u=new ua(l.text,t.options.tabSize,c);for(i&&(a=[]);(i||u.pos<e.ch)&&!u.eol();)u.start=u.pos,o=Jt(s,u,c.state),i&&a.push(new fa(u,o,Ut(r.mode,c.state)));return i?a:new fa(u,o,c.state)}function ee(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==e[i]?e[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(e[i])||(e[i]+=" "+n[2])}return t}function ne(t,e,n,i,o,r,s){var a=n.flattenSpans;null==a&&(a=t.options.flattenSpans);var l,c=0,u=null,h=new ua(e,t.options.tabSize,i),d=t.options.addModeClass&&[null];for(""==e&&ee(Qt(n,i.state),r);!h.eol();){if(h.pos>t.options.maxHighlightLength?(a=!1,s&&Zt(t,e,i,h.pos),h.pos=e.length,l=null):l=ee(Jt(n,h,i.state,d),r),d){var f=d[0].name;f&&(l="m-"+(l?f+" "+l:f))}if(!a||u!=l){for(;c<h.start;)c=Math.min(h.start,c+5e3),o(c,u);u=l}h.start=h.pos}for(;c<h.pos;){var p=Math.min(h.pos,c+5e3);o(p,u),c=p}}function ie(t,e,n){for(var i,o,r=t.doc,s=n?-1:e-(t.doc.mode.innerMode?1e3:100),a=e;a>s;--a){if(a<=r.first)return r.first;var l=E(r,a-1),c=l.stateAfter;if(c&&(!n||a+(c instanceof ha?c.lookAhead:0)<=r.modeFrontier))return a;var u=h(l.text,null,t.options.tabSize);(null==o||i>u)&&(o=a-1,i=u)}return o}function oe(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var n=t.first,i=e-1;i>n;i--){var o=E(t,i).stateAfter;if(o&&(!(o instanceof ha)||i+o.lookAhead<e)){n=i+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,n)}}function re(t,e,n,i){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),nt(t),it(t,n);var o=i?i(t):1;o!=t.height&&P(t,o)}function se(t){t.parent=null,nt(t)}function ae(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?va:ga;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function le(t,e){var n=o("span",null,null,ws?"padding-right: .1px":null),i={pre:o("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:(ys||ws)&&t.getOption("lineWrapping")};e.measure={};for(var r=0;r<=(e.rest?e.rest.length:0);r++){var s=r?e.rest[r-1]:e.line,a=void 0;i.pos=0,i.addToken=ue,Rt(t.display.measure)&&(a=_t(s,t.doc.direction))&&(i.addToken=de(i.addToken,a)),i.map=[];pe(s,i,Yt(t,s,e!=t.display.externalMeasured&&M(s))),s.styleClasses&&(s.styleClasses.bgClass&&(i.bgClass=l(s.styleClasses.bgClass,i.bgClass||"")),s.styleClasses.textClass&&(i.textClass=l(s.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(Ft(t.display.measure))),0==r?(e.measure.map=i.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(i.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(ws){var c=i.content.lastChild;(/\bcm-tab\b/.test(c.className)||c.querySelector&&c.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return Tt(t,"renderLine",t,e.line,i.pre),i.pre.className&&(i.textClass=l(i.pre.className,i.textClass||"")),i}function ce(t){var e=i("span","•","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function ue(t,e,n,o,r,s,a){if(e){var l,c=t.splitSpaces?he(e,t.trailingSpace):e,u=t.cm.state.specialChars,h=!1;if(u.test(e)){l=document.createDocumentFragment();for(var d=0;;){u.lastIndex=d;var f=u.exec(e),m=f?f.index-d:e.length-d;if(m){var g=document.createTextNode(c.slice(d,d+m));ys&&bs<9?l.appendChild(i("span",[g])):l.appendChild(g),t.map.push(t.pos,t.pos+m,g),t.col+=m,t.pos+=m}if(!f)break;d+=m+1;var v=void 0;if("\t"==f[0]){var y=t.cm.options.tabSize,b=y-t.col%y;v=l.appendChild(i("span",p(b),"cm-tab")),v.setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),t.col+=b}else"\r"==f[0]||"\n"==f[0]?(v=l.appendChild(i("span","\r"==f[0]?"␍":"␤","cm-invalidchar")),v.setAttribute("cm-text",f[0]),t.col+=1):(v=t.cm.options.specialCharPlaceholder(f[0]),v.setAttribute("cm-text",f[0]),ys&&bs<9?l.appendChild(i("span",[v])):l.appendChild(v),t.col+=1);t.map.push(t.pos,t.pos+1,v),t.pos++}}else t.col+=e.length,l=document.createTextNode(c),t.map.push(t.pos,t.pos+e.length,l),ys&&bs<9&&(h=!0),t.pos+=e.length;if(t.trailingSpace=32==c.charCodeAt(e.length-1),n||o||r||h||a){var w=n||"";o&&(w+=o),r&&(w+=r);var x=i("span",[l],w,a);return s&&(x.title=s),t.content.appendChild(x)}t.content.appendChild(l)}}function he(t,e){if(t.length>1&&!/  /.test(t))return t;for(var n=e,i="",o=0;o<t.length;o++){var r=t.charAt(o);" "!=r||!n||o!=t.length-1&&32!=t.charCodeAt(o+1)||(r=" "),i+=r,n=" "==r}return i}function de(t,e){return function(n,i,o,r,s,a,l){o=o?o+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+i.length;;){for(var h=void 0,d=0;d<e.length&&(h=e[d],!(h.to>c&&h.from<=c));d++);if(h.to>=u)return t(n,i,o,r,s,a,l);t(n,i.slice(0,h.to-c),o,r,null,a,l),r=null,i=i.slice(h.to-c),c=h.to}}}function fe(t,e,n,i){var o=!i&&n.widgetNode;o&&t.map.push(t.pos,t.pos+e,o),!i&&t.cm.display.input.needsContentAttribute&&(o||(o=t.content.appendChild(document.createElement("span"))),o.setAttribute("cm-marker",n.id)),o&&(t.cm.display.input.setUneditable(o),t.content.appendChild(o)),t.pos+=e,t.trailingSpace=!1}function pe(t,e,n){var i=t.markedSpans,o=t.text,r=0;if(i)for(var s,a,l,c,u,h,d,f=o.length,p=0,m=1,g="",v=0;;){if(v==p){l=c=u=h=a="",d=null,v=1/0;for(var y=[],b=void 0,w=0;w<i.length;++w){var x=i[w],C=x.marker;"bookmark"==C.type&&x.from==p&&C.widgetNode?y.push(C):x.from<=p&&(null==x.to||x.to>p||C.collapsed&&x.to==p&&x.from==p)?(null!=x.to&&x.to!=p&&v>x.to&&(v=x.to,c=""),C.className&&(l+=" "+C.className),C.css&&(a=(a?a+";":"")+C.css),C.startStyle&&x.from==p&&(u+=" "+C.startStyle),C.endStyle&&x.to==v&&(b||(b=[])).push(C.endStyle,x.to),C.title&&!h&&(h=C.title),C.collapsed&&(!d||st(d.marker,C)<0)&&(d=x)):x.from>p&&v>x.from&&(v=x.from)}if(b)for(var _=0;_<b.length;_+=2)b[_+1]==v&&(c+=" "+b[_]);if(!d||d.from==p)for(var S=0;S<y.length;++S)fe(e,0,y[S]);if(d&&(d.from||0)==p){if(fe(e,(null==d.to?f+1:d.to)-p,d.marker,null==d.from),null==d.to)return;d.to==p&&(d=!1)}}if(p>=f)break;for(var k=Math.min(f,v);;){if(g){var T=p+g.length;if(!d){var E=T>k?g.slice(0,k-p):g;e.addToken(e,E,s?s+l:l,u,p+E.length==v?c:"",h,a)}if(T>=k){g=g.slice(k-p),p=k;break}p=T,u=""}g=o.slice(r,r=n[m++]),s=ae(n[m++],e.cm.options)}}else for(var L=1;L<n.length;L+=2)e.addToken(e,o.slice(r,r=n[L]),ae(n[L+1],e.cm.options))}function me(t,e,n){this.line=e,this.rest=ft(e),this.size=this.rest?M(m(this.rest))-n+1:1,this.node=this.text=null,this.hidden=gt(t,e)}function ge(t,e,n){for(var i,o=[],r=e;r<n;r=i){var s=new me(t.doc,E(t.doc,r),r);i=r+s.size,o.push(s)}return o}function ve(t){ya?ya.ops.push(t):t.ownsGroup=ya={ops:[t],delayedCallbacks:[]}}function ye(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n].call(null);for(var i=0;i<t.ops.length;i++){var o=t.ops[i];if(o.cursorActivityHandlers)for(;o.cursorActivityCalled<o.cursorActivityHandlers.length;)o.cursorActivityHandlers[o.cursorActivityCalled++].call(null,o.cm)}}while(n<e.length)}function be(t,e){var n=t.ownsGroup;if(n)try{ye(n)}finally{ya=null,e(n)}}function we(t,e){var n=St(t,e);if(n.length){var i,o=Array.prototype.slice.call(arguments,2);ya?i=ya.delayedCallbacks:ba?i=ba:(i=ba=[],setTimeout(xe,0));for(var r=0;r<n.length;++r)!function(t){i.push(function(){return n[t].apply(null,o)})}(r)}}function xe(){var t=ba;ba=null;for(var e=0;e<t.length;++e)t[e]()}function Ce(t,e,n,i){for(var o=0;o<e.changes.length;o++){var r=e.changes[o];"text"==r?Te(t,e):"gutter"==r?Le(t,e,n,i):"class"==r?Ee(t,e):"widget"==r&&Ae(t,e,i)}e.changes=null}function _e(t){return t.node==t.text&&(t.node=i("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),ys&&bs<8&&(t.node.style.zIndex=2)),t.node}function Se(t,e){var n=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),e.background)n?e.background.className=n:(e.background.parentNode.removeChild(e.background),e.background=null);else if(n){var o=_e(e);e.background=o.insertBefore(i("div",null,n),o.firstChild),t.display.input.setUneditable(e.background)}}function ke(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):le(t,e)}function Te(t,e){var n=e.text.className,i=ke(t,e);e.text==e.node&&(e.node=i.pre),e.text.parentNode.replaceChild(i.pre,e.text),e.text=i.pre,i.bgClass!=e.bgClass||i.textClass!=e.textClass?(e.bgClass=i.bgClass,e.textClass=i.textClass,Ee(t,e)):n&&(e.text.className=n)}function Ee(t,e){Se(t,e),e.line.wrapClass?_e(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var n=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=n||""}function Le(t,e,n,o){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var r=_e(e);e.gutterBackground=i("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px; width: "+o.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),r.insertBefore(e.gutterBackground,e.text)}var s=e.line.gutterMarkers;if(t.options.lineNumbers||s){var a=_e(e),l=e.gutter=i("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px");if(t.display.input.setUneditable(l),a.insertBefore(l,e.text),e.line.gutterClass&&(l.className+=" "+e.line.gutterClass),!t.options.lineNumbers||s&&s["CodeMirror-linenumbers"]||(e.lineNumber=l.appendChild(i("div",O(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+o.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),s)for(var c=0;c<t.options.gutters.length;++c){var u=t.options.gutters[c],h=s.hasOwnProperty(u)&&s[u];h&&l.appendChild(i("div",[h],"CodeMirror-gutter-elt","left: "+o.gutterLeft[u]+"px; width: "+o.gutterWidth[u]+"px"))}}}function Ae(t,e,n){e.alignable&&(e.alignable=null);for(var i=e.node.firstChild,o=void 0;i;i=o)o=i.nextSibling,"CodeMirror-linewidget"==i.className&&e.node.removeChild(i);Me(t,e,n)}function Pe(t,e,n,i){var o=ke(t,e);return e.text=e.node=o.pre,o.bgClass&&(e.bgClass=o.bgClass),o.textClass&&(e.textClass=o.textClass),Ee(t,e),Le(t,e,n,i),Me(t,e,i),e.node}function Me(t,e,n){if(Ne(t,e.line,e,n,!0),e.rest)for(var i=0;i<e.rest.length;i++)Ne(t,e.rest[i],e,n,!1)}function Ne(t,e,n,o,r){if(e.widgets)for(var s=_e(n),a=0,l=e.widgets;a<l.length;++a){var c=l[a],u=i("div",[c.node],"CodeMirror-linewidget");c.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),De(c,u,n,o),t.display.input.setUneditable(u),r&&c.above?s.insertBefore(u,n.gutter||n.text):s.appendChild(u),we(c,"redraw")}}function De(t,e,n,i){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var o=i.wrapperWidth;e.style.left=i.fixedPos+"px",t.coverGutter||(o-=i.gutterTotalWidth,e.style.paddingLeft=i.gutterTotalWidth+"px"),e.style.width=o+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-i.gutterTotalWidth+"px"))}function Oe(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!r(document.body,t.node)){var o="position: relative;";t.coverGutter&&(o+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(o+="width: "+e.display.wrapper.clientWidth+"px;"),n(e.display.measure,i("div",[t.node],null,o))}return t.height=t.node.parentNode.offsetHeight}function Ie(t,e){for(var n=It(e);n!=t.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==t.sizer&&n!=t.mover)return!0}function He(t){return t.lineSpace.offsetTop}function Fe(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Re(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=n(t.measure,i("pre","x")),o=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,r={left:parseInt(o.paddingLeft),right:parseInt(o.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(t.cachedPaddingH=r),r}function Be(t){return zs-t.display.nativeBarWidth}function We(t){return t.display.scroller.clientWidth-Be(t)-t.display.barWidth}function $e(t){return t.display.scroller.clientHeight-Be(t)-t.display.barHeight}function ze(t,e,n){var i=t.options.lineWrapping,o=i&&We(t);if(!e.measure.heights||i&&e.measure.width!=o){var r=e.measure.heights=[];if(i){e.measure.width=o;for(var s=e.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],c=s[a+1];Math.abs(l.bottom-c.bottom)>2&&r.push((l.bottom+c.top)/2-n.top)}}r.push(n.bottom-n.top)}}function je(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var i=0;i<t.rest.length;i++)if(t.rest[i]==e)return{map:t.measure.maps[i],cache:t.measure.caches[i]};for(var o=0;o<t.rest.length;o++)if(M(t.rest[o])>n)return{map:t.measure.maps[o],cache:t.measure.caches[o],before:!0}}function qe(t,e){e=ht(e);var i=M(e),o=t.display.externalMeasured=new me(t.doc,e,i);o.lineN=i;var r=o.built=le(t,o);return o.text=r.pre,n(t.display.lineMeasure,r.pre),o}function Ue(t,e,n,i){return Xe(t,Ke(t,e),n,i)}function Ve(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[Tn(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function Ke(t,e){var n=M(e),i=Ve(t,n);i&&!i.text?i=null:i&&i.changes&&(Ce(t,i,n,xn(t)),t.curOp.forceUpdate=!0),i||(i=qe(t,e));var o=je(i,e,n);return{line:e,view:i,rect:null,map:o.map,cache:o.cache,before:o.before,hasHeights:!1}}function Xe(t,e,n,i,o){e.before&&(n=-1);var r,s=n+(i||"");return e.cache.hasOwnProperty(s)?r=e.cache[s]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(ze(t,e.view,e.rect),e.hasHeights=!0),r=Ze(t,e,n,i),r.bogus||(e.cache[s]=r)),{left:r.left,right:r.right,top:o?r.rtop:r.top,bottom:o?r.rbottom:r.bottom}}function Ye(t,e,n){for(var i,o,r,s,a,l,c=0;c<t.length;c+=3)if(a=t[c],l=t[c+1],e<a?(o=0,r=1,s="left"):e<l?(o=e-a,r=o+1):(c==t.length-3||e==l&&t[c+3]>e)&&(r=l-a,o=r-1,e>=l&&(s="right")),null!=o){if(i=t[c+2],a==l&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==o)for(;c&&t[c-2]==t[c-3]&&t[c-1].insertLeft;)i=t[2+(c-=3)],s="left";if("right"==n&&o==l-a)for(;c<t.length-3&&t[c+3]==t[c+4]&&!t[c+5].insertLeft;)i=t[(c+=3)+2],s="right";break}return{node:i,start:o,end:r,collapse:s,coverStart:a,coverEnd:l}}function Ge(t,e){var n=wa;if("left"==e)for(var i=0;i<t.length&&(n=t[i]).left==n.right;i++);else for(var o=t.length-1;o>=0&&(n=t[o]).left==n.right;o--);return n}function Ze(t,e,n,i){var o,r=Ye(e.map,n,i),s=r.node,a=r.start,l=r.end,c=r.collapse;if(3==s.nodeType){for(var u=0;u<4;u++){for(;a&&_(e.line.text.charAt(r.coverStart+a));)--a;for(;r.coverStart+l<r.coverEnd&&_(e.line.text.charAt(r.coverStart+l));)++l;if(o=ys&&bs<9&&0==a&&l==r.coverEnd-r.coverStart?s.parentNode.getBoundingClientRect():Ge(Os(s,a,l).getClientRects(),i),o.left||o.right||0==a)break;l=a,a-=1,c="right"}ys&&bs<11&&(o=Qe(t.display.measure,o))}else{a>0&&(c=i="right");var h;o=t.options.lineWrapping&&(h=s.getClientRects()).length>1?h["right"==i?h.length-1:0]:s.getBoundingClientRect()}if(ys&&bs<9&&!a&&(!o||!o.left&&!o.right)){var d=s.parentNode.getClientRects()[0];o=d?{left:d.left,right:d.left+wn(t.display),top:d.top,bottom:d.bottom}:wa}for(var f=o.top-e.rect.top,p=o.bottom-e.rect.top,m=(f+p)/2,g=e.view.measure.heights,v=0;v<g.length-1&&!(m<g[v]);v++);var y=v?g[v-1]:0,b=g[v],w={left:("right"==c?o.right:o.left)-e.rect.left,right:("left"==c?o.left:o.right)-e.rect.left,top:y,bottom:b};return o.left||o.right||(w.bogus=!0),t.options.singleCursorHeightPerLine||(w.rtop=f,w.rbottom=p),w}function Qe(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Bt(t))return e;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*n,right:e.right*n,top:e.top*i,bottom:e.bottom*i}}function Je(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function tn(t){t.display.externalMeasure=null,e(t.display.lineMeasure);for(var n=0;n<t.display.view.length;n++)Je(t.display.view[n])}function en(t){tn(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function nn(){return Cs&&Ls?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function on(){return Cs&&Ls?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function rn(t){var e=0;if(t.widgets)for(var n=0;n<t.widgets.length;++n)t.widgets[n].above&&(e+=Oe(t.widgets[n]));return e}function sn(t,e,n,i,o){if(!o){var r=rn(e);n.top+=r,n.bottom+=r}if("line"==i)return n;i||(i="local");var s=yt(e);if("local"==i?s+=He(t.display):s-=t.display.viewOffset,"page"==i||"window"==i){var a=t.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==i?0:on());var l=a.left+("window"==i?0:nn());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function an(t,e,n){if("div"==n)return e;var i=e.left,o=e.top;if("page"==n)i-=nn(),o-=on();else if("local"==n||!n){var r=t.display.sizer.getBoundingClientRect();i+=r.left,o+=r.top}var s=t.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:o-s.top}}function ln(t,e,n,i,o){return i||(i=E(t.doc,e.line)),sn(t,i,Ue(t,i,e.ch,o),n)}function cn(t,e,n,i,o,r){function s(e,s){var a=Xe(t,o,e,s?"right":"left",r);return s?a.left=a.right:a.right=a.left,sn(t,i,a,n)}function a(t,e,n){var i=l[e],o=1==i.level;return s(n?t-1:t,o!=n)}i=i||E(t.doc,e.line),o||(o=Ke(t,i));var l=_t(i,t.doc.direction),c=e.ch,u=e.sticky;if(c>=i.text.length?(c=i.text.length,u="before"):c<=0&&(c=0,u="after"),!l)return s("before"==u?c-1:c,"before"==u);var h=Ct(l,c,u),d=Qs,f=a(c,h,"before"==u);return null!=d&&(f.other=a(c,d,"before"!=u)),f}function un(t,e){var n=0;e=z(t.doc,e),t.options.lineWrapping||(n=wn(t.display)*e.ch);var i=E(t.doc,e.line),o=yt(i)+He(t.display);return{left:n,right:n,top:o,bottom:o+i.height}}function hn(t,e,n,i,o){var r=I(t,e,n);return r.xRel=o,i&&(r.outside=!0),r}function dn(t,e,n){var i=t.doc;if((n+=t.display.viewOffset)<0)return hn(i.first,0,null,!0,-1);var o=N(i,n),r=i.first+i.size-1;if(o>r)return hn(i.first+i.size-1,E(i,r).text.length,null,!0,1);e<0&&(e=0);for(var s=E(i,o);;){var a=gn(t,s,o,e,n),l=ct(s),c=l&&l.find(0,!0);if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;o=M(s=c.to.line)}}function fn(t,e,n,i){i-=rn(e);var o=e.text.length,r=k(function(e){return Xe(t,n,e-1).bottom<=i},o,0);return o=k(function(e){return Xe(t,n,e).top>i},r,o),{begin:r,end:o}}function pn(t,e,n,i){return n||(n=Ke(t,e)),fn(t,e,n,sn(t,e,Xe(t,n,i),"line").top)}function mn(t,e,n,i){return!(t.bottom<=n)&&(t.top>n||(i?t.left:t.right)>e)}function gn(t,e,n,i,o){o-=yt(e);var r=Ke(t,e),s=rn(e),a=0,l=e.text.length,c=!0,u=_t(e,t.doc.direction);if(u){var h=(t.options.lineWrapping?yn:vn)(t,e,n,r,u,i,o);c=1!=h.level,a=c?h.from:h.to-1,l=c?h.to:h.from-1}var d,f,p=null,m=null,g=k(function(e){var n=Xe(t,r,e);return n.top+=s,n.bottom+=s,!!mn(n,i,o,!1)&&(n.top<=o&&n.left<=i&&(p=e,m=n),!0)},a,l),v=!1;if(m){var y=i-m.left<m.right-i,b=y==c;g=p+(b?0:1),f=b?"after":"before",d=y?m.left:m.right}else{c||g!=l&&g!=a||g++,f=0==g?"after":g==e.text.length?"before":Xe(t,r,g-(c?1:0)).bottom+s<=o==c?"after":"before";var w=cn(t,I(n,g,f),"line",e,r);d=w.left,v=o<w.top||o>=w.bottom}return g=S(e.text,g,1),hn(n,g,f,v,i-d)}function vn(t,e,n,i,o,r,s){var a=k(function(a){var l=o[a],c=1!=l.level;return mn(cn(t,I(n,c?l.to:l.from,c?"before":"after"),"line",e,i),r,s,!0)},0,o.length-1),l=o[a];if(a>0){var c=1!=l.level,u=cn(t,I(n,c?l.from:l.to,c?"after":"before"),"line",e,i);mn(u,r,s,!0)&&u.top>s&&(l=o[a-1])}return l}function yn(t,e,n,i,o,r,s){var a=fn(t,e,i,s),l=a.begin,c=a.end;/\s/.test(e.text.charAt(c-1))&&c--;for(var u=null,h=null,d=0;d<o.length;d++){var f=o[d];if(!(f.from>=c||f.to<=l)){var p=1!=f.level,m=Xe(t,i,p?Math.min(c,f.to)-1:Math.max(l,f.from)).right,g=m<r?r-m+1e9:m-r;(!u||h>g)&&(u=f,h=g)}}return u||(u=o[o.length-1]),u.from<l&&(u={from:l,to:u.to,level:u.level}),u.to>c&&(u={from:u.from,to:c,level:u.level}),u}function bn(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==ma){ma=i("pre");for(var o=0;o<49;++o)ma.appendChild(document.createTextNode("x")),ma.appendChild(i("br"));ma.appendChild(document.createTextNode("x"))}n(t.measure,ma);var r=ma.offsetHeight/50;return r>3&&(t.cachedTextHeight=r),e(t.measure),r||1}function wn(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=i("span","xxxxxxxxxx"),o=i("pre",[e]);n(t.measure,o);var r=e.getBoundingClientRect(),s=(r.right-r.left)/10;return s>2&&(t.cachedCharWidth=s),s||10}function xn(t){for(var e=t.display,n={},i={},o=e.gutters.clientLeft,r=e.gutters.firstChild,s=0;r;r=r.nextSibling,++s)n[t.options.gutters[s]]=r.offsetLeft+r.clientLeft+o,i[t.options.gutters[s]]=r.clientWidth;return{fixedPos:Cn(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}function Cn(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function _n(t){var e=bn(t.display),n=t.options.lineWrapping,i=n&&Math.max(5,t.display.scroller.clientWidth/wn(t.display)-3);return function(o){if(gt(t.doc,o))return 0;var r=0;if(o.widgets)for(var s=0;s<o.widgets.length;s++)o.widgets[s].height&&(r+=o.widgets[s].height);return n?r+(Math.ceil(o.text.length/i)||1)*e:r+e}}function Sn(t){var e=t.doc,n=_n(t);e.iter(function(t){var e=n(t);e!=t.height&&P(t,e)})}function kn(t,e,n,i){var o=t.display;if(!n&&"true"==It(e).getAttribute("cm-not-content"))return null;var r,s,a=o.lineSpace.getBoundingClientRect();try{r=e.clientX-a.left,s=e.clientY-a.top}catch(e){return null}var l,c=dn(t,r,s);if(i&&1==c.xRel&&(l=E(t.doc,c.line).text).length==c.ch){var u=h(l,l.length,t.options.tabSize)-l.length;c=I(c.line,Math.max(0,Math.round((r-Re(t.display).left)/wn(t.display))-u))}return c}function Tn(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var n=t.display.view,i=0;i<n.length;i++)if((e-=n[i].size)<0)return i}function En(t){t.display.input.showSelection(t.display.input.prepareSelection())}function Ln(t,e){void 0===e&&(e=!0);for(var n=t.doc,i={},o=i.cursors=document.createDocumentFragment(),r=i.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(e||s!=n.sel.primIndex){var a=n.sel.ranges[s];if(!(a.from().line>=t.display.viewTo||a.to().line<t.display.viewFrom)){var l=a.empty();(l||t.options.showCursorWhenSelecting)&&An(t,a.head,o),l||Mn(t,a,r)}}return i}function An(t,e,n){var o=cn(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),r=n.appendChild(i("div"," ","CodeMirror-cursor"));if(r.style.left=o.left+"px",r.style.top=o.top+"px",r.style.height=Math.max(0,o.bottom-o.top)*t.options.cursorHeight+"px",o.other){var s=n.appendChild(i("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=o.other.left+"px",s.style.top=o.other.top+"px",s.style.height=.85*(o.other.bottom-o.other.top)+"px"}}function Pn(t,e){return t.top-e.top||t.left-e.left}function Mn(t,e,n){function o(t,e,n,o){e<0&&(e=0),e=Math.round(e),o=Math.round(o),l.appendChild(i("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==n?h-t:n)+"px;\n                             height: "+(o-e)+"px"))}function r(e,n,i){function r(n,i){return ln(t,I(e,n),"div",f,i)}function s(e,n,i){var o=pn(t,f,null,e),s="ltr"==n==("after"==i)?"left":"right";return r("after"==i?o.begin:o.end-(/\s/.test(f.text.charAt(o.end-1))?2:1),s)[s]}var l,c,f=E(a,e),p=f.text.length,m=_t(f,a.direction);return xt(m,n||0,null==i?p:i,function(t,e,a,f){var g="ltr"==a,v=r(t,g?"left":"right"),y=r(e-1,g?"right":"left"),b=null==n&&0==t,w=null==i&&e==p,x=0==f,C=!m||f==m.length-1;if(y.top-v.top<=3){var _=(d?b:w)&&x,S=(d?w:b)&&C,k=_?u:(g?v:y).left,T=S?h:(g?y:v).right;o(k,v.top,T-k,v.bottom)}else{var E,L,A,P;g?(E=d&&b&&x?u:v.left,L=d?h:s(t,a,"before"),A=d?u:s(e,a,"after"),P=d&&w&&C?h:y.right):(E=d?s(t,a,"before"):u,L=!d&&b&&x?h:v.right,A=!d&&w&&C?u:y.left,P=d?s(e,a,"after"):h),o(E,v.top,L-E,v.bottom),v.bottom<y.top&&o(u,v.bottom,null,y.top),o(A,y.top,P-A,y.bottom)}(!l||Pn(v,l)<0)&&(l=v),Pn(y,l)<0&&(l=y),(!c||Pn(v,c)<0)&&(c=v),Pn(y,c)<0&&(c=y)}),{start:l,end:c}}var s=t.display,a=t.doc,l=document.createDocumentFragment(),c=Re(t.display),u=c.left,h=Math.max(s.sizerWidth,We(t)-s.sizer.offsetLeft)-c.right,d="ltr"==a.direction,f=e.from(),p=e.to();if(f.line==p.line)r(f.line,f.ch,p.ch);else{var m=E(a,f.line),g=E(a,p.line),v=ht(m)==ht(g),y=r(f.line,f.ch,v?m.text.length+1:null).end,b=r(p.line,v?0:null,p.ch).start;v&&(y.top<b.top-2?(o(y.right,y.top,null,y.bottom),o(u,b.top,b.left,b.bottom)):o(y.right,y.top,b.left-y.right,y.bottom)),y.bottom<b.top&&o(u,y.bottom,null,b.top)}n.appendChild(l)}function Nn(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval(function(){return e.cursorDiv.style.visibility=(n=!n)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function Dn(t){t.state.focused||(t.display.input.focus(),In(t))}function On(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,Hn(t))},100)}function In(t,e){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(Tt(t,"focus",t,e),t.state.focused=!0,a(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),ws&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),Nn(t))}function Hn(t,e){t.state.delayingBlurEvent||(t.state.focused&&(Tt(t,"blur",t,e),t.state.focused=!1,Fs(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function Fn(t){for(var e=t.display,n=e.lineDiv.offsetTop,i=0;i<e.view.length;i++){var o=e.view[i],r=void 0;if(!o.hidden){if(ys&&bs<8){var s=o.node.offsetTop+o.node.offsetHeight;r=s-n,n=s}else{var a=o.node.getBoundingClientRect();r=a.bottom-a.top}var l=o.line.height-r;if(r<2&&(r=bn(e)),(l>.005||l<-.005)&&(P(o.line,r),Rn(o.line),o.rest))for(var c=0;c<o.rest.length;c++)Rn(o.rest[c])}}}function Rn(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var n=t.widgets[e],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function Bn(t,e,n){var i=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;i=Math.floor(i-He(t));var o=n&&null!=n.bottom?n.bottom:i+t.wrapper.clientHeight,r=N(e,i),s=N(e,o);if(n&&n.ensure){var a=n.ensure.from.line,l=n.ensure.to.line;a<r?(r=a,s=N(e,yt(E(e,a))+t.wrapper.clientHeight)):Math.min(l,e.lastLine())>=s&&(r=N(e,yt(E(e,l))-t.wrapper.clientHeight),s=l)}return{from:r,to:Math.max(s,r+1)}}function Wn(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var i=Cn(e)-e.scroller.scrollLeft+t.doc.scrollLeft,o=e.gutters.offsetWidth,r=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){t.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=r),n[s].gutterBackground&&(n[s].gutterBackground.style.left=r));var a=n[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=r}t.options.fixedGutter&&(e.gutters.style.left=i+o+"px")}}function $n(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=O(t.options,e.first+e.size-1),o=t.display;if(n.length!=o.lineNumChars){var r=o.measure.appendChild(i("div",[i("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=r.firstChild.offsetWidth,a=r.offsetWidth-s;return o.lineGutter.style.width="",o.lineNumInnerWidth=Math.max(s,o.lineGutter.offsetWidth-a)+1,o.lineNumWidth=o.lineNumInnerWidth+a,o.lineNumChars=o.lineNumInnerWidth?n.length:-1,o.lineGutter.style.width=o.lineNumWidth+"px",Ni(t),!0}return!1}function zn(t,e){if(!Et(t,"scrollCursorIntoView")){var n=t.display,o=n.sizer.getBoundingClientRect(),r=null;if(e.top+o.top<0?r=!0:e.bottom+o.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!Ts){var s=i("div","​",null,"position: absolute;\n                         top: "+(e.top-n.viewOffset-He(t.display))+"px;\n                         height: "+(e.bottom-e.top+Be(t)+n.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(s),s.scrollIntoView(r),t.display.lineSpace.removeChild(s)}}}function jn(t,e,n,i){null==i&&(i=0);var o;t.options.lineWrapping||e!=n||(e=e.ch?I(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e,n="before"==e.sticky?I(e.line,e.ch+1,"before"):e);for(var r=0;r<5;r++){var s=!1,a=cn(t,e),l=n&&n!=e?cn(t,n):a;o={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top)-i,right:Math.max(a.left,l.left),bottom:Math.max(a.bottom,l.bottom)+i};var c=Un(t,o),u=t.doc.scrollTop,h=t.doc.scrollLeft;if(null!=c.scrollTop&&(Qn(t,c.scrollTop),Math.abs(t.doc.scrollTop-u)>1&&(s=!0)),null!=c.scrollLeft&&(ti(t,c.scrollLeft),Math.abs(t.doc.scrollLeft-h)>1&&(s=!0)),!s)break}return o}function qn(t,e){var n=Un(t,e);null!=n.scrollTop&&Qn(t,n.scrollTop),null!=n.scrollLeft&&ti(t,n.scrollLeft)}function Un(t,e){var n=t.display,i=bn(t.display);e.top<0&&(e.top=0);var o=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:n.scroller.scrollTop,r=$e(t),s={};e.bottom-e.top>r&&(e.bottom=e.top+r);var a=t.doc.height+Fe(n),l=e.top<i,c=e.bottom>a-i;if(e.top<o)s.scrollTop=l?0:e.top;else if(e.bottom>o+r){var u=Math.min(e.top,(c?a:e.bottom)-r);u!=o&&(s.scrollTop=u)}var h=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:n.scroller.scrollLeft,d=We(t)-(t.options.fixedGutter?n.gutters.offsetWidth:0),f=e.right-e.left>d;return f&&(e.right=e.left+d),e.left<10?s.scrollLeft=0:e.left<h?s.scrollLeft=Math.max(0,e.left-(f?0:10)):e.right>d+h-3&&(s.scrollLeft=e.right+(f?0:10)-d),s}function Vn(t,e){null!=e&&(Gn(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function Kn(t){Gn(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function Xn(t,e,n){null==e&&null==n||Gn(t),null!=e&&(t.curOp.scrollLeft=e),null!=n&&(t.curOp.scrollTop=n)}function Yn(t,e){Gn(t),t.curOp.scrollToPos=e}function Gn(t){var e=t.curOp.scrollToPos;if(e){t.curOp.scrollToPos=null;Zn(t,un(t,e.from),un(t,e.to),e.margin)}}function Zn(t,e,n,i){var o=Un(t,{left:Math.min(e.left,n.left),top:Math.min(e.top,n.top)-i,right:Math.max(e.right,n.right),bottom:Math.max(e.bottom,n.bottom)+i});Xn(t,o.scrollLeft,o.scrollTop)}function Qn(t,e){Math.abs(t.doc.scrollTop-e)<2||(ps||Pi(t,{top:e}),Jn(t,e,!0),ps&&Pi(t),_i(t,100))}function Jn(t,e,n){e=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e),(t.display.scroller.scrollTop!=e||n)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function ti(t,e,n,i){e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!i||(t.doc.scrollLeft=e,Wn(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function ei(t){var e=t.display,n=e.gutters.offsetWidth,i=Math.round(t.doc.height+Fe(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Be(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:n}}function ni(t,e){e||(e=ei(t));var n=t.display.barWidth,i=t.display.barHeight;ii(t,e);for(var o=0;o<4&&n!=t.display.barWidth||i!=t.display.barHeight;o++)n!=t.display.barWidth&&t.options.lineWrapping&&Fn(t),ii(t,ei(t)),n=t.display.barWidth,i=t.display.barHeight}function ii(t,e){var n=t.display,i=n.scrollbars.update(e);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=e.gutterWidth+"px"):n.gutterFiller.style.display=""}function oi(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&Fs(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new _a[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),ea(e,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,n){"horizontal"==n?ti(t,e):Qn(t,e)},t),t.display.scrollbars.addClass&&a(t.display.wrapper,t.display.scrollbars.addClass)}function ri(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Sa},ve(t.curOp)}function si(t){be(t.curOp,function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;ai(t)})}function ai(t){for(var e=t.ops,n=0;n<e.length;n++)li(e[n]);for(var i=0;i<e.length;i++)ci(e[i]);for(var o=0;o<e.length;o++)ui(e[o]);for(var r=0;r<e.length;r++)hi(e[r]);for(var s=0;s<e.length;s++)di(e[s])}function li(t){var e=t.cm,n=e.display;ki(e),t.updateMaxLine&&wt(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<n.viewFrom||t.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new ka(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function ci(t){t.updatedDisplay=t.mustUpdate&&Li(t.cm,t.update)}function ui(t){var e=t.cm,n=e.display;t.updatedDisplay&&Fn(e),t.barMeasure=ei(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=Ue(e,n.maxLine,n.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+t.adjustWidthTo+Be(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo-We(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=n.input.prepareSelection())}function hi(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&ti(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var n=t.focus&&t.focus==s();t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,n),(t.updatedDisplay||t.startHeight!=e.doc.height)&&ni(e,t.barMeasure),t.updatedDisplay&&Di(e,t.barMeasure),t.selectionChanged&&Nn(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),n&&Dn(t.cm)}function di(t){var e=t.cm,n=e.display,i=e.doc;if(t.updatedDisplay&&Ai(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=t.scrollTop&&Jn(e,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&ti(e,t.scrollLeft,!0,!0),t.scrollToPos){zn(e,jn(e,z(i,t.scrollToPos.from),z(i,t.scrollToPos.to),t.scrollToPos.margin))}var o=t.maybeHiddenMarkers,r=t.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||Tt(o[s],"hide");if(r)for(var a=0;a<r.length;++a)r[a].lines.length&&Tt(r[a],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&Tt(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function fi(t,e){if(t.curOp)return e();ri(t);try{return e()}finally{si(t)}}function pi(t,e){return function(){if(t.curOp)return e.apply(t,arguments);ri(t);try{return e.apply(t,arguments)}finally{si(t)}}}function mi(t){return function(){if(this.curOp)return t.apply(this,arguments);ri(this);try{return t.apply(this,arguments)}finally{si(this)}}}function gi(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);ri(e);try{return t.apply(this,arguments)}finally{si(e)}}}function vi(t,e,n,i){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),i||(i=0);var o=t.display;if(i&&n<o.viewTo&&(null==o.updateLineNumbers||o.updateLineNumbers>e)&&(o.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=o.viewTo)Zs&&pt(t.doc,e)<o.viewTo&&bi(t);else if(n<=o.viewFrom)Zs&&mt(t.doc,n+i)>o.viewFrom?bi(t):(o.viewFrom+=i,o.viewTo+=i);else if(e<=o.viewFrom&&n>=o.viewTo)bi(t);else if(e<=o.viewFrom){var r=wi(t,n,n+i,1);r?(o.view=o.view.slice(r.index),o.viewFrom=r.lineN,o.viewTo+=i):bi(t)}else if(n>=o.viewTo){var s=wi(t,e,e,-1);s?(o.view=o.view.slice(0,s.index),o.viewTo=s.lineN):bi(t)}else{var a=wi(t,e,e,-1),l=wi(t,n,n+i,1);a&&l?(o.view=o.view.slice(0,a.index).concat(ge(t,a.lineN,l.lineN)).concat(o.view.slice(l.index)),o.viewTo+=i):bi(t)}var c=o.externalMeasured;c&&(n<c.lineN?c.lineN+=i:e<c.lineN+c.size&&(o.externalMeasured=null))}function yi(t,e,n){t.curOp.viewChanged=!0;var i=t.display,o=t.display.externalMeasured;if(o&&e>=o.lineN&&e<o.lineN+o.size&&(i.externalMeasured=null),!(e<i.viewFrom||e>=i.viewTo)){var r=i.view[Tn(t,e)];if(null!=r.node){var s=r.changes||(r.changes=[]);-1==d(s,n)&&s.push(n)}}}function bi(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function wi(t,e,n,i){var o,r=Tn(t,e),s=t.display.view;if(!Zs||n==t.doc.first+t.doc.size)return{index:r,lineN:n};for(var a=t.display.viewFrom,l=0;l<r;l++)a+=s[l].size;if(a!=e){if(i>0){if(r==s.length-1)return null;o=a+s[r].size-e,r++}else o=a-e;e+=o,n+=o}for(;pt(t.doc,n)!=n;){if(r==(i<0?0:s.length-1))return null;n+=i*s[r-(i<0?1:0)].size,r+=i}return{index:r,lineN:n}}function xi(t,e,n){var i=t.display;0==i.view.length||e>=i.viewTo||n<=i.viewFrom?(i.view=ge(t,e,n),i.viewFrom=e):(i.viewFrom>e?i.view=ge(t,e,i.viewFrom).concat(i.view):i.viewFrom<e&&(i.view=i.view.slice(Tn(t,e))),i.viewFrom=e,i.viewTo<n?i.view=i.view.concat(ge(t,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,Tn(t,n)))),i.viewTo=n}function Ci(t){for(var e=t.display.view,n=0,i=0;i<e.length;i++){var o=e[i];o.hidden||o.node&&!o.changes||++n}return n}function _i(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,c(Si,t))}function Si(t){var e=t.doc;if(!(e.highlightFrontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,i=Gt(t,e.highlightFrontier),o=[];e.iter(i.line,Math.min(e.first+e.size,t.display.viewTo+500),function(r){if(i.line>=t.display.viewFrom){var s=r.styles,a=r.text.length>t.options.maxHighlightLength?Ut(e.mode,i.state):null,l=Xt(t,r,i,!0);a&&(i.state=a),r.styles=l.styles;var c=r.styleClasses,u=l.classes;u?r.styleClasses=u:c&&(r.styleClasses=null);for(var h=!s||s.length!=r.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),d=0;!h&&d<s.length;++d)h=s[d]!=r.styles[d];h&&o.push(i.line),r.stateAfter=i.save(),i.nextLine()}else r.text.length<=t.options.maxHighlightLength&&Zt(t,r.text,i),r.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return _i(t,t.options.workDelay),!0}),e.highlightFrontier=i.line,e.modeFrontier=Math.max(e.modeFrontier,i.line),o.length&&fi(t,function(){for(var e=0;e<o.length;e++)yi(t,o[e],"text")})}}function ki(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=Be(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=Be(t)+"px",e.scrollbarsClipped=!0)}function Ti(t){if(t.hasFocus())return null;var e=s();if(!e||!r(t.display.lineDiv,e))return null;var n={activeElt:e};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&r(t.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}function Ei(t){if(t&&t.activeElt&&t.activeElt!=s()&&(t.activeElt.focus(),t.anchorNode&&r(document.body,t.anchorNode)&&r(document.body,t.focusNode))){var e=window.getSelection(),n=document.createRange();n.setEnd(t.anchorNode,t.anchorOffset),n.collapse(!1),e.removeAllRanges(),e.addRange(n),e.extend(t.focusNode,t.focusOffset)}}function Li(t,n){var i=t.display,o=t.doc;if(n.editorIsHidden)return bi(t),!1;if(!n.force&&n.visible.from>=i.viewFrom&&n.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==Ci(t))return!1;$n(t)&&(bi(t),n.dims=xn(t));var r=o.first+o.size,s=Math.max(n.visible.from-t.options.viewportMargin,o.first),a=Math.min(r,n.visible.to+t.options.viewportMargin);i.viewFrom<s&&s-i.viewFrom<20&&(s=Math.max(o.first,i.viewFrom)),i.viewTo>a&&i.viewTo-a<20&&(a=Math.min(r,i.viewTo)),Zs&&(s=pt(t.doc,s),a=mt(t.doc,a));var l=s!=i.viewFrom||a!=i.viewTo||i.lastWrapHeight!=n.wrapperHeight||i.lastWrapWidth!=n.wrapperWidth;xi(t,s,a),i.viewOffset=yt(E(t.doc,i.viewFrom)),t.display.mover.style.top=i.viewOffset+"px";var c=Ci(t);if(!l&&0==c&&!n.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var u=Ti(t);return c>4&&(i.lineDiv.style.display="none"),Mi(t,i.updateLineNumbers,n.dims),c>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,Ei(u),e(i.cursorDiv),e(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,l&&(i.lastWrapHeight=n.wrapperHeight,i.lastWrapWidth=n.wrapperWidth,_i(t,400)),i.updateLineNumbers=null,!0}function Ai(t,e){for(var n=e.viewport,i=!0;(i&&t.options.lineWrapping&&e.oldDisplayWidth!=We(t)||(n&&null!=n.top&&(n={top:Math.min(t.doc.height+Fe(t.display)-$e(t),n.top)}),e.visible=Bn(t.display,t.doc,n),!(e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)))&&Li(t,e);i=!1){Fn(t);var o=ei(t);En(t),ni(t,o),Di(t,o),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function Pi(t,e){var n=new ka(t,e);if(Li(t,n)){Fn(t),Ai(t,n);var i=ei(t);En(t),ni(t,i),Di(t,i),n.finish()}}function Mi(t,n,i){function o(e){var n=e.nextSibling;return ws&&Ps&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var r=t.display,s=t.options.lineNumbers,a=r.lineDiv,l=a.firstChild,c=r.view,u=r.viewFrom,h=0;h<c.length;h++){var f=c[h];if(f.hidden);else if(f.node&&f.node.parentNode==a){for(;l!=f.node;)l=o(l);var p=s&&null!=n&&n<=u&&f.lineNumber;f.changes&&(d(f.changes,"gutter")>-1&&(p=!1),Ce(t,f,u,i)),p&&(e(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(O(t.options,u)))),l=f.node.nextSibling}else{var m=Pe(t,f,u,i);a.insertBefore(m,l)}u+=f.size}for(;l;)l=o(l)}function Ni(t){var e=t.display.gutters.offsetWidth;t.display.sizer.style.marginLeft=e+"px"}function Di(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+Be(t)+"px"}function Oi(t){var n=t.display.gutters,o=t.options.gutters;e(n);for(var r=0;r<o.length;++r){var s=o[r],a=n.appendChild(i("div",null,"CodeMirror-gutter "+s));"CodeMirror-linenumbers"==s&&(t.display.lineGutter=a,a.style.width=(t.display.lineNumWidth||1)+"px")}n.style.display=r?"":"none",Ni(t)}function Ii(t){var e=d(t.gutters,"CodeMirror-linenumbers");-1==e&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}function Hi(t){var e=t.wheelDeltaX,n=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),{x:e,y:n}}function Fi(t){var e=Hi(t);return e.x*=Ea,e.y*=Ea,e}function Ri(t,e){var n=Hi(e),i=n.x,o=n.y,r=t.display,s=r.scroller,a=s.scrollWidth>s.clientWidth,l=s.scrollHeight>s.clientHeight;if(i&&a||o&&l){if(o&&Ps&&ws)t:for(var c=e.target,u=r.view;c!=s;c=c.parentNode)for(var h=0;h<u.length;h++)if(u[h].node==c){t.display.currentWheelTarget=c;break t}if(i&&!ps&&!_s&&null!=Ea)return o&&l&&Qn(t,Math.max(0,s.scrollTop+o*Ea)),ti(t,Math.max(0,s.scrollLeft+i*Ea)),(!o||o&&l)&&Mt(e),void(r.wheelStartX=null);if(o&&null!=Ea){var d=o*Ea,f=t.doc.scrollTop,p=f+r.wrapper.clientHeight;d<0?f=Math.max(0,f+d-50):p=Math.min(t.doc.height,p+d+50),Pi(t,{top:f,bottom:p})}Ta<20&&(null==r.wheelStartX?(r.wheelStartX=s.scrollLeft,r.wheelStartY=s.scrollTop,r.wheelDX=i,r.wheelDY=o,setTimeout(function(){if(null!=r.wheelStartX){var t=s.scrollLeft-r.wheelStartX,e=s.scrollTop-r.wheelStartY,n=e&&r.wheelDY&&e/r.wheelDY||t&&r.wheelDX&&t/r.wheelDX;r.wheelStartX=r.wheelStartY=null,n&&(Ea=(Ea*Ta+n)/(Ta+1),++Ta)}},200)):(r.wheelDX+=i,r.wheelDY+=o))}}function Bi(t,e){var n=t[e];t.sort(function(t,e){return H(t.from(),e.from())}),e=d(t,n);for(var i=1;i<t.length;i++){var o=t[i],r=t[i-1];if(H(r.to(),o.from())>=0){var s=W(r.from(),o.from()),a=B(r.to(),o.to()),l=r.empty()?o.from()==o.head:r.from()==r.head;i<=e&&--e,t.splice(--i,2,new Aa(l?a:s,l?s:a))}}return new La(t,e)}function Wi(t,e){return new La([new Aa(t,e||t)],0)}function $i(t){return t.text?I(t.from.line+t.text.length-1,m(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function zi(t,e){if(H(t,e.from)<0)return t;if(H(t,e.to)<=0)return $i(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,i=t.ch;return t.line==e.to.line&&(i+=$i(e).ch-e.to.ch),I(n,i)}function ji(t,e){for(var n=[],i=0;i<t.sel.ranges.length;i++){var o=t.sel.ranges[i];n.push(new Aa(zi(o.anchor,e),zi(o.head,e)))}return Bi(n,t.sel.primIndex)}function qi(t,e,n){return t.line==e.line?I(n.line,t.ch-e.ch+n.ch):I(n.line+(t.line-e.line),t.ch)}function Ui(t,e,n){for(var i=[],o=I(t.first,0),r=o,s=0;s<e.length;s++){var a=e[s],l=qi(a.from,o,r),c=qi($i(a),o,r);if(o=a.to,r=c,"around"==n){var u=t.sel.ranges[s],h=H(u.head,u.anchor)<0;i[s]=new Aa(h?c:l,h?l:c)}else i[s]=new Aa(l,l)}return new La(i,t.sel.primIndex)}function Vi(t){t.doc.mode=jt(t.options,t.doc.modeOption),Ki(t)}function Ki(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,_i(t,100),t.state.modeGen++,t.curOp&&vi(t)}function Xi(t,e){return 0==e.from.ch&&0==e.to.ch&&""==m(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Yi(t,e,n,i){function o(t){return n?n[t]:null}function r(t,n,o){re(t,n,o,i),we(t,"change",t,e)}function s(t,e){for(var n=[],r=t;r<e;++r)n.push(new pa(c[r],o(r),i));return n}var a=e.from,l=e.to,c=e.text,u=E(t,a.line),h=E(t,l.line),d=m(c),f=o(c.length-1),p=l.line-a.line;if(e.full)t.insert(0,s(0,c.length)),t.remove(c.length,t.size-c.length);else if(Xi(t,e)){var g=s(0,c.length-1);r(h,h.text,f),p&&t.remove(a.line,p),g.length&&t.insert(a.line,g)}else if(u==h)if(1==c.length)r(u,u.text.slice(0,a.ch)+d+u.text.slice(l.ch),f);else{var v=s(1,c.length-1);v.push(new pa(d+u.text.slice(l.ch),f,i)),r(u,u.text.slice(0,a.ch)+c[0],o(0)),t.insert(a.line+1,v)}else if(1==c.length)r(u,u.text.slice(0,a.ch)+c[0]+h.text.slice(l.ch),o(0)),t.remove(a.line+1,p);else{r(u,u.text.slice(0,a.ch)+c[0],o(0)),r(h,d+h.text.slice(l.ch),f);var y=s(1,c.length-1);p>1&&t.remove(a.line+1,p-1),t.insert(a.line+1,y)}we(t,"change",t,e)}function Gi(t,e,n){function i(t,o,r){if(t.linked)for(var s=0;s<t.linked.length;++s){var a=t.linked[s];if(a.doc!=o){var l=r&&a.sharedHist;n&&!l||(e(a.doc,l),i(a.doc,t,l))}}}i(t,null,!0)}function Zi(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,Sn(t),Vi(t),Qi(t),t.options.lineWrapping||wt(t),t.options.mode=e.modeOption,vi(t)}function Qi(t){("rtl"==t.doc.direction?a:Fs)(t.display.lineDiv,"CodeMirror-rtl")}function Ji(t){fi(t,function(){Qi(t),vi(t)})}function to(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function eo(t,e){var n={from:R(e.from),to:$i(e),text:L(t,e.from,e.to)};return lo(t,n,e.from.line,e.to.line+1),Gi(t,function(t){return lo(t,n,e.from.line,e.to.line+1)},!0),n}function no(t){for(;t.length;){if(!m(t).ranges)break;t.pop()}}function io(t,e){return e?(no(t.done),m(t.done)):t.done.length&&!m(t.done).ranges?m(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),m(t.done)):void 0}function oo(t,e,n,i){var o=t.history;o.undone.length=0;var r,s,a=+new Date;if((o.lastOp==i||o.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&o.lastModTime>a-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))&&(r=io(o,o.lastOp==i)))s=m(r.changes),0==H(e.from,e.to)&&0==H(e.from,s.to)?s.to=$i(e):r.changes.push(eo(t,e));else{var l=m(o.done);for(l&&l.ranges||ao(t.sel,o.done),r={changes:[eo(t,e)],generation:o.generation},o.done.push(r);o.done.length>o.undoDepth;)o.done.shift(),o.done[0].ranges||o.done.shift()}o.done.push(n),o.generation=++o.maxGeneration,o.lastModTime=o.lastSelTime=a,o.lastOp=o.lastSelOp=i,o.lastOrigin=o.lastSelOrigin=e.origin,s||Tt(t,"historyAdded")}function ro(t,e,n,i){var o=e.charAt(0);return"*"==o||"+"==o&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}function so(t,e,n,i){var o=t.history,r=i&&i.origin;n==o.lastSelOp||r&&o.lastSelOrigin==r&&(o.lastModTime==o.lastSelTime&&o.lastOrigin==r||ro(t,r,m(o.done),e))?o.done[o.done.length-1]=e:ao(e,o.done),o.lastSelTime=+new Date,o.lastSelOrigin=r,o.lastSelOp=n,i&&!1!==i.clearRedo&&no(o.undone)}function ao(t,e){var n=m(e);n&&n.ranges&&n.equals(t)||e.push(t)}function lo(t,e,n,i){var o=e["spans_"+t.id],r=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,i),function(n){n.markedSpans&&((o||(o=e["spans_"+t.id]={}))[r]=n.markedSpans),++r})}function co(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function uo(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var i=[],o=0;o<e.text.length;++o)i.push(co(n[o]));return i}function ho(t,e){var n=uo(t,e),i=J(t,e);if(!n)return i;if(!i)return n;for(var o=0;o<n.length;++o){var r=n[o],s=i[o];if(r&&s)t:for(var a=0;a<s.length;++a){for(var l=s[a],c=0;c<r.length;++c)if(r[c].marker==l.marker)continue t;r.push(l)}else s&&(n[o]=s)}return n}function fo(t,e,n){for(var i=[],o=0;o<t.length;++o){var r=t[o];if(r.ranges)i.push(n?La.prototype.deepCopy.call(r):r);else{var s=r.changes,a=[];i.push({changes:a});for(var l=0;l<s.length;++l){var c=s[l],u=void 0;if(a.push({from:c.from,to:c.to,text:c.text}),e)for(var h in c)(u=h.match(/^spans_(\d+)$/))&&d(e,Number(u[1]))>-1&&(m(a)[h]=c[h],delete c[h])}}}return i}function po(t,e,n,i){if(i){var o=t.anchor;if(n){var r=H(e,o)<0;r!=H(n,o)<0?(o=e,e=n):r!=H(e,n)<0&&(e=n)}return new Aa(o,e)}return new Aa(n||e,e)}function mo(t,e,n,i,o){null==o&&(o=t.cm&&(t.cm.display.shift||t.extend)),xo(t,new La([po(t.sel.primary(),e,n,o)],0),i)}function go(t,e,n){for(var i=[],o=t.cm&&(t.cm.display.shift||t.extend),r=0;r<t.sel.ranges.length;r++)i[r]=po(t.sel.ranges[r],e[r],null,o);xo(t,Bi(i,t.sel.primIndex),n)}function vo(t,e,n,i){var o=t.sel.ranges.slice(0);o[e]=n,xo(t,Bi(o,t.sel.primIndex),i)}function yo(t,e,n,i){xo(t,Wi(e,n),i)}function bo(t,e,n){var i={ranges:e.ranges,update:function(e){var n=this;this.ranges=[];for(var i=0;i<e.length;i++)n.ranges[i]=new Aa(z(t,e[i].anchor),z(t,e[i].head))},origin:n&&n.origin};return Tt(t,"beforeSelectionChange",t,i),t.cm&&Tt(t.cm,"beforeSelectionChange",t.cm,i),i.ranges!=e.ranges?Bi(i.ranges,i.ranges.length-1):e}function wo(t,e,n){var i=t.history.done,o=m(i);o&&o.ranges?(i[i.length-1]=e,Co(t,e,n)):xo(t,e,n)}function xo(t,e,n){Co(t,e,n),so(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function Co(t,e,n){(At(t,"beforeSelectionChange")||t.cm&&At(t.cm,"beforeSelectionChange"))&&(e=bo(t,e,n)),_o(t,ko(t,e,n&&n.bias||(H(e.primary().head,t.sel.primary().head)<0?-1:1),!0)),n&&!1===n.scroll||!t.cm||Kn(t.cm)}function _o(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=!0,Lt(t.cm)),we(t,"cursorActivity",t))}function So(t){_o(t,ko(t,t.sel,null,!1))}function ko(t,e,n,i){for(var o,r=0;r<e.ranges.length;r++){var s=e.ranges[r],a=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[r],l=Eo(t,s.anchor,a&&a.anchor,n,i),c=Eo(t,s.head,a&&a.head,n,i);(o||l!=s.anchor||c!=s.head)&&(o||(o=e.ranges.slice(0,r)),o[r]=new Aa(l,c))}return o?Bi(o,e.primIndex):e}function To(t,e,n,i,o){var r=E(t,e.line);if(r.markedSpans)for(var s=0;s<r.markedSpans.length;++s){var a=r.markedSpans[s],l=a.marker;if((null==a.from||(l.inclusiveLeft?a.from<=e.ch:a.from<e.ch))&&(null==a.to||(l.inclusiveRight?a.to>=e.ch:a.to>e.ch))){if(o&&(Tt(l,"beforeCursorEnter"),l.explicitlyCleared)){if(r.markedSpans){--s;continue}break}if(!l.atomic)continue;if(n){var c=l.find(i<0?1:-1),u=void 0;if((i<0?l.inclusiveRight:l.inclusiveLeft)&&(c=Lo(t,c,-i,c&&c.line==e.line?r:null)),c&&c.line==e.line&&(u=H(c,n))&&(i<0?u<0:u>0))return To(t,c,e,i,o)}var h=l.find(i<0?-1:1);return(i<0?l.inclusiveLeft:l.inclusiveRight)&&(h=Lo(t,h,i,h.line==e.line?r:null)),h?To(t,h,e,i,o):null}}return e}function Eo(t,e,n,i,o){var r=i||1,s=To(t,e,n,r,o)||!o&&To(t,e,n,r,!0)||To(t,e,n,-r,o)||!o&&To(t,e,n,-r,!0);return s||(t.cantEdit=!0,I(t.first,0))}function Lo(t,e,n,i){return n<0&&0==e.ch?e.line>t.first?z(t,I(e.line-1)):null:n>0&&e.ch==(i||E(t,e.line)).text.length?e.line<t.first+t.size-1?I(e.line+1,0):null:new I(e.line,e.ch+n)}function Ao(t){t.setSelection(I(t.firstLine(),0),I(t.lastLine()),qs)}function Po(t,e,n){var i={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(e,n,o,r){e&&(i.from=z(t,e)),n&&(i.to=z(t,n)),o&&(i.text=o),void 0!==r&&(i.origin=r)}),Tt(t,"beforeChange",t,i),t.cm&&Tt(t.cm,"beforeChange",t.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Mo(t,e,n){if(t.cm){if(!t.cm.curOp)return pi(t.cm,Mo)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(At(t,"beforeChange")||t.cm&&At(t.cm,"beforeChange"))||(e=Po(t,e,!0))){var i=Gs&&!n&&et(t,e.from,e.to);if(i)for(var o=i.length-1;o>=0;--o)No(t,{from:i[o].from,to:i[o].to,text:o?[""]:e.text,origin:e.origin});else No(t,e)}}function No(t,e){if(1!=e.text.length||""!=e.text[0]||0!=H(e.from,e.to)){var n=ji(t,e);oo(t,e,n,t.cm?t.cm.curOp.id:NaN),Io(t,e,n,J(t,e));var i=[];Gi(t,function(t,n){n||-1!=d(i,t.history)||(Wo(t.history,e),i.push(t.history)),Io(t,e,null,J(t,e))})}}function Do(t,e,n){var i=t.cm&&t.cm.state.suppressEdits;if(!i||n){for(var o,r=t.history,s=t.sel,a="undo"==e?r.done:r.undone,l="undo"==e?r.undone:r.done,c=0;c<a.length&&(o=a[c],n?!o.ranges||o.equals(t.sel):o.ranges);c++);if(c!=a.length){for(r.lastOrigin=r.lastSelOrigin=null;;){if(o=a.pop(),!o.ranges){if(i)return void a.push(o);break}if(ao(o,l),n&&!o.equals(t.sel))return void xo(t,o,{clearRedo:!1});s=o}var u=[];ao(s,l),l.push({changes:u,generation:r.generation}),r.generation=o.generation||++r.maxGeneration;for(var h=At(t,"beforeChange")||t.cm&&At(t.cm,"beforeChange"),f=o.changes.length-1;f>=0;--f){var p=function(n){var i=o.changes[n];if(i.origin=e,h&&!Po(t,i,!1))return a.length=0,{};u.push(eo(t,i));var r=n?ji(t,i):m(a);Io(t,i,r,ho(t,i)),!n&&t.cm&&t.cm.scrollIntoView({from:i.from,to:$i(i)});var s=[];Gi(t,function(t,e){e||-1!=d(s,t.history)||(Wo(t.history,i),s.push(t.history)),Io(t,i,null,ho(t,i))})}(f);if(p)return p.v}}}}function Oo(t,e){if(0!=e&&(t.first+=e,t.sel=new La(g(t.sel.ranges,function(t){return new Aa(I(t.anchor.line+e,t.anchor.ch),I(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){vi(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,i=n.viewFrom;i<n.viewTo;i++)yi(t.cm,i,"gutter")}}function Io(t,e,n,i){if(t.cm&&!t.cm.curOp)return pi(t.cm,Io)(t,e,n,i);if(e.to.line<t.first)return void Oo(t,e.text.length-1-(e.to.line-e.from.line));if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var o=e.text.length-1-(t.first-e.from.line);Oo(t,o),e={from:I(t.first,0),to:I(e.to.line+o,e.to.ch),text:[m(e.text)],origin:e.origin}}var r=t.lastLine();e.to.line>r&&(e={from:e.from,to:I(r,E(t,r).text.length),text:[e.text[0]],origin:e.origin}),e.removed=L(t,e.from,e.to),n||(n=ji(t,e)),t.cm?Ho(t.cm,e,i):Yi(t,e,i),Co(t,n,qs)}}function Ho(t,e,n){var i=t.doc,o=t.display,r=e.from,s=e.to,a=!1,l=r.line;t.options.lineWrapping||(l=M(ht(E(i,r.line))),i.iter(l,s.line+1,function(t){if(t==o.maxLine)return a=!0,!0})),i.sel.contains(e.from,e.to)>-1&&Lt(t),Yi(i,e,n,_n(t)),t.options.lineWrapping||(i.iter(l,r.line+e.text.length,function(t){var e=bt(t);e>o.maxLineLength&&(o.maxLine=t,o.maxLineLength=e,o.maxLineChanged=!0,a=!1)}),a&&(t.curOp.updateMaxLine=!0)),oe(i,r.line),_i(t,400);var c=e.text.length-(s.line-r.line)-1;e.full?vi(t):r.line!=s.line||1!=e.text.length||Xi(t.doc,e)?vi(t,r.line,s.line+1,c):yi(t,r.line,"text");var u=At(t,"changes"),h=At(t,"change");if(h||u){var d={from:r,to:s,text:e.text,removed:e.removed,origin:e.origin};h&&we(t,"change",t,d),u&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(d)}t.display.selForContextMenu=null}function Fo(t,e,n,i,o){if(i||(i=n),H(i,n)<0){var r;r=[i,n],n=r[0],i=r[1]}"string"==typeof e&&(e=t.splitLines(e)),Mo(t,{from:n,to:i,text:e,origin:o})}function Ro(t,e,n,i){n<t.line?t.line+=i:e<t.line&&(t.line=e,t.ch=0)}function Bo(t,e,n,i){for(var o=0;o<t.length;++o){var r=t[o],s=!0;if(r.ranges){r.copied||(r=t[o]=r.deepCopy(),r.copied=!0);for(var a=0;a<r.ranges.length;a++)Ro(r.ranges[a].anchor,e,n,i),Ro(r.ranges[a].head,e,n,i)}else{for(var l=0;l<r.changes.length;++l){var c=r.changes[l];if(n<c.from.line)c.from=I(c.from.line+i,c.from.ch),c.to=I(c.to.line+i,c.to.ch);else if(e<=c.to.line){s=!1;break}}s||(t.splice(0,o+1),o=0)}}}function Wo(t,e){var n=e.from.line,i=e.to.line,o=e.text.length-(i-n)-1;Bo(t.done,n,i,o),Bo(t.undone,n,i,o)}function $o(t,e,n,i){var o=e,r=e;return"number"==typeof e?r=E(t,$(t,e)):o=M(e),null==o?null:(i(r,o)&&t.cm&&yi(t.cm,o,n),r)}function zo(t){var e=this;this.lines=t,this.parent=null;for(var n=0,i=0;i<t.length;++i)t[i].parent=e,n+=t[i].height;this.height=n}function jo(t){var e=this;this.children=t;for(var n=0,i=0,o=0;o<t.length;++o){var r=t[o];n+=r.chunkSize(),i+=r.height,r.parent=e}this.size=n,this.height=i,this.parent=null}function qo(t,e,n){yt(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Vn(t,n)}function Uo(t,e,n,i){var o=new Pa(t,n,i),r=t.cm;return r&&o.noHScroll&&(r.display.alignWidgets=!0),$o(t,e,"widget",function(e){var n=e.widgets||(e.widgets=[]);if(null==o.insertAt?n.push(o):n.splice(Math.min(n.length-1,Math.max(0,o.insertAt)),0,o),o.line=e,r&&!gt(t,e)){var i=yt(e)<t.scrollTop;P(e,e.height+Oe(o)),i&&Vn(r,o.height),r.curOp.forceUpdate=!0}return!0}),r&&we(r,"lineWidgetAdded",r,o,"number"==typeof e?e:M(e)),o}function Vo(t,e,n,i,r){if(i&&i.shared)return Ko(t,e,n,i,r);if(t.cm&&!t.cm.curOp)return pi(t.cm,Vo)(t,e,n,i,r);var s=new Na(t,r),a=H(e,n);if(i&&u(i,s,!1),a>0||0==a&&!1!==s.clearWhenEmpty)return s;if(s.replacedWith&&(s.collapsed=!0,s.widgetNode=o("span",[s.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||s.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(s.widgetNode.insertLeft=!0)),s.collapsed){if(ut(t,e.line,e,n,s)||e.line!=n.line&&ut(t,n.line,e,n,s))throw new Error("Inserting collapsed marker partially overlapping an existing one");V()}s.addToHistory&&oo(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var l,c=e.line,h=t.cm;if(t.iter(c,n.line+1,function(t){h&&s.collapsed&&!h.options.lineWrapping&&ht(t)==h.display.maxLine&&(l=!0),s.collapsed&&c!=e.line&&P(t,0),G(t,new K(s,c==e.line?e.ch:null,c==n.line?n.ch:null)),++c}),s.collapsed&&t.iter(e.line,n.line+1,function(e){gt(t,e)&&P(e,0)}),s.clearOnEnter&&ea(s,"beforeCursorEnter",function(){return s.clear()}),s.readOnly&&(U(),(t.history.done.length||t.history.undone.length)&&t.clearHistory()),s.collapsed&&(s.id=++Ma,s.atomic=!0),h){if(l&&(h.curOp.updateMaxLine=!0),s.collapsed)vi(h,e.line,n.line+1);else if(s.className||s.title||s.startStyle||s.endStyle||s.css)for(var d=e.line;d<=n.line;d++)yi(h,d,"text");s.atomic&&So(h.doc),we(h,"markerAdded",h,s)}return s}function Ko(t,e,n,i,o){i=u(i),i.shared=!1;var r=[Vo(t,e,n,i,o)],s=r[0],a=i.widgetNode;return Gi(t,function(t){a&&(i.widgetNode=a.cloneNode(!0)),r.push(Vo(t,z(t,e),z(t,n),i,o));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;s=m(r)}),new Da(r,s)}function Xo(t){return t.findMarks(I(t.first,0),t.clipPos(I(t.lastLine())),function(t){return t.parent})}function Yo(t,e){for(var n=0;n<e.length;n++){var i=e[n],o=i.find(),r=t.clipPos(o.from),s=t.clipPos(o.to);if(H(r,s)){var a=Vo(t,r,s,i.primary,i.primary.type);i.markers.push(a),a.parent=i}}}function Go(t){for(var e=0;e<t.length;e++)!function(e){var n=t[e],i=[n.primary.doc];Gi(n.primary.doc,function(t){return i.push(t)});for(var o=0;o<n.markers.length;o++){var r=n.markers[o];-1==d(i,r.doc)&&(r.parent=null,n.markers.splice(o--,1))}}(e)}function Zo(t){var e=this;if(tr(e),!Et(e,t)&&!Ie(e.display,t)){Mt(t),ys&&(Ha=+new Date);var n=kn(e,t,!0),i=t.dataTransfer.files;if(n&&!e.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var o=i.length,r=Array(o),s=0,a=0;a<o;++a)!function(t,i){if(!e.options.allowDropFileTypes||-1!=d(e.options.allowDropFileTypes,t.type)){var a=new FileReader;a.onload=pi(e,function(){var t=a.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(t)&&(t=""),r[i]=t,++s==o){n=z(e.doc,n);var l={from:n,to:n,text:e.doc.splitLines(r.join(e.doc.lineSeparator())),origin:"paste"};Mo(e.doc,l),wo(e.doc,Wi(n,$i(l)))}}),a.readAsText(t)}}(i[a],a);else{if(e.state.draggingText&&e.doc.sel.contains(n)>-1)return e.state.draggingText(t),void setTimeout(function(){return e.display.input.focus()},20);try{var l=t.dataTransfer.getData("Text");if(l){var c;if(e.state.draggingText&&!e.state.draggingText.copy&&(c=e.listSelections()),Co(e.doc,Wi(n,n)),c)for(var u=0;u<c.length;++u)Fo(e.doc,"",c[u].anchor,c[u].head,"drag");e.replaceSelection(l,"around","paste"),e.display.input.focus()}}catch(t){}}}}function Qo(t,e){if(ys&&(!t.state.draggingText||+new Date-Ha<100))return void Ot(e);if(!Et(t,e)&&!Ie(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!Ss)){var n=i("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",_s&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),_s&&n.parentNode.removeChild(n)}}function Jo(t,e){var o=kn(t,e);if(o){var r=document.createDocumentFragment();An(t,o,r),t.display.dragCursor||(t.display.dragCursor=i("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),n(t.display.dragCursor,r)}}function tr(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function er(t){if(document.getElementsByClassName)for(var e=document.getElementsByClassName("CodeMirror"),n=0;n<e.length;n++){var i=e[n].CodeMirror;i&&t(i)}}function nr(){Fa||(ir(),Fa=!0)}function ir(){var t;ea(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,er(or)},100))}),ea(window,"blur",function(){return er(Hn)})}function or(t){var e=t.display;e.lastWrapHeight==e.wrapper.clientHeight&&e.lastWrapWidth==e.wrapper.clientWidth||(e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize())}function rr(t){var e=t.split(/-(?!$)/);t=e[e.length-1];for(var n,i,o,r,s=0;s<e.length-1;s++){var a=e[s];if(/^(cmd|meta|m)$/i.test(a))r=!0;else if(/^a(lt)?$/i.test(a))n=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);o=!0}}return n&&(t="Alt-"+t),i&&(t="Ctrl-"+t),r&&(t="Cmd-"+t),o&&(t="Shift-"+t),t}function sr(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete t[n];continue}for(var o=g(n.split(" "),rr),r=0;r<o.length;r++){var s=void 0,a=void 0;r==o.length-1?(a=o.join(" "),s=i):(a=o.slice(0,r+1).join(" "),s="...");var l=e[a];if(l){if(l!=s)throw new Error("Inconsistent bindings for "+a)}else e[a]=s}delete t[n]}for(var c in e)t[c]=e[c];return t}function ar(t,e,n,i){e=hr(e);var o=e.call?e.call(t,i):e[t];if(!1===o)return"nothing";if("..."===o)return"multi";if(null!=o&&n(o))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return ar(t,e.fallthrough,n,i);for(var r=0;r<e.fallthrough.length;r++){var s=ar(t,e.fallthrough[r],n,i);if(s)return s}}}function lr(t){var e="string"==typeof t?t:Ra[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function cr(t,e,n){var i=t;return e.altKey&&"Alt"!=i&&(t="Alt-"+t),(Is?e.metaKey:e.ctrlKey)&&"Ctrl"!=i&&(t="Ctrl-"+t),(Is?e.ctrlKey:e.metaKey)&&"Cmd"!=i&&(t="Cmd-"+t),!n&&e.shiftKey&&"Shift"!=i&&(t="Shift-"+t),t}function ur(t,e){if(_s&&34==t.keyCode&&t.char)return!1;var n=Ra[t.keyCode];return null!=n&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(n=t.code),cr(n,t,e))}function hr(t){return"string"==typeof t?za[t]:t}function dr(t,e){for(var n=t.doc.sel.ranges,i=[],o=0;o<n.length;o++){for(var r=e(n[o]);i.length&&H(r.from,m(i).to)<=0;){var s=i.pop();if(H(s.from,r.from)<0){r.from=s.from;break}}i.push(r)}fi(t,function(){for(var e=i.length-1;e>=0;e--)Fo(t.doc,"",i[e].from,i[e].to,"+delete");Kn(t)})}function fr(t,e,n){var i=S(t.text,e+n,n);return i<0||i>t.text.length?null:i}function pr(t,e,n){var i=fr(t,e.ch,n);return null==i?null:new I(e.line,i,n<0?"after":"before")}function mr(t,e,n,i,o){if(t){var r=_t(n,e.doc.direction);if(r){var s,a=o<0?m(r):r[0],l=o<0==(1==a.level),c=l?"after":"before";if(a.level>0||"rtl"==e.doc.direction){var u=Ke(e,n);s=o<0?n.text.length-1:0;var h=Xe(e,u,s).top;s=k(function(t){return Xe(e,u,t).top==h},o<0==(1==a.level)?a.from:a.to-1,s),"before"==c&&(s=fr(n,s,1))}else s=o<0?a.to:a.from;return new I(i,s,c)}}return new I(i,o<0?n.text.length:0,o<0?"before":"after")}function gr(t,e,n,i){var o=_t(e,t.doc.direction);if(!o)return pr(e,n,i);n.ch>=e.text.length?(n.ch=e.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var r=Ct(o,n.ch,n.sticky),s=o[r];if("ltr"==t.doc.direction&&s.level%2==0&&(i>0?s.to>n.ch:s.from<n.ch))return pr(e,n,i);var a,l=function(t,n){return fr(e,t instanceof I?t.ch:t,n)},c=function(n){return t.options.lineWrapping?(a=a||Ke(t,e),pn(t,e,a,n)):{begin:0,end:e.text.length}},u=c("before"==n.sticky?l(n,-1):n.ch);if("rtl"==t.doc.direction||1==s.level){var h=1==s.level==i<0,d=l(n,h?1:-1);if(null!=d&&(h?d<=s.to&&d<=u.end:d>=s.from&&d>=u.begin)){var f=h?"before":"after";return new I(n.line,d,f)}}var p=function(t,e,i){for(var r=function(t,e){return e?new I(n.line,l(t,1),"before"):new I(n.line,t,"after")};t>=0&&t<o.length;t+=e){var s=o[t],a=e>0==(1!=s.level),c=a?i.begin:l(i.end,-1);if(s.from<=c&&c<s.to)return r(c,a);if(c=a?s.from:l(s.to,-1),i.begin<=c&&c<i.end)return r(c,a)}},m=p(r+i,i,u);if(m)return m;var g=i>0?u.end:l(u.begin,-1);return null==g||i>0&&g==e.text.length||!(m=p(i>0?0:o.length-1,i,c(g)))?null:m}function vr(t,e){var n=E(t.doc,e),i=ht(n);return i!=n&&(e=M(i)),mr(!0,t,i,e,1)}function yr(t,e){var n=E(t.doc,e),i=dt(n);return i!=n&&(e=M(i)),mr(!0,t,n,e,-1)}function br(t,e){var n=vr(t,e.line),i=E(t.doc,n.line),o=_t(i,t.doc.direction);if(!o||0==o[0].level){var r=Math.max(0,i.text.search(/\S/)),s=e.line==n.line&&e.ch<=r&&e.ch;return I(n.line,s?0:r,n.sticky)}return n}function wr(t,e,n){if("string"==typeof e&&!(e=ja[e]))return!1;t.display.input.ensurePolled();var i=t.display.shift,o=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),o=e(t)!=js}finally{t.display.shift=i,t.state.suppressEdits=!1}return o}function xr(t,e,n){for(var i=0;i<t.state.keyMaps.length;i++){var o=ar(e,t.state.keyMaps[i],n,t);if(o)return o}return t.options.extraKeys&&ar(e,t.options.extraKeys,n,t)||ar(e,t.options.keyMap,n,t)}function Cr(t,e,n,i){var o=t.state.keySeq;if(o){if(lr(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:qa.set(50,function(){t.state.keySeq==o&&(t.state.keySeq=null,t.display.input.reset())}),_r(t,o+" "+e,n,i))return!0}return _r(t,e,n,i)}function _r(t,e,n,i){var o=xr(t,e,i);return"multi"==o&&(t.state.keySeq=e),"handled"==o&&we(t,"keyHandled",t,e,n),"handled"!=o&&"multi"!=o||(Mt(n),Nn(t)),!!o}function Sr(t,e){var n=ur(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?Cr(t,"Shift-"+n,e,function(e){return wr(t,e,!0)})||Cr(t,n,e,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return wr(t,e)}):Cr(t,n,e,function(e){return wr(t,e)}))}function kr(t,e,n){return Cr(t,"'"+n+"'",e,function(e){return wr(t,e,!0)})}function Tr(t){var e=this;if(e.curOp.focus=s(),!Et(e,t)){ys&&bs<11&&27==t.keyCode&&(t.returnValue=!1);var n=t.keyCode;e.display.shift=16==n||t.shiftKey;var i=Sr(e,t);_s&&(Ua=i?n:null,!i&&88==n&&!ra&&(Ps?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||Er(e)}}function Er(t){function e(t){18!=t.keyCode&&t.altKey||(Fs(n,"CodeMirror-crosshair"),kt(document,"keyup",e),kt(document,"mouseover",e))}var n=t.display.lineDiv;a(n,"CodeMirror-crosshair"),ea(document,"keyup",e),ea(document,"mouseover",e)}function Lr(t){16==t.keyCode&&(this.doc.sel.shift=!1),Et(this,t)}function Ar(t){var e=this;if(!(Ie(e.display,t)||Et(e,t)||t.ctrlKey&&!t.altKey||Ps&&t.metaKey)){var n=t.keyCode,i=t.charCode;if(_s&&n==Ua)return Ua=null,void Mt(t);if(!_s||t.which&&!(t.which<10)||!Sr(e,t)){var o=String.fromCharCode(null==i?n:i);"\b"!=o&&(kr(e,t,o)||e.display.input.onKeyPress(t))}}}function Pr(t,e){var n=+new Date;return Xa&&Xa.compare(n,t,e)?(Ka=Xa=null,"triple"):Ka&&Ka.compare(n,t,e)?(Xa=new Va(n,t,e),Ka=null,"double"):(Ka=new Va(n,t,e),Xa=null,"single")}function Mr(t){var e=this,n=e.display;if(!(Et(e,t)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=t.shiftKey,Ie(n,t))return void(ws||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100)));if(!Wr(e,t)){var i=kn(e,t),o=Ht(t),r=i?Pr(i,o):"single";window.focus(),1==o&&e.state.selectingText&&e.state.selectingText(t),i&&Nr(e,o,i,r,t)||(1==o?i?Or(e,i,r,t):It(t)==n.scroller&&Mt(t):2==o?(i&&mo(e.doc,i),setTimeout(function(){return n.input.focus()},20)):3==o&&(Hs?$r(e,t):On(e)))}}}function Nr(t,e,n,i,o){var r="Click";return"double"==i?r="Double"+r:"triple"==i&&(r="Triple"+r),r=(1==e?"Left":2==e?"Middle":"Right")+r,Cr(t,cr(r,o),o,function(e){if("string"==typeof e&&(e=ja[e]),!e)return!1;var i=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),i=e(t,n)!=js}finally{t.state.suppressEdits=!1}return i})}function Dr(t,e,n){var i=t.getOption("configureMouse"),o=i?i(t,e,n):{};if(null==o.unit){var r=Ms?n.shiftKey&&n.metaKey:n.altKey;o.unit=r?"rectangle":"single"==e?"char":"double"==e?"word":"line"}return(null==o.extend||t.doc.extend)&&(o.extend=t.doc.extend||n.shiftKey),null==o.addNew&&(o.addNew=Ps?n.metaKey:n.ctrlKey),null==o.moveOnDrag&&(o.moveOnDrag=!(Ps?n.altKey:n.ctrlKey)),o}function Or(t,e,n,i){ys?setTimeout(c(Dn,t),0):t.curOp.focus=s();var o,r=Dr(t,n,i),a=t.doc.sel;t.options.dragDrop&&na&&!t.isReadOnly()&&"single"==n&&(o=a.contains(e))>-1&&(H((o=a.ranges[o]).from(),e)<0||e.xRel>0)&&(H(o.to(),e)>0||e.xRel<0)?Ir(t,i,e,r):Fr(t,i,e,r)}function Ir(t,e,n,i){var o=t.display,r=!1,s=pi(t,function(e){ws&&(o.scroller.draggable=!1),t.state.draggingText=!1,kt(document,"mouseup",s),kt(document,"mousemove",a),kt(o.scroller,"dragstart",l),kt(o.scroller,"drop",s),r||(Mt(e),i.addNew||mo(t.doc,n,null,null,i.extend),ws||ys&&9==bs?setTimeout(function(){document.body.focus(),o.input.focus()},20):o.input.focus())}),a=function(t){r=r||Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)>=10},l=function(){return r=!0};ws&&(o.scroller.draggable=!0),t.state.draggingText=s,s.copy=!i.moveOnDrag,o.scroller.dragDrop&&o.scroller.dragDrop(),ea(document,"mouseup",s),ea(document,"mousemove",a),ea(o.scroller,"dragstart",l),ea(o.scroller,"drop",s),On(t),setTimeout(function(){return o.input.focus()},20)}function Hr(t,e,n){if("char"==n)return new Aa(e,e);if("word"==n)return t.findWordAt(e);if("line"==n)return new Aa(I(e.line,0),z(t.doc,I(e.line+1,0)));var i=n(t,e);return new Aa(i.from,i.to)}function Fr(t,e,n,i){function o(e){if(0!=H(v,e))if(v=e,"rectangle"==i.unit){for(var o=[],r=t.options.tabSize,s=h(E(c,n.line).text,n.ch,r),a=h(E(c,e.line).text,e.ch,r),l=Math.min(s,a),m=Math.max(s,a),g=Math.min(n.line,e.line),y=Math.min(t.lastLine(),Math.max(n.line,e.line));g<=y;g++){var b=E(c,g).text,w=f(b,l,r);l==m?o.push(new Aa(I(g,w),I(g,w))):b.length>w&&o.push(new Aa(I(g,w),I(g,f(b,m,r))))}o.length||o.push(new Aa(n,n)),xo(c,Bi(p.ranges.slice(0,d).concat(o),d),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var x,C=u,_=Hr(t,e,i.unit),S=C.anchor;H(_.anchor,S)>0?(x=_.head,S=W(C.from(),_.anchor)):(x=_.anchor,S=B(C.to(),_.head));var k=p.ranges.slice(0);k[d]=Rr(t,new Aa(z(c,S),x)),xo(c,Bi(k,d),Us)}}function r(e){var n=++b,a=kn(t,e,!0,"rectangle"==i.unit);if(a)if(0!=H(a,v)){t.curOp.focus=s(),o(a);var u=Bn(l,c);(a.line>=u.to||a.line<u.from)&&setTimeout(pi(t,function(){b==n&&r(e)}),150)}else{var h=e.clientY<y.top?-20:e.clientY>y.bottom?20:0;h&&setTimeout(pi(t,function(){b==n&&(l.scroller.scrollTop+=h,r(e))}),50)}}function a(e){t.state.selectingText=!1,b=1/0,Mt(e),l.input.focus(),kt(document,"mousemove",w),kt(document,"mouseup",x),c.history.lastSelOrigin=null}var l=t.display,c=t.doc;Mt(e);var u,d,p=c.sel,m=p.ranges;if(i.addNew&&!i.extend?(d=c.sel.contains(n),u=d>-1?m[d]:new Aa(n,n)):(u=c.sel.primary(),d=c.sel.primIndex),"rectangle"==i.unit)i.addNew||(u=new Aa(n,n)),n=kn(t,e,!0,!0),d=-1;else{var g=Hr(t,n,i.unit);u=i.extend?po(u,g.anchor,g.head,i.extend):g}i.addNew?-1==d?(d=m.length,xo(c,Bi(m.concat([u]),d),{scroll:!1,origin:"*mouse"})):m.length>1&&m[d].empty()&&"char"==i.unit&&!i.extend?(xo(c,Bi(m.slice(0,d).concat(m.slice(d+1)),0),{scroll:!1,origin:"*mouse"}),p=c.sel):vo(c,d,u,Us):(d=0,xo(c,new La([u],0),Us),p=c.sel);var v=n,y=l.wrapper.getBoundingClientRect(),b=0,w=pi(t,function(t){Ht(t)?r(t):a(t)}),x=pi(t,a);t.state.selectingText=x,ea(document,"mousemove",w),ea(document,"mouseup",x)}function Rr(t,e){var n=e.anchor,i=e.head,o=E(t.doc,n.line);if(0==H(n,i)&&n.sticky==i.sticky)return e;var r=_t(o);if(!r)return e;var s=Ct(r,n.ch,n.sticky),a=r[s];if(a.from!=n.ch&&a.to!=n.ch)return e;var l=s+(a.from==n.ch==(1!=a.level)?0:1);if(0==l||l==r.length)return e;var c;if(i.line!=n.line)c=(i.line-n.line)*("ltr"==t.doc.direction?1:-1)>0;else{var u=Ct(r,i.ch,i.sticky),h=u-s||(i.ch-n.ch)*(1==a.level?-1:1);c=u==l-1||u==l?h<0:h>0}var d=r[l+(c?-1:0)],f=c==(1==d.level),p=f?d.from:d.to,m=f?"after":"before";return n.ch==p&&n.sticky==m?e:new Aa(new I(n.line,p,m),i)}function Br(t,e,n,i){var o,r;if(e.touches)o=e.touches[0].clientX,r=e.touches[0].clientY;else try{o=e.clientX,r=e.clientY}catch(e){return!1}if(o>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;i&&Mt(e);var s=t.display,a=s.lineDiv.getBoundingClientRect();if(r>a.bottom||!At(t,n))return Dt(e);r-=a.top-s.viewOffset;for(var l=0;l<t.options.gutters.length;++l){var c=s.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=o){return Tt(t,n,t,N(t.doc,r),t.options.gutters[l],e),Dt(e)}}}function Wr(t,e){return Br(t,e,"gutterClick",!0)}function $r(t,e){Ie(t.display,e)||zr(t,e)||Et(t,e,"contextmenu")||t.display.input.onContextMenu(e)}function zr(t,e){return!!At(t,"gutterContextMenu")&&Br(t,e,"gutterContextMenu",!1)}function jr(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),en(t)}function qr(t){Oi(t),vi(t),Wn(t)}function Ur(t,e,n){if(!e!=!(n&&n!=Ya)){var i=t.display.dragFunctions,o=e?ea:kt;o(t.display.scroller,"dragstart",i.start),o(t.display.scroller,"dragenter",i.enter),o(t.display.scroller,"dragover",i.over),o(t.display.scroller,"dragleave",i.leave),o(t.display.scroller,"drop",i.drop)}}function Vr(t){t.options.lineWrapping?(a(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(Fs(t.display.wrapper,"CodeMirror-wrap"),wt(t)),Sn(t),vi(t),en(t),setTimeout(function(){return ni(t)},100)}function Kr(t,e){var n=this;if(!(this instanceof Kr))return new Kr(t,e);this.options=e=e?u(e):{},u(Ga,e,!1),Ii(e);var i=e.value;"string"==typeof i&&(i=new Ia(i,e.mode,null,e.lineSeparator,e.direction)),this.doc=i;var o=new Kr.inputStyles[e.inputStyle](this),r=this.display=new T(t,i,o);r.wrapper.CodeMirror=this,Oi(this),jr(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),oi(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Bs,keySeq:null,specialChars:null},e.autofocus&&!As&&r.input.focus(),ys&&bs<11&&setTimeout(function(){return n.display.input.reset(!0)},20),Xr(this),nr(),ri(this),this.curOp.forceUpdate=!0,Zi(this,i),e.autofocus&&!As||this.hasFocus()?setTimeout(c(In,this),20):Hn(this);for(var s in Za)Za.hasOwnProperty(s)&&Za[s](n,e[s],Ya);$n(this),e.finishInit&&e.finishInit(this);for(var a=0;a<Qa.length;++a)Qa[a](n);si(this),ws&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(r.lineDiv).textRendering&&(r.lineDiv.style.textRendering="auto")}function Xr(t){function e(){o.activeTouch&&(r=setTimeout(function(){return o.activeTouch=null},1e3),s=o.activeTouch,s.end=+new Date)}function n(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}function i(t,e){if(null==e.left)return!0;var n=e.left-t.left,i=e.top-t.top;return n*n+i*i>400}var o=t.display;ea(o.scroller,"mousedown",pi(t,Mr)),ys&&bs<11?ea(o.scroller,"dblclick",pi(t,function(e){if(!Et(t,e)){var n=kn(t,e);if(n&&!Wr(t,e)&&!Ie(t.display,e)){Mt(e);var i=t.findWordAt(n);mo(t.doc,i.anchor,i.head)}}})):ea(o.scroller,"dblclick",function(e){return Et(t,e)||Mt(e)}),Hs||ea(o.scroller,"contextmenu",function(e){return $r(t,e)});var r,s={end:0};ea(o.scroller,"touchstart",function(e){if(!Et(t,e)&&!n(e)&&!Wr(t,e)){o.input.ensurePolled(),clearTimeout(r);var i=+new Date;o.activeTouch={start:i,moved:!1,prev:i-s.end<=300?s:null},1==e.touches.length&&(o.activeTouch.left=e.touches[0].pageX,o.activeTouch.top=e.touches[0].pageY)}}),ea(o.scroller,"touchmove",function(){o.activeTouch&&(o.activeTouch.moved=!0)}),ea(o.scroller,"touchend",function(n){var r=o.activeTouch;if(r&&!Ie(o,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var s,a=t.coordsChar(o.activeTouch,"page");s=!r.prev||i(r,r.prev)?new Aa(a,a):!r.prev.prev||i(r,r.prev.prev)?t.findWordAt(a):new Aa(I(a.line,0),z(t.doc,I(a.line+1,0))),t.setSelection(s.anchor,s.head),t.focus(),Mt(n)}e()}),ea(o.scroller,"touchcancel",e),ea(o.scroller,"scroll",function(){o.scroller.clientHeight&&(Qn(t,o.scroller.scrollTop),ti(t,o.scroller.scrollLeft,!0),Tt(t,"scroll",t))}),ea(o.scroller,"mousewheel",function(e){return Ri(t,e)}),ea(o.scroller,"DOMMouseScroll",function(e){return Ri(t,e)}),ea(o.wrapper,"scroll",function(){return o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),o.dragFunctions={enter:function(e){Et(t,e)||Ot(e)},over:function(e){Et(t,e)||(Jo(t,e),Ot(e))},start:function(e){return Qo(t,e)},drop:pi(t,Zo),leave:function(e){Et(t,e)||tr(t)}};var a=o.input.getField();ea(a,"keyup",function(e){return Lr.call(t,e)}),ea(a,"keydown",pi(t,Tr)),ea(a,"keypress",pi(t,Ar)),ea(a,"focus",function(e){return In(t,e)}),ea(a,"blur",function(e){return Hn(t,e)})}function Yr(t,e,n,i){var o,r=t.doc;null==n&&(n="add"),"smart"==n&&(r.mode.indent?o=Gt(t,e).state:n="prev");var s=t.options.tabSize,a=E(r,e),l=h(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(i||/\S/.test(a.text)){if("smart"==n&&((c=r.mode.indent(o,a.text.slice(u.length),a.text))==js||c>150)){if(!i)return;n="prev"}}else c=0,n="not";"prev"==n?c=e>r.first?h(E(r,e-1).text,null,s):0:"add"==n?c=l+t.options.indentUnit:"subtract"==n?c=l-t.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var d="",f=0;if(t.options.indentWithTabs)for(var m=Math.floor(c/s);m;--m)f+=s,d+="\t";if(f<c&&(d+=p(c-f)),d!=u)return Fo(r,d,I(e,0),I(e,u.length),"+input"),a.stateAfter=null,!0;for(var g=0;g<r.sel.ranges.length;g++){var v=r.sel.ranges[g];if(v.head.line==e&&v.head.ch<u.length){var y=I(e,u.length);vo(r,g,new Aa(y,y));break}}}function Gr(t){Ja=t}function Zr(t,e,n,i,o){var r=t.doc;t.display.shift=!1,i||(i=r.sel);var s=t.state.pasteIncoming||"paste"==o,a=ia(e),l=null;if(s&&i.ranges.length>1)if(Ja&&Ja.text.join("\n")==e){if(i.ranges.length%Ja.text.length==0){l=[];for(var c=0;c<Ja.text.length;c++)l.push(r.splitLines(Ja.text[c]))}}else a.length==i.ranges.length&&t.options.pasteLinesPerSelection&&(l=g(a,function(t){return[t]}));for(var u,h=i.ranges.length-1;h>=0;h--){var d=i.ranges[h],f=d.from(),p=d.to();d.empty()&&(n&&n>0?f=I(f.line,f.ch-n):t.state.overwrite&&!s?p=I(p.line,Math.min(E(r,p.line).text.length,p.ch+m(a).length)):Ja&&Ja.lineWise&&Ja.text.join("\n")==e&&(f=p=I(f.line,0))),u=t.curOp.updateInput;var v={from:f,to:p,text:l?l[h%l.length]:a,origin:o||(s?"paste":t.state.cutIncoming?"cut":"+input")};Mo(t.doc,v),we(t,"inputRead",t,v)}e&&!s&&Jr(t,e),Kn(t),t.curOp.updateInput=u,t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=!1}function Qr(t,e){var n=t.clipboardData&&t.clipboardData.getData("Text");if(n)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||fi(e,function(){return Zr(e,n,0,null,"paste")}),!0}function Jr(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var n=t.doc.sel,i=n.ranges.length-1;i>=0;i--){var o=n.ranges[i];if(!(o.head.ch>100||i&&n.ranges[i-1].head.line==o.head.line)){var r=t.getModeAt(o.head),s=!1;if(r.electricChars){for(var a=0;a<r.electricChars.length;a++)if(e.indexOf(r.electricChars.charAt(a))>-1){s=Yr(t,o.head.line,"smart");break}}else r.electricInput&&r.electricInput.test(E(t.doc,o.head.line).text.slice(0,o.head.ch))&&(s=Yr(t,o.head.line,"smart"));s&&we(t,"electricInput",t,o.head.line)}}}function ts(t){for(var e=[],n=[],i=0;i<t.doc.sel.ranges.length;i++){var o=t.doc.sel.ranges[i].head.line,r={anchor:I(o,0),head:I(o+1,0)};n.push(r),e.push(t.getRange(r.anchor,r.head))}return{text:e,ranges:n}}function es(t,e){t.setAttribute("autocorrect","off"),t.setAttribute("autocapitalize","off"),t.setAttribute("spellcheck",!!e)}function ns(){var t=i("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),e=i("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return ws?t.style.width="1000px":t.setAttribute("wrap","off"),Es&&(t.style.border="1px solid black"),es(t),e}function is(t,e,n,i,o){function r(){var i=e.line+n;return!(i<t.first||i>=t.first+t.size)&&(e=new I(i,e.ch,e.sticky),c=E(t,i))}function s(i){var s;if(null==(s=o?gr(t.cm,c,e,n):pr(c,e,n))){if(i||!r())return!1;e=mr(o,t.cm,c,e.line,n)}else e=s;return!0}var a=e,l=n,c=E(t,e.line);if("char"==i)s();else if("column"==i)s(!0);else if("word"==i||"group"==i)for(var u=null,h="group"==i,d=t.cm&&t.cm.getHelper(e,"wordChars"),f=!0;!(n<0)||s(!f);f=!1){var p=c.text.charAt(e.ch)||"\n",m=x(p,d)?"w":h&&"\n"==p?"n":!h||/\s/.test(p)?null:"p";if(!h||f||m||(m="s"),u&&u!=m){n<0&&(n=1,s(),e.sticky="after");break}if(m&&(u=m),n>0&&!s(!f))break}var g=Eo(t,e,a,l,!0);return F(a,g)&&(g.hitSide=!0),g}function os(t,e,n,i){var o,r=t.doc,s=e.left;if("page"==i){var a=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),l=Math.max(a-.5*bn(t.display),3);o=(n>0?e.bottom:e.top)+n*l}else"line"==i&&(o=n>0?e.bottom+3:e.top-3);for(var c;c=dn(t,s,o),c.outside;){if(n<0?o<=0:o>=r.height){c.hitSide=!0;break}o+=5*n}return c}function rs(t,e){var n=Ve(t,e.line);if(!n||n.hidden)return null;var i=E(t.doc,e.line),o=je(n,i,e.line),r=_t(i,t.doc.direction),s="left";if(r){s=Ct(r,e.ch)%2?"right":"left"}var a=Ye(o.map,e.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function ss(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}function as(t,e){return e&&(t.bad=!0),t}function ls(t,e,n,i,o){function r(t){return function(e){return e.id==t}}function s(){u&&(c+=h,u=!1)}function a(t){t&&(s(),c+=t)}function l(e){if(1==e.nodeType){var n=e.getAttribute("cm-text");if(null!=n)return void a(n||e.textContent.replace(/\u200b/g,""));var c,d=e.getAttribute("cm-marker");if(d){var f=t.findMarks(I(i,0),I(o+1,0),r(+d));return void(f.length&&(c=f[0].find(0))&&a(L(t.doc,c.from,c.to).join(h)))}if("false"==e.getAttribute("contenteditable"))return;var p=/^(pre|div|p)$/i.test(e.nodeName);p&&s();for(var m=0;m<e.childNodes.length;m++)l(e.childNodes[m]);p&&(u=!0)}else 3==e.nodeType&&a(e.nodeValue)}for(var c="",u=!1,h=t.doc.lineSeparator();l(e),e!=n;)e=e.nextSibling;return c}function cs(t,e,n){var i;if(e==t.display.lineDiv){if(!(i=t.display.lineDiv.childNodes[n]))return as(t.clipPos(I(t.display.viewTo-1)),!0);e=null,n=0}else for(i=e;;i=i.parentNode){if(!i||i==t.display.lineDiv)return null;if(i.parentNode&&i.parentNode==t.display.lineDiv)break}for(var o=0;o<t.display.view.length;o++){var r=t.display.view[o];if(r.node==i)return us(r,e,n)}}function us(t,e,n){function i(e,n,i){for(var o=-1;o<(h?h.length:0);o++)for(var r=o<0?u.map:h[o],s=0;s<r.length;s+=3){var a=r[s+2];if(a==e||a==n){var l=M(o<0?t.line:t.rest[o]),c=r[s]+i;return(i<0||a!=e)&&(c=r[s+(i?1:0)]),I(l,c)}}}var o=t.text.firstChild,s=!1;if(!e||!r(o,e))return as(I(M(t.line),0),!0);if(e==o&&(s=!0,e=o.childNodes[n],n=0,!e)){var a=t.rest?m(t.rest):t.line;return as(I(M(a),a.text.length),s)}var l=3==e.nodeType?e:null,c=e;for(l||1!=e.childNodes.length||3!=e.firstChild.nodeType||(l=e.firstChild,n&&(n=l.nodeValue.length));c.parentNode!=o;)c=c.parentNode;var u=t.measure,h=u.maps,d=i(l,c,n);if(d)return as(d,s);for(var f=c.nextSibling,p=l?l.nodeValue.length-n:0;f;f=f.nextSibling){if(d=i(f,f.firstChild,0))return as(I(d.line,d.ch-p),s);p+=f.textContent.length}for(var g=c.previousSibling,v=n;g;g=g.previousSibling){if(d=i(g,g.firstChild,-1))return as(I(d.line,d.ch+v),s);v+=g.textContent.length}}function hs(t,e){function n(){t.value=l.getValue()}if(e=e?u(e):{},e.value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var i=s();e.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}var o;if(t.form&&(ea(t.form,"submit",n),!e.leaveSubmitMethodAlone)){var r=t.form;o=r.submit;try{var a=r.submit=function(){n(),r.submit=o,r.submit(),r.submit=a}}catch(t){}}e.finishInit=function(e){e.save=n,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,n(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(kt(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=o))}},t.style.display="none";var l=Kr(function(e){return t.parentNode.insertBefore(e,t.nextSibling)},e);return l}var ds=navigator.userAgent,fs=navigator.platform,ps=/gecko\/\d/i.test(ds),ms=/MSIE \d/.test(ds),gs=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ds),vs=/Edge\/(\d+)/.exec(ds),ys=ms||gs||vs,bs=ys&&(ms?document.documentMode||6:+(vs||gs)[1]),ws=!vs&&/WebKit\//.test(ds),xs=ws&&/Qt\/\d+\.\d+/.test(ds),Cs=!vs&&/Chrome\//.test(ds),_s=/Opera\//.test(ds),Ss=/Apple Computer/.test(navigator.vendor),ks=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ds),Ts=/PhantomJS/.test(ds),Es=!vs&&/AppleWebKit/.test(ds)&&/Mobile\/\w+/.test(ds),Ls=/Android/.test(ds),As=Es||Ls||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ds),Ps=Es||/Mac/.test(fs),Ms=/\bCrOS\b/.test(ds),Ns=/win/i.test(fs),Ds=_s&&ds.match(/Version\/(\d*\.\d*)/);Ds&&(Ds=Number(Ds[1])),Ds&&Ds>=15&&(_s=!1,ws=!0);var Os,Is=Ps&&(xs||_s&&(null==Ds||Ds<12.11)),Hs=ps||ys&&bs>=9,Fs=function(e,n){var i=e.className,o=t(n).exec(i);if(o){var r=i.slice(o.index+o[0].length);e.className=i.slice(0,o.index)+(r?o[1]+r:"")}};Os=document.createRange?function(t,e,n,i){var o=document.createRange();return o.setEnd(i||t,n),o.setStart(t,e),o}:function(t,e,n){var i=document.body.createTextRange();try{i.moveToElementText(t.parentNode)}catch(t){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",e),i};var Rs=function(t){t.select()};Es?Rs=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:ys&&(Rs=function(t){try{t.select()}catch(t){}});var Bs=function(){this.id=null};Bs.prototype.set=function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)};var Ws,$s,zs=30,js={toString:function(){return"CodeMirror.Pass"}},qs={scroll:!1},Us={origin:"*mouse"},Vs={origin:"+move"},Ks=[""],Xs=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ys=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,Gs=!1,Zs=!1,Qs=null,Js=function(){function t(t){return t<=247?n.charAt(t):1424<=t&&t<=1524?"R":1536<=t&&t<=1785?i.charAt(t-1536):1774<=t&&t<=2220?"r":8192<=t&&t<=8203?"w":8204==t?"b":"L"}function e(t,e,n){this.level=t,this.from=e,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",i="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,s=/[LRr]/,a=/[Lb1n]/,l=/[1n]/;return function(n,i){var c="ltr"==i?"L":"R";if(0==n.length||"ltr"==i&&!o.test(n))return!1;for(var u=n.length,h=[],d=0;d<u;++d)h.push(t(n.charCodeAt(d)));for(var f=0,p=c;f<u;++f){var g=h[f];"m"==g?h[f]=p:p=g}for(var v=0,y=c;v<u;++v){var b=h[v];"1"==b&&"r"==y?h[v]="n":s.test(b)&&(y=b,"r"==b&&(h[v]="R"))}for(var w=1,x=h[0];w<u-1;++w){var C=h[w];"+"==C&&"1"==x&&"1"==h[w+1]?h[w]="1":","!=C||x!=h[w+1]||"1"!=x&&"n"!=x||(h[w]=x),x=C}for(var _=0;_<u;++_){var S=h[_];if(","==S)h[_]="N";else if("%"==S){var k=void 0;for(k=_+1;k<u&&"%"==h[k];++k);for(var T=_&&"!"==h[_-1]||k<u&&"1"==h[k]?"1":"N",E=_;E<k;++E)h[E]=T;_=k-1}}for(var L=0,A=c;L<u;++L){var P=h[L];"L"==A&&"1"==P?h[L]="L":s.test(P)&&(A=P)}for(var M=0;M<u;++M)if(r.test(h[M])){var N=void 0;for(N=M+1;N<u&&r.test(h[N]);++N);for(var D="L"==(M?h[M-1]:c),O="L"==(N<u?h[N]:c),I=D==O?D?"L":"R":c,H=M;H<N;++H)h[H]=I;M=N-1}for(var F,R=[],B=0;B<u;)if(a.test(h[B])){var W=B;for(++B;B<u&&a.test(h[B]);++B);R.push(new e(0,W,B))}else{var $=B,z=R.length;for(++B;B<u&&"L"!=h[B];++B);for(var j=$;j<B;)if(l.test(h[j])){$<j&&R.splice(z,0,new e(1,$,j));var q=j;for(++j;j<B&&l.test(h[j]);++j);R.splice(z,0,new e(2,q,j)),$=j}else++j;$<B&&R.splice(z,0,new e(1,$,B))}return"ltr"==i&&(1==R[0].level&&(F=n.match(/^\s+/))&&(R[0].from=F[0].length,R.unshift(new e(0,0,F[0].length))),1==m(R).level&&(F=n.match(/\s+$/))&&(m(R).to-=F[0].length,R.push(new e(0,u-F[0].length,u)))),"rtl"==i?R.reverse():R}}(),ta=[],ea=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var i=t._handlers||(t._handlers={});i[e]=(i[e]||ta).concat(n)}},na=function(){if(ys&&bs<9)return!1;var t=i("div");return"draggable"in t||"dragDrop"in t}(),ia=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],i=t.length;e<=i;){var o=t.indexOf("\n",e);-1==o&&(o=t.length);var r=t.slice(e,"\r"==t.charAt(o-1)?o-1:o),s=r.indexOf("\r");-1!=s?(n.push(r.slice(0,s)),e+=s+1):(n.push(r),e=o+1)}return n}:function(t){return t.split(/\r\n?|\n/)},oa=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},ra=function(){var t=i("div");return"oncopy"in t||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),sa=null,aa={},la={},ca={},ua=function(t,e,n){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};ua.prototype.eol=function(){return this.pos>=this.string.length},ua.prototype.sol=function(){return this.pos==this.lineStart},ua.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ua.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ua.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},ua.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},ua.prototype.eatSpace=function(){for(var t=this,e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++t.pos;return this.pos>e},ua.prototype.skipToEnd=function(){this.pos=this.string.length},ua.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},ua.prototype.backUp=function(t){this.pos-=t},ua.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=h(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?h(this.string,this.lineStart,this.tabSize):0)},ua.prototype.indentation=function(){return h(this.string,null,this.tabSize)-(this.lineStart?h(this.string,this.lineStart,this.tabSize):0)},ua.prototype.match=function(t,e,n){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&!1!==e&&(this.pos+=i[0].length),i)}var o=function(t){return n?t.toLowerCase():t};if(o(this.string.substr(this.pos,t.length))==o(t))return!1!==e&&(this.pos+=t.length),!0},ua.prototype.current=function(){return this.string.slice(this.start,this.pos)},ua.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},ua.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},ua.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var ha=function(t,e){this.state=t,this.lookAhead=e},da=function(t,e,n,i){this.state=e,this.doc=t,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};da.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},da.prototype.baseToken=function(t){var e=this;if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)e.baseTokenPos+=2;var n=this.baseTokens[this.baseTokenPos+1];return{type:n&&n.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},da.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},da.fromSaved=function(t,e,n){return e instanceof ha?new da(t,Ut(t.mode,e.state),n,e.lookAhead):new da(t,Ut(t.mode,e),n)},da.prototype.save=function(t){var e=!1!==t?Ut(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ha(e,this.maxLookAhead):e};var fa=function(t,e,n){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=n},pa=function(t,e,n){this.text=t,it(this,e),this.height=n?n(this):1};pa.prototype.lineNo=function(){return M(this)},Pt(pa);var ma,ga={},va={},ya=null,ba=null,wa={left:0,right:0,top:0,bottom:0},xa=function(t,e,n){this.cm=n;var o=this.vert=i("div",[i("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=i("div",[i("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");t(o),t(r),ea(o,"scroll",function(){o.clientHeight&&e(o.scrollTop,"vertical")}),ea(r,"scroll",function(){r.clientWidth&&e(r.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,ys&&bs<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};xa.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,n=t.scrollHeight>t.clientHeight+1,i=t.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=e?i+"px":"0";var o=t.viewHeight-(e?i:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+o)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=t.barLeft+"px";var r=t.viewWidth-t.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+r)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:e?i:0}},xa.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},xa.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},xa.prototype.zeroWidthHack=function(){var t=Ps&&!ks?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Bs,this.disableVert=new Bs},xa.prototype.enableZeroWidthBar=function(t,e,n){function i(){var o=t.getBoundingClientRect();("vert"==n?document.elementFromPoint(o.right-1,(o.top+o.bottom)/2):document.elementFromPoint((o.right+o.left)/2,o.bottom-1))!=t?t.style.pointerEvents="none":e.set(1e3,i)}t.style.pointerEvents="auto",e.set(1e3,i)},xa.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var Ca=function(){};Ca.prototype.update=function(){return{bottom:0,right:0}},Ca.prototype.setScrollLeft=function(){},Ca.prototype.setScrollTop=function(){},Ca.prototype.clear=function(){};var _a={native:xa,null:Ca},Sa=0,ka=function(t,e,n){var i=t.display;this.viewport=e,this.visible=Bn(i,t.doc,e),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=We(t),this.force=n,this.dims=xn(t),this.events=[]};ka.prototype.signal=function(t,e){At(t,e)&&this.events.push(arguments)},ka.prototype.finish=function(){for(var t=this,e=0;e<this.events.length;e++)Tt.apply(null,t.events[e])};var Ta=0,Ea=null;ys?Ea=-.53:ps?Ea=15:Cs?Ea=-.7:Ss&&(Ea=-1/3);var La=function(t,e){this.ranges=t,this.primIndex=e};La.prototype.primary=function(){return this.ranges[this.primIndex]},La.prototype.equals=function(t){var e=this;if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var n=0;n<this.ranges.length;n++){var i=e.ranges[n],o=t.ranges[n];if(!F(i.anchor,o.anchor)||!F(i.head,o.head))return!1}return!0},La.prototype.deepCopy=function(){for(var t=this,e=[],n=0;n<this.ranges.length;n++)e[n]=new Aa(R(t.ranges[n].anchor),R(t.ranges[n].head));return new La(e,this.primIndex)},La.prototype.somethingSelected=function(){for(var t=this,e=0;e<this.ranges.length;e++)if(!t.ranges[e].empty())return!0;return!1},La.prototype.contains=function(t,e){var n=this;e||(e=t);for(var i=0;i<this.ranges.length;i++){var o=n.ranges[i];if(H(e,o.from())>=0&&H(t,o.to())<=0)return i}return-1};var Aa=function(t,e){this.anchor=t,this.head=e};Aa.prototype.from=function(){return W(this.anchor,this.head)},Aa.prototype.to=function(){return B(this.anchor,this.head)},Aa.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},zo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=this,i=t,o=t+e;i<o;++i){var r=n.lines[i];n.height-=r.height,se(r),we(r,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,n){var i=this;this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var o=0;o<e.length;++o)e[o].parent=i},iterN:function(t,e,n){for(var i=this,o=t+e;t<o;++t)if(n(i.lines[t]))return!0}},jo.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){var n=this;this.size-=e;for(var i=0;i<this.children.length;++i){var o=n.children[i],r=o.chunkSize();if(t<r){var s=Math.min(e,r-t),a=o.height;if(o.removeInner(t,s),n.height-=a-o.height,r==s&&(n.children.splice(i--,1),o.parent=null),0==(e-=s))break;t=0}else t-=r}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof zo))){var l=[];this.collapse(l),this.children=[new zo(l)],this.children[0].parent=this}},collapse:function(t){for(var e=this,n=0;n<this.children.length;++n)e.children[n].collapse(t)},insertInner:function(t,e,n){var i=this;this.size+=e.length,this.height+=n;for(var o=0;o<this.children.length;++o){var r=i.children[o],s=r.chunkSize();if(t<=s){if(r.insertInner(t,e,n),r.lines&&r.lines.length>50){for(var a=r.lines.length%25+25,l=a;l<r.lines.length;){var c=new zo(r.lines.slice(l,l+=25));r.height-=c.height,i.children.splice(++o,0,c),c.parent=i}r.lines=r.lines.slice(0,a),i.maybeSpill()}break}t-=s}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),n=new jo(e);if(t.parent){t.size-=n.size,t.height-=n.height;var i=d(t.parent.children,t);t.parent.children.splice(i+1,0,n)}else{var o=new jo(t.children);o.parent=t,t.children=[o,n],t=o}n.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var i=this,o=0;o<this.children.length;++o){var r=i.children[o],s=r.chunkSize();if(t<s){var a=Math.min(e,s-t);if(r.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=s}}};var Pa=function(t,e,n){var i=this;if(n)for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);this.doc=t,this.node=e};Pa.prototype.clear=function(){var t=this,e=this.doc.cm,n=this.line.widgets,i=this.line,o=M(i);if(null!=o&&n){for(var r=0;r<n.length;++r)n[r]==t&&n.splice(r--,1);n.length||(i.widgets=null);var s=Oe(this);P(i,Math.max(0,i.height-s)),e&&(fi(e,function(){qo(e,i,-s),yi(e,o,"widget")}),we(e,"lineWidgetCleared",e,this,o))}},Pa.prototype.changed=function(){var t=this,e=this.height,n=this.doc.cm,i=this.line;this.height=null;var o=Oe(this)-e;o&&(P(i,i.height+o),n&&fi(n,function(){n.curOp.forceUpdate=!0,qo(n,i,o),we(n,"lineWidgetChanged",n,t,M(i))}))},Pt(Pa);var Ma=0,Na=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++Ma};Na.prototype.clear=function(){var t=this;if(!this.explicitlyCleared){var e=this.doc.cm,n=e&&!e.curOp;if(n&&ri(e),At(this,"clear")){var i=this.find();i&&we(this,"clear",i.from,i.to)}for(var o=null,r=null,s=0;s<this.lines.length;++s){var a=t.lines[s],l=X(a.markedSpans,t);e&&!t.collapsed?yi(e,M(a),"text"):e&&(null!=l.to&&(r=M(a)),null!=l.from&&(o=M(a))),a.markedSpans=Y(a.markedSpans,l),null==l.from&&t.collapsed&&!gt(t.doc,a)&&e&&P(a,bn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var c=0;c<this.lines.length;++c){var u=ht(t.lines[c]),h=bt(u);h>e.display.maxLineLength&&(e.display.maxLine=u,e.display.maxLineLength=h,e.display.maxLineChanged=!0)}null!=o&&e&&this.collapsed&&vi(e,o,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&So(e.doc)),e&&we(e,"markerCleared",e,this,o,r),n&&si(e),this.parent&&this.parent.clear()}},Na.prototype.find=function(t,e){var n=this;null==t&&"bookmark"==this.type&&(t=1);for(var i,o,r=0;r<this.lines.length;++r){var s=n.lines[r],a=X(s.markedSpans,n);if(null!=a.from&&(i=I(e?s:M(s),a.from),-1==t))return i;if(null!=a.to&&(o=I(e?s:M(s),a.to),1==t))return o}return i&&{from:i,to:o}},Na.prototype.changed=function(){var t=this,e=this.find(-1,!0),n=this,i=this.doc.cm;e&&i&&fi(i,function(){var o=e.line,r=M(e.line),s=Ve(i,r);if(s&&(Je(s),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!gt(n.doc,o)&&null!=n.height){var a=n.height;n.height=null;var l=Oe(n)-a;l&&P(o,o.height+l)}we(i,"markerChanged",i,t)})},Na.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=d(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Na.prototype.detachLine=function(t){if(this.lines.splice(d(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},Pt(Na);var Da=function(t,e){var n=this;this.markers=t,this.primary=e;for(var i=0;i<t.length;++i)t[i].parent=n};Da.prototype.clear=function(){var t=this;if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)t.markers[e].clear();we(this,"clear")}},Da.prototype.find=function(t,e){return this.primary.find(t,e)},Pt(Da);var Oa=0,Ia=function(t,e,n,i,o){if(!(this instanceof Ia))return new Ia(t,e,n,i,o);null==n&&(n=0),jo.call(this,[new zo([new pa("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var r=I(n,0);this.sel=Wi(r),this.history=new to(null),this.id=++Oa,this.modeOption=e,this.lineSep=i,this.direction="rtl"==o?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Yi(this,{from:r,to:r,text:t}),xo(this,Wi(r),qs)};Ia.prototype=b(jo.prototype,{constructor:Ia,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,i=0;i<e.length;++i)n+=e[i].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=A(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:gi(function(t){var e=I(this.first,0),n=this.first+this.size-1;Mo(this,{from:e,to:I(n,E(this,n).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Xn(this.cm,0,0),xo(this,Wi(e),qs)}),replaceRange:function(t,e,n,i){e=z(this,e),n=n?z(this,n):e,Fo(this,t,e,n,i)},getRange:function(t,e,n){var i=L(this,z(this,t),z(this,e));return!1===n?i:i.join(n||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(D(this,t))return E(this,t)},getLineNumber:function(t){return M(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=E(this,t)),ht(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return z(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:gi(function(t,e,n){yo(this,z(this,"number"==typeof t?I(t,e||0):t),null,n)}),setSelection:gi(function(t,e,n){yo(this,z(this,t),z(this,e||t),n)}),extendSelection:gi(function(t,e,n){mo(this,z(this,t),e&&z(this,e),n)}),extendSelections:gi(function(t,e){go(this,q(this,t),e)}),extendSelectionsBy:gi(function(t,e){go(this,q(this,g(this.sel.ranges,t)),e)}),setSelections:gi(function(t,e,n){var i=this;if(t.length){for(var o=[],r=0;r<t.length;r++)o[r]=new Aa(z(i,t[r].anchor),z(i,t[r].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),xo(this,Bi(o,e),n)}}),addSelection:gi(function(t,e,n){var i=this.sel.ranges.slice(0);i.push(new Aa(z(this,t),z(this,e||t))),xo(this,Bi(i,i.length-1),n)}),getSelection:function(t){for(var e,n=this,i=this.sel.ranges,o=0;o<i.length;o++){var r=L(n,i[o].from(),i[o].to());e=e?e.concat(r):r}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=this,n=[],i=this.sel.ranges,o=0;o<i.length;o++){var r=L(e,i[o].from(),i[o].to());!1!==t&&(r=r.join(t||e.lineSeparator())),n[o]=r}return n},replaceSelection:function(t,e,n){for(var i=[],o=0;o<this.sel.ranges.length;o++)i[o]=t;this.replaceSelections(i,e,n||"+input")},replaceSelections:gi(function(t,e,n){for(var i=this,o=[],r=this.sel,s=0;s<r.ranges.length;s++){var a=r.ranges[s];o[s]={from:a.from(),to:a.to(),text:i.splitLines(t[s]),origin:n}}for(var l=e&&"end"!=e&&Ui(this,o,e),c=o.length-1;c>=0;c--)Mo(i,o[c]);l?wo(this,l):this.cm&&Kn(this.cm)}),undo:gi(function(){Do(this,"undo")}),redo:gi(function(){Do(this,"redo")}),undoSelection:gi(function(){Do(this,"undo",!0)}),redoSelection:gi(function(){Do(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,i=0;i<t.done.length;i++)t.done[i].ranges||++e;for(var o=0;o<t.undone.length;o++)t.undone[o].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){this.history=new to(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:fo(this.history.done),undone:fo(this.history.undone)}},setHistory:function(t){var e=this.history=new to(this.history.maxGeneration);e.done=fo(t.done.slice(0),null,!0),e.undone=fo(t.undone.slice(0),null,!0)},setGutterMarker:gi(function(t,e,n){return $o(this,t,"gutter",function(t){var i=t.gutterMarkers||(t.gutterMarkers={});return i[e]=n,!n&&C(i)&&(t.gutterMarkers=null),!0})}),clearGutter:gi(function(t){var e=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[t]&&$o(e,n,"gutter",function(){return n.gutterMarkers[t]=null,C(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(t){var e;if("number"==typeof t){if(!D(this,t))return null;if(e=t,!(t=E(this,t)))return null}else if(null==(e=M(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:gi(function(e,n,i){return $o(this,e,"gutter"==n?"gutter":"class",function(e){var o="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(e[o]){if(t(i).test(e[o]))return!1;e[o]+=" "+i}else e[o]=i;return!0})}),removeLineClass:gi(function(e,n,i){return $o(this,e,"gutter"==n?"gutter":"class",function(e){var o="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass",r=e[o];if(!r)return!1;if(null==i)e[o]=null;else{var s=r.match(t(i));if(!s)return!1;var a=s.index+s[0].length;e[o]=r.slice(0,s.index)+(s.index&&a!=r.length?" ":"")+r.slice(a)||null}return!0})}),addLineWidget:gi(function(t,e,n){return Uo(this,t,e,n)}),removeLineWidget:function(t){t.clear()},markText:function(t,e,n){return Vo(this,z(this,t),z(this,e),n,n&&n.type||"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return t=z(this,t),Vo(this,t,t,n,"bookmark")},findMarksAt:function(t){t=z(this,t);var e=[],n=E(this,t.line).markedSpans;if(n)for(var i=0;i<n.length;++i){var o=n[i];(null==o.from||o.from<=t.ch)&&(null==o.to||o.to>=t.ch)&&e.push(o.marker.parent||o.marker)}return e},findMarks:function(t,e,n){t=z(this,t),e=z(this,e);var i=[],o=t.line;return this.iter(t.line,e.line+1,function(r){var s=r.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];null!=l.to&&o==t.line&&t.ch>=l.to||null==l.from&&o!=t.line||null!=l.from&&o==e.line&&l.from>=e.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++o}),i},getAllMarks:function(){var t=[];return this.iter(function(e){var n=e.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&t.push(n[i].marker)}),t},posFromIndex:function(t){var e,n=this.first,i=this.lineSeparator().length;return this.iter(function(o){var r=o.text.length+i;if(r>t)return e=t,!0;t-=r,++n}),z(this,I(n,e))},indexFromPos:function(t){t=z(this,t);var e=t.ch;if(t.line<this.first||t.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,t.line,function(t){e+=t.text.length+n}),e},copy:function(t){var e=new Ia(A(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var i=new Ia(A(this,e,n),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:t.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],Yo(i,Xo(this)),i},unlinkDoc:function(t){var e=this;if(t instanceof Kr&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){var i=e.linked[n];if(i.doc==t){e.linked.splice(n,1),t.unlinkDoc(e),Go(Xo(e));break}}if(t.history==this.history){var o=[t.id];Gi(t,function(t){return o.push(t.id)},!0),t.history=new to(null),t.history.done=fo(this.history.done,o),t.history.undone=fo(this.history.undone,o)}},iterLinkedDocs:function(t){Gi(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):ia(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:gi(function(t){"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter(function(t){return t.order=null}),this.cm&&Ji(this.cm))})}),Ia.prototype.eachLine=Ia.prototype.iter;for(var Ha=0,Fa=!1,Ra={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ba=0;Ba<10;Ba++)Ra[Ba+48]=Ra[Ba+96]=String(Ba);for(var Wa=65;Wa<=90;Wa++)Ra[Wa]=String.fromCharCode(Wa);for(var $a=1;$a<=12;$a++)Ra[$a+111]=Ra[$a+63235]="F"+$a;var za={};za.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},za.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},za.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},za.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},za.default=Ps?za.macDefault:za.pcDefault;var ja={selectAll:Ao,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),qs)},killLine:function(t){return dr(t,function(e){if(e.empty()){var n=E(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:I(e.head.line+1,0)}:{from:e.head,to:I(e.head.line,n)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){return dr(t,function(e){return{from:I(e.from().line,0),to:z(t.doc,I(e.to().line+1,0))}})},delLineLeft:function(t){return dr(t,function(t){return{from:I(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(t){return dr(t,function(e){var n=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:n},"div"),to:e.from()}})},delWrappedLineRight:function(t){return dr(t,function(e){var n=t.charCoords(e.head,"div").top+5,i=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div");return{from:e.from(),to:i}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(I(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(I(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(e){return vr(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(e){return br(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(e){return yr(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div")},Vs)},goLineLeft:function(t){return t.extendSelectionsBy(function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:n},"div")},Vs)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(e){var n=t.cursorCoords(e.head,"div").top+5,i=t.coordsChar({left:0,top:n},"div");return i.ch<t.getLine(i.line).search(/\S/)?br(t,e.head):i},Vs)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"char")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),i=t.options.tabSize,o=0;o<n.length;o++){var r=n[o].from(),s=h(t.getLine(r.line),r.ch,i);e.push(p(i-s%i))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return fi(t,function(){for(var e=t.listSelections(),n=[],i=0;i<e.length;i++)if(e[i].empty()){var o=e[i].head,r=E(t.doc,o.line).text;if(r)if(o.ch==r.length&&(o=new I(o.line,o.ch-1)),o.ch>0)o=new I(o.line,o.ch+1),t.replaceRange(r.charAt(o.ch-1)+r.charAt(o.ch-2),I(o.line,o.ch-2),o,"+transpose");else if(o.line>t.doc.first){var s=E(t.doc,o.line-1).text;s&&(o=new I(o.line,1),t.replaceRange(r.charAt(0)+t.doc.lineSeparator()+s.charAt(s.length-1),I(o.line-1,s.length-1),o,"+transpose"))}n.push(new Aa(o,o))}t.setSelections(n)})},newlineAndIndent:function(t){return fi(t,function(){for(var e=t.listSelections(),n=e.length-1;n>=0;n--)t.replaceRange(t.doc.lineSeparator(),e[n].anchor,e[n].head,"+input");e=t.listSelections();for(var i=0;i<e.length;i++)t.indentLine(e[i].from().line,null,!0);Kn(t)})},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}},qa=new Bs,Ua=null,Va=function(t,e,n){this.time=t,this.pos=e,this.button=n};Va.prototype.compare=function(t,e,n){return this.time+400>t&&0==H(e,this.pos)&&n==this.button};var Ka,Xa,Ya={toString:function(){return"CodeMirror.Init"}},Ga={},Za={};Kr.defaults=Ga,Kr.optionHandlers=Za;var Qa=[];Kr.defineInitHook=function(t){return Qa.push(t)};var Ja=null,tl=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Bs,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};tl.prototype.init=function(t){function e(t){if(!Et(o,t)){if(o.somethingSelected())Gr({lineWise:!1,text:o.getSelections()}),"cut"==t.type&&o.replaceSelection("",null,"cut");else{if(!o.options.lineWiseCopyCut)return;var e=ts(o);Gr({lineWise:!0,text:e.text}),"cut"==t.type&&o.operation(function(){o.setSelections(e.ranges,0,qs),o.replaceSelection("",null,"cut")})}if(t.clipboardData){t.clipboardData.clearData();var n=Ja.text.join("\n");if(t.clipboardData.setData("Text",n),t.clipboardData.getData("Text")==n)return void t.preventDefault()}var s=ns(),a=s.firstChild;o.display.lineSpace.insertBefore(s,o.display.lineSpace.firstChild),a.value=Ja.text.join("\n");var l=document.activeElement;Rs(a),setTimeout(function(){o.display.lineSpace.removeChild(s),l.focus(),l==r&&i.showPrimarySelection()},50)}}var n=this,i=this,o=i.cm,r=i.div=t.lineDiv;es(r,o.options.spellcheck),ea(r,"paste",function(t){Et(o,t)||Qr(t,o)||bs<=11&&setTimeout(pi(o,function(){return n.updateFromDOM()}),20)}),ea(r,"compositionstart",function(t){n.composing={data:t.data,done:!1}}),ea(r,"compositionupdate",function(t){n.composing||(n.composing={data:t.data,done:!1})}),ea(r,"compositionend",function(t){n.composing&&(t.data!=n.composing.data&&n.readFromDOMSoon(),n.composing.done=!0)}),ea(r,"touchstart",function(){return i.forceCompositionEnd()}),ea(r,"input",function(){n.composing||n.readFromDOMSoon()}),ea(r,"copy",e),ea(r,"cut",e)},tl.prototype.prepareSelection=function(){var t=Ln(this.cm,!1);return t.focus=this.cm.state.focused,t},tl.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},tl.prototype.showPrimarySelection=function(){var t=window.getSelection(),e=this.cm,n=e.doc.sel.primary(),i=n.from(),o=n.to();if(e.display.viewTo==e.display.viewFrom||i.line>=e.display.viewTo||o.line<e.display.viewFrom)return void t.removeAllRanges();var r=cs(e,t.anchorNode,t.anchorOffset),s=cs(e,t.focusNode,t.focusOffset);if(!r||r.bad||!s||s.bad||0!=H(W(r,s),i)||0!=H(B(r,s),o)){var a=e.display.view,l=i.line>=e.display.viewFrom&&rs(e,i)||{node:a[0].measure.map[2],offset:0},c=o.line<e.display.viewTo&&rs(e,o);if(!c){var u=a[a.length-1].measure,h=u.maps?u.maps[u.maps.length-1]:u.map;c={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(!l||!c)return void t.removeAllRanges();var d,f=t.rangeCount&&t.getRangeAt(0);try{d=Os(l.node,l.offset,c.offset,c.node)}catch(t){}d&&(!ps&&e.state.focused?(t.collapse(l.node,l.offset),d.collapsed||(t.removeAllRanges(),t.addRange(d))):(t.removeAllRanges(),t.addRange(d)),f&&null==t.anchorNode?t.addRange(f):ps&&this.startGracePeriod()),this.rememberSelection()}},tl.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},tl.prototype.showMultipleSelections=function(t){n(this.cm.display.cursorDiv,t.cursors),n(this.cm.display.selectionDiv,t.selection)},tl.prototype.rememberSelection=function(){var t=window.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},tl.prototype.selectionInEditor=function(){var t=window.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return r(this.div,e)},tl.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},tl.prototype.blur=function(){this.div.blur()},tl.prototype.getField=function(){return this.div},tl.prototype.supportsTouch=function(){return!0},tl.prototype.receivedFocus=function(){function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}var e=this;this.selectionInEditor()?this.pollSelection():fi(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,t)},tl.prototype.selectionChanged=function(){var t=window.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},tl.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=window.getSelection(),e=this.cm;if(Ls&&Cs&&this.cm.options.gutters.length&&ss(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=cs(e,t.anchorNode,t.anchorOffset),i=cs(e,t.focusNode,t.focusOffset);n&&i&&fi(e,function(){xo(e.doc,Wi(n,i),qs),(n.bad||i.bad)&&(e.curOp.selectionChanged=!0)})}}},tl.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t=this.cm,e=t.display,n=t.doc.sel.primary(),i=n.from(),o=n.to();if(0==i.ch&&i.line>t.firstLine()&&(i=I(i.line-1,E(t.doc,i.line-1).length)),o.ch==E(t.doc,o.line).text.length&&o.line<t.lastLine()&&(o=I(o.line+1,0)),i.line<e.viewFrom||o.line>e.viewTo-1)return!1;var r,s,a;i.line==e.viewFrom||0==(r=Tn(t,i.line))?(s=M(e.view[0].line),a=e.view[0].node):(s=M(e.view[r].line),a=e.view[r-1].node.nextSibling);var l,c,u=Tn(t,o.line);if(u==e.view.length-1?(l=e.viewTo-1,c=e.lineDiv.lastChild):(l=M(e.view[u+1].line)-1,c=e.view[u+1].node.previousSibling),!a)return!1;for(var h=t.doc.splitLines(ls(t,a,c,s,l)),d=L(t.doc,I(s,0),I(l,E(t.doc,l).text.length));h.length>1&&d.length>1;)if(m(h)==m(d))h.pop(),d.pop(),l--;else{if(h[0]!=d[0])break;h.shift(),d.shift(),s++}for(var f=0,p=0,g=h[0],v=d[0],y=Math.min(g.length,v.length);f<y&&g.charCodeAt(f)==v.charCodeAt(f);)++f;for(var b=m(h),w=m(d),x=Math.min(b.length-(1==h.length?f:0),w.length-(1==d.length?f:0));p<x&&b.charCodeAt(b.length-p-1)==w.charCodeAt(w.length-p-1);)++p;if(1==h.length&&1==d.length&&s==i.line)for(;f&&f>i.ch&&b.charCodeAt(b.length-p-1)==w.charCodeAt(w.length-p-1);)f--,p++;h[h.length-1]=b.slice(0,b.length-p).replace(/^\u200b+/,""),h[0]=h[0].slice(f).replace(/\u200b+$/,"");var C=I(s,f),_=I(l,d.length?m(d).length-p:0);return h.length>1||h[0]||H(C,_)?(Fo(t.doc,h,C,_,"+input"),!0):void 0},tl.prototype.ensurePolled=function(){this.forceCompositionEnd()},tl.prototype.reset=function(){this.forceCompositionEnd()},tl.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},tl.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()},80))},tl.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||fi(this.cm,function(){return vi(t.cm)})},tl.prototype.setUneditable=function(t){t.contentEditable="false"},tl.prototype.onKeyPress=function(t){0!=t.charCode&&(t.preventDefault(),this.cm.isReadOnly()||pi(this.cm,Zr)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},tl.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},tl.prototype.onContextMenu=function(){},tl.prototype.resetPosition=function(){},tl.prototype.needsContentAttribute=!0;var el=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new Bs,this.hasSelection=!1,this.composing=null};el.prototype.init=function(t){function e(t){if(!Et(o,t)){if(o.somethingSelected())Gr({lineWise:!1,text:o.getSelections()});else{if(!o.options.lineWiseCopyCut)return;var e=ts(o);Gr({lineWise:!0,text:e.text}),"cut"==t.type?o.setSelections(e.ranges,null,qs):(i.prevInput="",s.value=e.text.join("\n"),Rs(s))}"cut"==t.type&&(o.state.cutIncoming=!0)}}var n=this,i=this,o=this.cm,r=this.wrapper=ns(),s=this.textarea=r.firstChild;t.wrapper.insertBefore(r,t.wrapper.firstChild),Es&&(s.style.width="0px"),ea(s,"input",function(){ys&&bs>=9&&n.hasSelection&&(n.hasSelection=null),i.poll()}),ea(s,"paste",function(t){Et(o,t)||Qr(t,o)||(o.state.pasteIncoming=!0,i.fastPoll())}),ea(s,"cut",e),ea(s,"copy",e),ea(t.scroller,"paste",function(e){Ie(t,e)||Et(o,e)||(o.state.pasteIncoming=!0,i.focus())}),ea(t.lineSpace,"selectstart",function(e){Ie(t,e)||Mt(e)}),ea(s,"compositionstart",function(){var t=o.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:t,range:o.markText(t,o.getCursor("to"),{className:"CodeMirror-composing"})}}),ea(s,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},el.prototype.prepareSelection=function(){var t=this.cm,e=t.display,n=t.doc,i=Ln(t);if(t.options.moveInputWithCursor){var o=cn(t,n.sel.primary().head,"div"),r=e.wrapper.getBoundingClientRect(),s=e.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,o.top+s.top-r.top)),i.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,o.left+s.left-r.left))}return i},el.prototype.showSelection=function(t){var e=this.cm,i=e.display;n(i.cursorDiv,t.cursors),n(i.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},el.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var e=this.cm;if(e.somethingSelected()){this.prevInput="";var n=e.getSelection();this.textarea.value=n,e.state.focused&&Rs(this.textarea),ys&&bs>=9&&(this.hasSelection=n)}else t||(this.prevInput=this.textarea.value="",ys&&bs>=9&&(this.hasSelection=null))}},el.prototype.getField=function(){return this.textarea},el.prototype.supportsTouch=function(){return!1},el.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!As||s()!=this.textarea))try{this.textarea.focus()}catch(t){}},el.prototype.blur=function(){this.textarea.blur()},el.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},el.prototype.receivedFocus=function(){this.slowPoll()},el.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},el.prototype.fastPoll=function(){function t(){n.poll()||e?(n.pollingFast=!1,n.slowPoll()):(e=!0,n.polling.set(60,t))}var e=!1,n=this;n.pollingFast=!0,n.polling.set(20,t)},el.prototype.poll=function(){var t=this,e=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!e.state.focused||oa(n)&&!i&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var o=n.value;if(o==i&&!e.somethingSelected())return!1;if(ys&&bs>=9&&this.hasSelection===o||Ps&&/[\uf700-\uf7ff]/.test(o))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var r=o.charCodeAt(0);if(8203!=r||i||(i="​"),8666==r)return this.reset(),this.cm.execCommand("undo")}for(var s=0,a=Math.min(i.length,o.length);s<a&&i.charCodeAt(s)==o.charCodeAt(s);)++s;return fi(e,function(){Zr(e,o.slice(s),i.length-s,null,t.composing?"*compose":null),o.length>1e3||o.indexOf("\n")>-1?n.value=t.prevInput="":t.prevInput=o,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},el.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},el.prototype.onKeyPress=function(){ys&&bs>=9&&(this.hasSelection=null),this.fastPoll()},el.prototype.onContextMenu=function(t){function e(){if(null!=s.selectionStart){var t=o.somethingSelected(),e="​"+(t?s.value:"");s.value="⇚",s.value=e,i.prevInput=t?"":"​",s.selectionStart=1,s.selectionEnd=e.length,r.selForContextMenu=o.doc.sel}}function n(){if(i.contextMenuPending=!1,i.wrapper.style.cssText=u,s.style.cssText=c,ys&&bs<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=l),null!=s.selectionStart){(!ys||ys&&bs<9)&&e();var t=0,n=function(){r.selForContextMenu==o.doc.sel&&0==s.selectionStart&&s.selectionEnd>0&&"​"==i.prevInput?pi(o,Ao)(o):t++<10?r.detectingSelectAll=setTimeout(n,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(n,200)}}var i=this,o=i.cm,r=o.display,s=i.textarea,a=kn(o,t),l=r.scroller.scrollTop;if(a&&!_s){o.options.resetSelectionOnContextMenu&&-1==o.doc.sel.contains(a)&&pi(o,xo)(o.doc,Wi(a),qs);var c=s.style.cssText,u=i.wrapper.style.cssText;i.wrapper.style.cssText="position: absolute";var h=i.wrapper.getBoundingClientRect();s.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-h.top-5)+"px; left: "+(t.clientX-h.left-5)+"px;\n      z-index: 1000; background: "+(ys?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var d;if(ws&&(d=window.scrollY),r.input.focus(),ws&&window.scrollTo(null,d),r.input.reset(),o.somethingSelected()||(s.value=i.prevInput=" "),i.contextMenuPending=!0,r.selForContextMenu=o.doc.sel,clearTimeout(r.detectingSelectAll),ys&&bs>=9&&e(),Hs){Ot(t);var f=function(){kt(window,"mouseup",f),setTimeout(n,20)};ea(window,"mouseup",f)}else setTimeout(n,50)}},el.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t},el.prototype.setUneditable=function(){},el.prototype.needsContentAttribute=!1,function(t){function e(e,i,o,r){t.defaults[e]=i,o&&(n[e]=r?function(t,e,n){n!=Ya&&o(t,e,n)}:o)}var n=t.optionHandlers;t.defineOption=e,t.Init=Ya,e("value","",function(t,e){return t.setValue(e)},!0),e("mode",null,function(t,e){t.doc.modeOption=e,Vi(t)},!0),e("indentUnit",2,Vi,!0),e("indentWithTabs",!1),e("smartIndent",!0),e("tabSize",4,function(t){Ki(t),en(t),vi(t)},!0),e("lineSeparator",null,function(t,e){if(t.doc.lineSep=e,e){var n=[],i=t.doc.first;t.doc.iter(function(t){for(var o=0;;){var r=t.text.indexOf(e,o);if(-1==r)break;o=r+e.length,n.push(I(i,r))}i++});for(var o=n.length-1;o>=0;o--)Fo(t.doc,e,n[o],I(n[o].line,n[o].ch+e.length))}}),e("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,e,n){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),n!=Ya&&t.refresh()}),e("specialCharPlaceholder",ce,function(t){return t.refresh()},!0),e("electricChars",!0),e("inputStyle",As?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),e("spellcheck",!1,function(t,e){return t.getInputField().spellcheck=e},!0),e("rtlMoveVisually",!Ns),e("wholeLineUpdateBefore",!0),e("theme","default",function(t){jr(t),qr(t)},!0),e("keyMap","default",function(t,e,n){var i=hr(e),o=n!=Ya&&hr(n);o&&o.detach&&o.detach(t,i),i.attach&&i.attach(t,o||null)}),e("extraKeys",null),e("configureMouse",null),e("lineWrapping",!1,Vr,!0),e("gutters",[],function(t){Ii(t.options),qr(t)},!0),e("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?Cn(t.display)+"px":"0",t.refresh()},!0),e("coverGutterNextToScrollbar",!1,function(t){return ni(t)},!0),e("scrollbarStyle","native",function(t){oi(t),ni(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)},!0),e("lineNumbers",!1,function(t){Ii(t.options),qr(t)},!0),e("firstLineNumber",1,qr,!0),e("lineNumberFormatter",function(t){return t},qr,!0),e("showCursorWhenSelecting",!1,En,!0),e("resetSelectionOnContextMenu",!0),e("lineWiseCopyCut",!0),e("pasteLinesPerSelection",!0),e("readOnly",!1,function(t,e){"nocursor"==e&&(Hn(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)}),e("disableInput",!1,function(t,e){e||t.display.input.reset()},!0),e("dragDrop",!0,Ur),e("allowDropFileTypes",null),e("cursorBlinkRate",530),e("cursorScrollMargin",0),e("cursorHeight",1,En,!0),e("singleCursorHeightPerLine",!0,En,!0),e("workTime",100),e("workDelay",100),e("flattenSpans",!0,Ki,!0),e("addModeClass",!1,Ki,!0),e("pollInterval",100),e("undoDepth",200,function(t,e){return t.doc.history.undoDepth=e}),e("historyEventDelay",1250),e("viewportMargin",10,function(t){return t.refresh()},!0),e("maxHighlightLength",1e4,Ki,!0),e("moveInputWithCursor",!0,function(t,e){e||t.display.input.resetPosition()}),e("tabindex",null,function(t,e){return t.display.input.getField().tabIndex=e||""}),e("autofocus",null),e("direction","ltr",function(t,e){return t.doc.setDirection(e)},!0)}(Kr),function(t){var e=t.optionHandlers,n=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,n){var i=this.options,o=i[t];i[t]==n&&"mode"!=t||(i[t]=n,e.hasOwnProperty(t)&&pi(this,e[t])(this,n,o),Tt(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](hr(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||e[n].name==t)return e.splice(n,1),!0},addOverlay:mi(function(e,n){var i=e.token?e:t.getMode(this.options,e);if(i.startState)throw new Error("Overlays may not be stateful.");v(this.state.overlays,{mode:i,modeSpec:e,opaque:n&&n.opaque,priority:n&&n.priority||0},function(t){return t.priority}),this.state.modeGen++,vi(this)}),removeOverlay:mi(function(t){for(var e=this,n=this.state.overlays,i=0;i<n.length;++i){var o=n[i].modeSpec;if(o==t||"string"==typeof t&&o.name==t)return n.splice(i,1),e.state.modeGen++,void vi(e)}}),indentLine:mi(function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),D(this.doc,t)&&Yr(this,t,e,n)}),indentSelection:mi(function(t){for(var e=this,n=this.doc.sel.ranges,i=-1,o=0;o<n.length;o++){var r=n[o];if(r.empty())r.head.line>i&&(Yr(e,r.head.line,t,!0),i=r.head.line,o==e.doc.sel.primIndex&&Kn(e));else{var s=r.from(),a=r.to(),l=Math.max(i,s.line);i=Math.min(e.lastLine(),a.line-(a.ch?0:1))+1;for(var c=l;c<i;++c)Yr(e,c,t);var u=e.doc.sel.ranges;0==s.ch&&n.length==u.length&&u[o].from().ch>0&&vo(e.doc,o,new Aa(s,u[o].to()),qs)}}}),getTokenAt:function(t,e){return te(this,t,e)},getLineTokens:function(t,e){return te(this,I(t),e,!0)},getTokenTypeAt:function(t){t=z(this.doc,t);var e,n=Yt(this,E(this.doc,t.line)),i=0,o=(n.length-1)/2,r=t.ch;if(0==r)e=n[2];else for(;;){var s=i+o>>1;if((s?n[2*s-1]:0)>=r)o=s;else{if(!(n[2*s+1]<r)){e=n[2*s+2];break}i=s+1}}var a=e?e.indexOf("overlay "):-1;return a<0?e:0==a?null:e.slice(0,a-1)},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var i=this,o=[];if(!n.hasOwnProperty(e))return o;var r=n[e],s=this.getModeAt(t);if("string"==typeof s[e])r[s[e]]&&o.push(r[s[e]]);else if(s[e])for(var a=0;a<s[e].length;a++){var l=r[s[e][a]];l&&o.push(l)}else s.helperType&&r[s.helperType]?o.push(r[s.helperType]):r[s.name]&&o.push(r[s.name]);for(var c=0;c<r._global.length;c++){var u=r._global[c];u.pred(s,i)&&-1==d(o,u.val)&&o.push(u.val)}return o},getStateAfter:function(t,e){var n=this.doc;return t=$(n,null==t?n.first+n.size-1:t),Gt(this,t+1,e).state},cursorCoords:function(t,e){var n,i=this.doc.sel.primary();return n=null==t?i.head:"object"==typeof t?z(this.doc,t):t?i.from():i.to(),cn(this,n,e||"page")},charCoords:function(t,e){return ln(this,z(this.doc,t),e||"page")},coordsChar:function(t,e){return t=an(this,t,e||"page"),dn(this,t.left,t.top)},lineAtHeight:function(t,e){return t=an(this,{top:t,left:0},e||"page").top,N(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,n){var i,o=!1;if("number"==typeof t){var r=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>r&&(t=r,o=!0),i=E(this.doc,t)}else i=t;return sn(this,i,{top:0,left:0},e||"page",n||o).top+(o?this.doc.height-yt(i):0)},defaultTextHeight:function(){return bn(this.display)},defaultCharWidth:function(){return wn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,i,o){var r=this.display;t=cn(this,z(this.doc,t));var s=t.bottom,a=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),r.sizer.appendChild(e),"over"==i)s=t.top;else if("above"==i||"near"==i){var l=Math.max(r.wrapper.clientHeight,this.doc.height),c=Math.max(r.sizer.clientWidth,r.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?s=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=l&&(s=t.bottom),a+e.offsetWidth>c&&(a=c-e.offsetWidth)}e.style.top=s+"px",e.style.left=e.style.right="","right"==o?(a=r.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==o?a=0:"middle"==o&&(a=(r.sizer.clientWidth-e.offsetWidth)/2),e.style.left=a+"px"),n&&qn(this,{left:a,top:s,right:a+e.offsetWidth,bottom:s+e.offsetHeight})},triggerOnKeyDown:mi(Tr),triggerOnKeyPress:mi(Ar),triggerOnKeyUp:Lr,triggerOnMouseDown:mi(Mr),execCommand:function(t){if(ja.hasOwnProperty(t))return ja[t].call(null,this)},triggerElectric:mi(function(t){Jr(this,t)}),findPosH:function(t,e,n,i){var o=this,r=1;e<0&&(r=-1,e=-e);for(var s=z(this.doc,t),a=0;a<e&&(s=is(o.doc,s,r,n,i),!s.hitSide);++a);return s},moveH:mi(function(t,e){var n=this;this.extendSelectionsBy(function(i){return n.display.shift||n.doc.extend||i.empty()?is(n.doc,i.head,t,e,n.options.rtlMoveVisually):t<0?i.from():i.to()},Vs)}),deleteH:mi(function(t,e){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):dr(this,function(n){var o=is(i,n.head,t,e,!1);return t<0?{from:o,to:n.head}:{from:n.head,to:o}})}),findPosV:function(t,e,n,i){var o=this,r=1,s=i;e<0&&(r=-1,e=-e);for(var a=z(this.doc,t),l=0;l<e;++l){var c=cn(o,a,"div");if(null==s?s=c.left:c.left=s,a=os(o,c,r,n),a.hitSide)break}return a},moveV:mi(function(t,e){var n=this,i=this.doc,o=[],r=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy(function(s){if(r)return t<0?s.from():s.to();var a=cn(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),o.push(a.left);var l=os(n,a,t,e);return"page"==e&&s==i.sel.primary()&&Vn(n,ln(n,l,"div").top-a.top),l},Vs),o.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=o[s]}),findWordAt:function(t){var e=this.doc,n=E(e,t.line).text,i=t.ch,o=t.ch;if(n){var r=this.getHelper(t,"wordChars");"before"!=t.sticky&&o!=n.length||!i?++o:--i;for(var s=n.charAt(i),a=x(s,r)?function(t){return x(t,r)}:/\s/.test(s)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!x(t)};i>0&&a(n.charAt(i-1));)--i;for(;o<n.length&&a(n.charAt(o));)++o}return new Aa(I(t.line,i),I(t.line,o))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?a(this.display.cursorDiv,"CodeMirror-overwrite"):Fs(this.display.cursorDiv,"CodeMirror-overwrite"),Tt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==s()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:mi(function(t,e){Xn(this,t,e)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-Be(this)-this.display.barHeight,width:t.scrollWidth-Be(this)-this.display.barWidth,clientHeight:$e(this),clientWidth:We(this)}},scrollIntoView:mi(function(t,e){null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:I(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?Yn(this,t):Zn(this,t.from,t.to,t.margin)}),setSize:mi(function(t,e){var n=this,i=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=i(t)),null!=e&&(this.display.wrapper.style.height=i(e)),this.options.lineWrapping&&tn(this);var o=this.display.viewFrom;this.doc.iter(o,this.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){yi(n,o,"widget");break}++o}),this.curOp.forceUpdate=!0,Tt(this,"refresh",this)}),operation:function(t){return fi(this,t)},startOperation:function(){return ri(this)},endOperation:function(){return si(this)},refresh:mi(function(){var t=this.display.cachedTextHeight;vi(this),this.curOp.forceUpdate=!0,en(this),Xn(this,this.doc.scrollLeft,this.doc.scrollTop),Ni(this),(null==t||Math.abs(t-bn(this.display))>.5)&&Sn(this),Tt(this,"refresh",this)}),swapDoc:mi(function(t){var e=this.doc;return e.cm=null,Zi(this,t),en(this),this.display.input.reset(),Xn(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,we(this,"swapDoc",this,e),e}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Pt(t),t.registerHelper=function(e,i,o){n.hasOwnProperty(e)||(n[e]=t[e]={_global:[]}),n[e][i]=o},t.registerGlobalHelper=function(e,i,o,r){t.registerHelper(e,i,r),n[e]._global.push({pred:o,val:r})}}(Kr);var nl="iter insert remove copy getEditor constructor".split(" ");for(var il in Ia.prototype)Ia.prototype.hasOwnProperty(il)&&d(nl,il)<0&&(Kr.prototype[il]=function(t){return function(){return t.apply(this.doc,arguments)}}(Ia.prototype[il]));return Pt(Ia),Kr.inputStyles={textarea:el,contenteditable:tl},Kr.defineMode=function(t){Kr.defaults.mode||"null"==t||(Kr.defaults.mode=t),Wt.apply(this,arguments)},Kr.defineMIME=$t,Kr.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),Kr.defineMIME("text/plain","null"),Kr.defineExtension=function(t,e){Kr.prototype[t]=e},Kr.defineDocExtension=function(t,e){Ia.prototype[t]=e},Kr.fromTextArea=hs,function(t){t.off=kt,t.on=ea,t.wheelEventPixels=Fi,t.Doc=Ia,t.splitLines=ia,t.countColumn=h,t.findColumn=f,t.isWordChar=w,t.Pass=js,t.signal=Tt,t.Line=pa,t.changeEnd=$i,t.scrollbarModel=_a,t.Pos=I,t.cmpPos=H,t.modes=aa,t.mimeModes=la,t.resolveMode=zt,t.getMode=jt,t.modeExtensions=ca,t.extendMode=qt,t.copyState=Ut,t.startState=Kt,t.innerMode=Vt,t.commands=ja,t.keyMap=za,t.keyName=ur,t.isModifierKey=lr,t.lookupKey=ar,t.normalizeKeyMap=sr,t.StringStream=ua,t.SharedTextMarker=Da,t.TextMarker=Na,t.LineWidget=Pa,t.e_preventDefault=Mt,t.e_stopPropagation=Nt,t.e_stop=Ot,t.addClass=a,t.contains=r,t.rmClass=Fs,t.keyNames=Ra}(Kr),Kr.version="5.35.0",Kr})},function(t,e,n){var i,o,r;/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(s){o=[n(0),n(1)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])}})})},function(t,e,n){var i,o,r;!function(s){o=[n(0),n(1)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})},function(t,e,n){var i,o,r;/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(s){o=[n(0),n(1)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.fn.scrollParent=function(e){var n=this.css("position"),i="absolute"===n,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var e=t(this);return(!i||"static"!==e.css("position"))&&o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==n&&r.length?r:t(this[0].ownerDocument||document)}})},function(t,e,n){var i,o,r;/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(s){o=[n(0),n(8),n(1),n(5)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){var e=!1;return t(document).on("mouseup",function(){e=!1}),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(n){if(!0===t.data(n.target,e.widgetName+".preventClickEvent"))return t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,o=1===n.which,r=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&t(n.target).closest(this.options.cancel).length;return!(o&&!r&&this._mouseCapture(n))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=!1!==this._mouseStart(n),!this._mouseStarted)?(n.preventDefault(),!0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&t.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,e=!1,n.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#8CD4F5",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0,inputType:"text",inputPlaceholder:"",inputValue:"",showLoaderOnConfirm:!1};e.default=i,t.exports=e.default},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n.n(i),r=n(27),s=(n.n(r),n(31)),a=(n.n(s),n(32)),l=(n.n(a),n(33)),c=n.n(l),u=n(6),h=n.n(u),d=n(39),f=n.n(d);window.$=window.jQuery=o.a,window.MediumEditor=c.a,window.CodeMirror=h.a,n(25),window.swal=f.a,n(15),n(16),n(23),n(24),function(t){window.top.jsEmailBuilderEmitter=n(18);var e=window.top.jsEmailBuilderEmitter,i=n(20),o=n(21),r=n(19),s=n(17),a=n(22),l={theme:"default"};t.EmailBuilder=function(n){var c=t.extend({},l,n);this.emitter=e,this.Nav=i,this.Theme=o,this.Module=r,this.Module=r,this.ContentEditor=s,this.Utils=a,this.emitter.on("init",function(){e.emit("theme_load",c.theme),t('[data-type="editor"]').on("DOMSubtreeModified",function(){e.emit("update_template")})}),this.emitter.on("switch_theme",function(){e.emit("theme_load",c.theme)}),this.init=function(){this.emitter.emit("init")},this.switchTheme=function(t){c.theme=t,this.emitter.emit("switch_theme")}}}(jQuery)},function(t,e){},function(t,e,n){var i,o,r;!function(s){o=[n(0)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){"use strict";function e(e,n){var i,o,r,s,a,c=t('<div class="minicolors" />'),u=t.minicolors.defaults;if(!e.data("minicolors-initialized")){if(n=t.extend(!0,{},u,n),c.addClass("minicolors-theme-"+n.theme).toggleClass("minicolors-with-opacity",n.opacity),void 0!==n.position&&t.each(n.position.split(" "),function(){c.addClass("minicolors-position-"+this)}),i="rgb"===n.format?n.opacity?"25":"20":n.keywords?"11":"7",e.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",n).prop("size",i).wrap(c).after('<div class="minicolors-panel minicolors-slider-'+n.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),n.inline||(e.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),e.next(".minicolors-input-swatch").on("click",function(t){t.preventDefault(),e.focus()})),s=e.parent().find(".minicolors-panel"),s.on("selectstart",function(){return!1}).end(),n.swatches&&0!==n.swatches.length)for(s.addClass("minicolors-with-swatches"),o=t('<ul class="minicolors-swatches"></ul>').appendTo(s),a=0;a<n.swatches.length;++a)r=n.swatches[a],r=v(r)?p(r,!0):k(f(r,!0)),t('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(o).data("swatch-color",n.swatches[a]).find(".minicolors-swatch-color").css({backgroundColor:x(r),opacity:r.a}),n.swatches[a]=r;n.inline&&e.parent().addClass("minicolors-inline"),l(e,!1),e.data("minicolors-initialized",!0)}}function n(t){var e=t.parent();t.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),e.before(t).remove()}function i(t){var e=t.parent(),n=e.find(".minicolors-panel"),i=t.data("minicolors-settings");!t.data("minicolors-initialized")||t.prop("disabled")||e.hasClass("minicolors-inline")||e.hasClass("minicolors-focus")||(o(),e.addClass("minicolors-focus"),n.stop(!0,!0).fadeIn(i.showSpeed,function(){i.show&&i.show.call(t.get(0))}))}function o(){t(".minicolors-focus").each(function(){var e=t(this),n=e.find(".minicolors-input"),i=e.find(".minicolors-panel"),o=n.data("minicolors-settings");i.fadeOut(o.hideSpeed,function(){o.hide&&o.hide.call(n.get(0)),e.removeClass("minicolors-focus")})})}function r(t,e,n){var i,o,r,a,l=t.parents(".minicolors").find(".minicolors-input"),c=l.data("minicolors-settings"),u=t.find("[class$=-picker]"),h=t.offset().left,d=t.offset().top,f=Math.round(e.pageX-h),p=Math.round(e.pageY-d),m=n?c.animationSpeed:0;e.originalEvent.changedTouches&&(f=e.originalEvent.changedTouches[0].pageX-h,p=e.originalEvent.changedTouches[0].pageY-d),f<0&&(f=0),p<0&&(p=0),f>t.width()&&(f=t.width()),p>t.height()&&(p=t.height()),t.parent().is(".minicolors-slider-wheel")&&u.parent().is(".minicolors-grid")&&(i=75-f,o=75-p,r=Math.sqrt(i*i+o*o),a=Math.atan2(o,i),a<0&&(a+=2*Math.PI),r>75&&(r=75,f=75-75*Math.cos(a),p=75-75*Math.sin(a)),f=Math.round(f),p=Math.round(p)),t.is(".minicolors-grid")?u.stop(!0).animate({top:p+"px",left:f+"px"},m,c.animationEasing,function(){s(l,t)}):u.stop(!0).animate({top:p+"px"},m,c.animationEasing,function(){s(l,t)})}function s(t,e){function n(t,e){var n,i;return t.length&&e?(n=t.offset().left,i=t.offset().top,{x:n-e.offset().left+t.outerWidth()/2,y:i-e.offset().top+t.outerHeight()/2}):null}var i,o,r,s,l,u,h,d=t.val(),f=t.attr("data-opacity"),p=t.parent(),m=t.data("minicolors-settings"),v=p.find(".minicolors-input-swatch"),y=p.find(".minicolors-grid"),b=p.find(".minicolors-slider"),w=p.find(".minicolors-opacity-slider"),x=y.find("[class$=-picker]"),_=b.find("[class$=-picker]"),S=w.find("[class$=-picker]"),k=n(x,y),T=n(_,b),E=n(S,w);if(e.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(m.control){case"wheel":s=y.width()/2-k.x,l=y.height()/2-k.y,u=Math.sqrt(s*s+l*l),h=Math.atan2(l,s),h<0&&(h+=2*Math.PI),u>75&&(u=75,k.x=69-75*Math.cos(h),k.y=69-75*Math.sin(h)),o=g(u/.75,0,100),i=g(180*h/Math.PI,0,360),r=g(100-Math.floor(T.y*(100/b.height())),0,100),d=C({h:i,s:o,b:r}),b.css("backgroundColor",C({h:i,s:o,b:100}));break;case"saturation":i=g(parseInt(k.x*(360/y.width()),10),0,360),o=g(100-Math.floor(T.y*(100/b.height())),0,100),r=g(100-Math.floor(k.y*(100/y.height())),0,100),d=C({h:i,s:o,b:r}),b.css("backgroundColor",C({h:i,s:100,b:r})),p.find(".minicolors-grid-inner").css("opacity",o/100);break;case"brightness":i=g(parseInt(k.x*(360/y.width()),10),0,360),o=g(100-Math.floor(k.y*(100/y.height())),0,100),r=g(100-Math.floor(T.y*(100/b.height())),0,100),d=C({h:i,s:o,b:r}),b.css("backgroundColor",C({h:i,s:o,b:100})),p.find(".minicolors-grid-inner").css("opacity",1-r/100);break;default:i=g(360-parseInt(T.y*(360/b.height()),10),0,360),o=g(Math.floor(k.x*(100/y.width())),0,100),r=g(100-Math.floor(k.y*(100/y.height())),0,100),d=C({h:i,s:o,b:r}),y.css("backgroundColor",C({h:i,s:100,b:100}))}f=m.opacity?parseFloat(1-E.y/w.height()).toFixed(2):1,a(t,d,f)}else v.find("span").css({backgroundColor:d,opacity:f}),c(t,d,f)}function a(t,e,n){var i,o=t.parent(),r=t.data("minicolors-settings"),s=o.find(".minicolors-input-swatch");r.opacity&&t.attr("data-opacity",n),"rgb"===r.format?(i=v(e)?p(e,!0):k(f(e,!0)),n=""===t.attr("data-opacity")?1:g(parseFloat(t.attr("data-opacity")).toFixed(2),0,1),!isNaN(n)&&r.opacity||(n=1),e=t.minicolors("rgbObject").a<=1&&i&&r.opacity?"rgba("+i.r+", "+i.g+", "+i.b+", "+parseFloat(n)+")":"rgb("+i.r+", "+i.g+", "+i.b+")"):(v(e)&&(e=w(e)),e=d(e,r.letterCase)),t.val(e),s.find("span").css({backgroundColor:e,opacity:n}),c(t,e,n)}function l(e,n){var i,o,r,s,a,l,u,h,b,x,S=e.parent(),k=e.data("minicolors-settings"),T=S.find(".minicolors-input-swatch"),E=S.find(".minicolors-grid"),L=S.find(".minicolors-slider"),A=S.find(".minicolors-opacity-slider"),P=E.find("[class$=-picker]"),M=L.find("[class$=-picker]"),N=A.find("[class$=-picker]");switch(v(e.val())?(i=w(e.val()),(a=g(parseFloat(y(e.val())).toFixed(2),0,1))&&e.attr("data-opacity",a)):i=d(f(e.val(),!0),k.letterCase),i||(i=d(m(k.defaultValue,!0),k.letterCase)),o=_(i),s=k.keywords?t.map(k.keywords.split(","),function(e){return t.trim(e.toLowerCase())}):[],l=""!==e.val()&&t.inArray(e.val().toLowerCase(),s)>-1?d(e.val()):v(e.val())?p(e.val()):i,n||e.val(l),k.opacity&&(r=""===e.attr("data-opacity")?1:g(parseFloat(e.attr("data-opacity")).toFixed(2),0,1),isNaN(r)&&(r=1),e.attr("data-opacity",r),T.find("span").css("opacity",r),h=g(A.height()-A.height()*r,0,A.height()),N.css("top",h+"px")),"transparent"===e.val().toLowerCase()&&T.find("span").css("opacity",0),T.find("span").css("backgroundColor",i),k.control){case"wheel":b=g(Math.ceil(.75*o.s),0,E.height()/2),x=o.h*Math.PI/180,u=g(75-Math.cos(x)*b,0,E.width()),h=g(75-Math.sin(x)*b,0,E.height()),P.css({top:h+"px",left:u+"px"}),h=150-o.b/(100/E.height()),""===i&&(h=0),M.css("top",h+"px"),L.css("backgroundColor",C({h:o.h,s:o.s,b:100}));break;case"saturation":u=g(5*o.h/12,0,150),h=g(E.height()-Math.ceil(o.b/(100/E.height())),0,E.height()),P.css({top:h+"px",left:u+"px"}),h=g(L.height()-o.s*(L.height()/100),0,L.height()),M.css("top",h+"px"),L.css("backgroundColor",C({h:o.h,s:100,b:o.b})),S.find(".minicolors-grid-inner").css("opacity",o.s/100);break;case"brightness":u=g(5*o.h/12,0,150),h=g(E.height()-Math.ceil(o.s/(100/E.height())),0,E.height()),P.css({top:h+"px",left:u+"px"}),h=g(L.height()-o.b*(L.height()/100),0,L.height()),M.css("top",h+"px"),L.css("backgroundColor",C({h:o.h,s:o.s,b:100})),S.find(".minicolors-grid-inner").css("opacity",1-o.b/100);break;default:u=g(Math.ceil(o.s/(100/E.width())),0,E.width()),h=g(E.height()-Math.ceil(o.b/(100/E.height())),0,E.height()),P.css({top:h+"px",left:u+"px"}),h=g(L.height()-o.h/(360/L.height()),0,L.height()),M.css("top",h+"px"),E.css("backgroundColor",C({h:o.h,s:100,b:100}))}e.data("minicolors-initialized")&&c(e,l,r)}function c(t,e,n){var i,o,r,s=t.data("minicolors-settings"),a=t.data("minicolors-lastChange");if(!a||a.value!==e||a.opacity!==n){if(t.data("minicolors-lastChange",{value:e,opacity:n}),s.swatches&&0!==s.swatches.length){for(i=v(e)?p(e,!0):k(e),o=-1,r=0;r<s.swatches.length;++r)if(i.r===s.swatches[r].r&&i.g===s.swatches[r].g&&i.b===s.swatches[r].b&&i.a===s.swatches[r].a){o=r;break}t.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected"),-1!==o&&t.parent().find(".minicolors-swatches .minicolors-swatch").eq(r).addClass("selected")}s.change&&(s.changeDelay?(clearTimeout(t.data("minicolors-changeTimeout")),t.data("minicolors-changeTimeout",setTimeout(function(){s.change.call(t.get(0),e,n)},s.changeDelay))):s.change.call(t.get(0),e,n)),t.trigger("change").trigger("input")}}function u(e){var n,i=t(e).attr("data-opacity");if(v(t(e).val()))n=p(t(e).val(),!0);else{n=k(f(t(e).val(),!0))}return n?(void 0!==i&&t.extend(n,{a:parseFloat(i)}),n):null}function h(e,n){var i,o=t(e).attr("data-opacity");if(v(t(e).val()))i=p(t(e).val(),!0);else{i=k(f(t(e).val(),!0))}return i?(void 0===o&&(o=1),n?"rgba("+i.r+", "+i.g+", "+i.b+", "+parseFloat(o)+")":"rgb("+i.r+", "+i.g+", "+i.b+")"):null}function d(t,e){return"uppercase"===e?t.toUpperCase():t.toLowerCase()}function f(t,e){return t=t.replace(/^#/g,""),t.match(/^[A-F0-9]{3,6}/gi)?3!==t.length&&6!==t.length?"":(3===t.length&&e&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),"#"+t):""}function p(t,e){var n=t.replace(/[^\d,.]/g,""),i=n.split(",");return i[0]=g(parseInt(i[0],10),0,255),i[1]=g(parseInt(i[1],10),0,255),i[2]=g(parseInt(i[2],10),0,255),i[3]&&(i[3]=g(parseFloat(i[3],10),0,1)),e?i[3]?{r:i[0],g:i[1],b:i[2],a:i[3]}:{r:i[0],g:i[1],b:i[2]}:void 0!==i[3]&&i[3]<=1?"rgba("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")":"rgb("+i[0]+", "+i[1]+", "+i[2]+")"}function m(t,e){return v(t)?p(t):f(t,e)}function g(t,e,n){return t<e&&(t=e),t>n&&(t=n),t}function v(t){var e=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return!(!e||4!==e.length)}function y(t){return t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i),t&&6===t.length?t[4]:"1"}function b(t){var e={},n=Math.round(t.h),i=Math.round(255*t.s/100),o=Math.round(255*t.b/100);if(0===i)e.r=e.g=e.b=o;else{var r=o,s=(255-i)*o/255,a=n%60*(r-s)/60;360===n&&(n=0),n<60?(e.r=r,e.b=s,e.g=s+a):n<120?(e.g=r,e.b=s,e.r=r-a):n<180?(e.g=r,e.r=s,e.b=s+a):n<240?(e.b=r,e.r=s,e.g=r-a):n<300?(e.b=r,e.g=s,e.r=s+a):n<360?(e.r=r,e.g=s,e.b=r-a):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}function w(t){return t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),t&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}function x(e){var n=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return t.each(n,function(t,e){1===e.length&&(n[t]="0"+e)}),"#"+n.join("")}function C(t){return x(b(t))}function _(t){var e=S(k(t));return 0===e.s&&(e.h=360),e}function S(t){var e={h:0,s:0,b:0},n=Math.min(t.r,t.g,t.b),i=Math.max(t.r,t.g,t.b),o=i-n;return e.b=i,e.s=0!==i?255*o/i:0,0!==e.s?t.r===i?e.h=(t.g-t.b)/o:t.g===i?e.h=2+(t.b-t.r)/o:e.h=4+(t.r-t.g)/o:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e}function k(t){return t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16),{r:t>>16,g:(65280&t)>>8,b:255&t}}t.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default",swatches:[]}},t.extend(t.fn,{minicolors:function(r,s){switch(r){case"destroy":return t(this).each(function(){n(t(this))}),t(this);case"hide":return o(),t(this);case"opacity":return void 0===s?t(this).attr("data-opacity"):(t(this).each(function(){l(t(this).attr("data-opacity",s))}),t(this));case"rgbObject":return u(t(this));case"rgbString":case"rgbaString":return h(t(this),"rgbaString"===r);case"settings":return void 0===s?t(this).data("minicolors-settings"):(t(this).each(function(){var e=t(this).data("minicolors-settings")||{};n(t(this)),t(this).minicolors(t.extend(!0,e,s))}),t(this));case"show":return i(t(this).eq(0)),t(this);case"value":return void 0===s?t(this).val():(t(this).each(function(){"object"==typeof s&&"null"!==s?(s.opacity&&t(this).attr("data-opacity",g(s.opacity,0,1)),s.color&&t(this).val(s.color)):t(this).val(s),l(t(this))}),t(this));default:return"create"!==r&&(s=r),t(this).each(function(){e(t(this),s)}),t(this)}}}),t([document,top.document]).on("mousedown.minicolors touchstart.minicolors",function(e){t(e.target).parents().add(e.target).hasClass("minicolors")||o()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(e){var n=t(this);e.preventDefault(),t(e.delegateTarget).data("minicolors-target",n),r(n,e,!0)}).on("mousemove.minicolors touchmove.minicolors",function(e){var n=t(e.delegateTarget).data("minicolors-target");n&&r(n,e)}).on("mouseup.minicolors touchend.minicolors",function(){t(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(e){e.preventDefault();var n=t(this),i=n.parents(".minicolors").find(".minicolors-input"),o=n.data("swatch-color");a(i,o,y(o)),l(i)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(e){var n=t(this).parent().find(".minicolors-input");e.preventDefault(),i(n)}).on("focus.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&i(e)}).on("blur.minicolors",".minicolors-input",function(){var e,n,i,o,r,s=t(this),a=s.data("minicolors-settings");s.data("minicolors-initialized")&&(e=a.keywords?t.map(a.keywords.split(","),function(e){return t.trim(e.toLowerCase())}):[],""!==s.val()&&t.inArray(s.val().toLowerCase(),e)>-1?r=s.val():(v(s.val())?i=p(s.val(),!0):(n=f(s.val(),!0),i=n?k(n):null),r=null===i?a.defaultValue:"rgb"===a.format?p(a.opacity?"rgba("+i.r+","+i.g+","+i.b+","+s.attr("data-opacity")+")":"rgb("+i.r+","+i.g+","+i.b+")"):x(i)),o=a.opacity?s.attr("data-opacity"):1,"transparent"===r.toLowerCase()&&(o=0),s.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",o),s.val(r),""===s.val()&&s.val(m(a.defaultValue,!0)),s.val(d(s.val(),a.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(e){var n=t(this);if(n.data("minicolors-initialized"))switch(e.keyCode){case 9:o();break;case 13:case 27:o(),n.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&l(e,!0)}).on("paste.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&setTimeout(function(){l(e,!0)},1)})})},function(t,e){!function(t,e,n,i){"use strict";function o(t){var e=n(t.currentTarget),i=t.data?t.data.options:{},o=e.attr("data-fancybox")||"",r=0,s=[];t.isDefaultPrevented()||(t.preventDefault(),o?(s=i.selector?n(i.selector):t.data?t.data.items:[],s=s.length?s.filter('[data-fancybox="'+o+'"]'):n('[data-fancybox="'+o+'"]'),(r=s.index(e))<0&&(r=0)):s=[e],n.fancybox.open(s,i,r))}if(n&&!n.fn.fancybox){var r={loop:!1,margin:[44,0],gutter:50,keyboard:!0,arrows:!0,infobar:!0,toolbar:!0,buttons:["slideShow","fullScreen","thumbs","share","close"],idleTime:3,smallBtn:"auto",protect:!1,modal:!1,image:{preload:"auto"},ajax:{settings:{data:{fancybox:!0}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency="true" src=""></iframe>',preload:!0,css:{},attr:{scrolling:"auto"}},defaultType:"image",animationEffect:"zoom",animationDuration:500,zoomOpacity:"auto",transitionEffect:"fade",transitionDuration:366,slideClass:"",baseClass:"",baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div><div class="fancybox-caption-wrap"><div class="fancybox-caption"></div></div></div></div>',spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>{{ERROR}}<p></div>',btnTpl:{download:'<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}"><svg viewBox="0 0 40 40"><path d="M20,23 L20,8 L20,23 L13,16 L20,23 L27,16 L20,23 M26,28 L13,28 L27,28 L14,28" /></svg></a>',zoom:'<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}"><svg viewBox="0 0 40 40"><path d="M 18,17 m-8,0 a 8,8 0 1,0 16,0 a 8,8 0 1,0 -16,0 M25,23 L31,29 L25,23" /></svg></button>',close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"><svg viewBox="0 0 40 40"><path d="M10,10 L30,30 M30,10 L10,30" /></svg></button>',smallBtn:'<button data-fancybox-close class="fancybox-close-small" title="{{CLOSE}}"></button>',arrowLeft:'<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}"><svg viewBox="0 0 40 40"><path d="M10,20 L30,20 L10,20 L18,28 L10,20 L18,12 L10,20"></path></svg></button>',arrowRight:'<button data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="{{NEXT}}"><svg viewBox="0 0 40 40"><path d="M30,20 L10,20 L30,20 L22,28 L30,20 L22,12 L30,20"></path></svg></button>'},parentEl:"body",autoFocus:!1,backFocus:!0,trapFocus:!0,fullScreen:{autoStart:!1},touch:{vertical:!0,momentum:!0},hash:null,media:{},slideShow:{autoStart:!1,speed:4e3},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"},onInit:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeClose:n.noop,afterClose:n.noop,onActivate:n.noop,onDeactivate:n.noop,clickContent:function(t,e){return"image"===t.type&&"zoom"},clickSlide:"close",clickOutside:"close",dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1,mobile:{margin:0,clickContent:function(t,e){return"image"===t.type&&"toggleControls"},clickSlide:function(t,e){return"image"===t.type?"toggleControls":"close"},dblclickContent:function(t,e){return"image"===t.type&&"zoom"},dblclickSlide:function(t,e){return"image"===t.type&&"zoom"}},lang:"en",i18n:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow",FULL_SCREEN:"Full screen",THUMBS:"Thumbnails",DOWNLOAD:"Download",SHARE:"Share",ZOOM:"Zoom"},de:{CLOSE:"Schliessen",NEXT:"Weiter",PREV:"Zurück",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es später nochmal.",PLAY_START:"Diaschau starten",PLAY_STOP:"Diaschau beenden",FULL_SCREEN:"Vollbild",THUMBS:"Vorschaubilder",DOWNLOAD:"Herunterladen",SHARE:"Teilen",ZOOM:"Maßstab"}}},s=n(t),a=n(e),l=0,c=function(t){return t&&t.hasOwnProperty&&t instanceof n},u=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)}}(),h=function(){var t,n=e.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(void 0!==n.style[t])return i[t];return"transitionend"}(),d=function(t){return t&&t.length&&t[0].offsetHeight},f=function(t,i,o){var r=this;r.opts=n.extend(!0,{index:o},n.fancybox.defaults,i||{}),n.fancybox.isMobile&&(r.opts=n.extend(!0,{},r.opts,r.opts.mobile)),i&&n.isArray(i.buttons)&&(r.opts.buttons=i.buttons),r.id=r.opts.id||++l,r.group=[],r.currIndex=parseInt(r.opts.index,10)||0,r.prevIndex=null,r.prevPos=null,r.currPos=0,r.firstRun=null,r.createGroup(t),r.group.length&&(r.$lastFocus=n(e.activeElement).blur(),r.slides={},r.init())};n.extend(f.prototype,{init:function(){var i,o,r,s=this,l=s.group[s.currIndex],c=l.opts,u=n.fancybox.scrollbarWidth;s.scrollTop=a.scrollTop(),s.scrollLeft=a.scrollLeft(),n.fancybox.getInstance()||(n("body").addClass("fancybox-active"),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!t.MSStream?"image"!==l.type&&n("body").css("top",-1*n("body").scrollTop()).addClass("fancybox-iosfix"):!n.fancybox.isMobile&&e.body.scrollHeight>t.innerHeight&&(void 0===u&&(i=n('<div style="width:50px;height:50px;overflow:scroll;" />').appendTo("body"),u=n.fancybox.scrollbarWidth=i[0].offsetWidth-i[0].clientWidth,i.remove()),n("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar { margin-right: '+u+"px; }</style>"),n("body").addClass("compensate-for-scrollbar"))),r="",n.each(c.buttons,function(t,e){r+=c.btnTpl[e]||""}),o=n(s.translate(s,c.baseTpl.replace("{{buttons}}",r).replace("{{arrows}}",c.btnTpl.arrowLeft+c.btnTpl.arrowRight))).attr("id","fancybox-container-"+s.id).addClass("fancybox-is-hidden").addClass(c.baseClass).data("FancyBox",s).appendTo(c.parentEl),s.$refs={container:o},["bg","inner","infobar","toolbar","stage","caption","navigation"].forEach(function(t){s.$refs[t]=o.find(".fancybox-"+t)}),s.trigger("onInit"),s.activate(),s.jumpTo(s.currIndex)},translate:function(t,e){var n=t.opts.i18n[t.opts.lang];return e.replace(/\{\{(\w+)\}\}/g,function(t,e){var i=n[e];return void 0===i?t:i})},createGroup:function(t){var e=this,i=n.makeArray(t);n.each(i,function(t,i){var o,r,s,a,l={},c={};n.isPlainObject(i)?(l=i,c=i.opts||i):"object"===n.type(i)&&n(i).length?(o=n(i),c=o.data(),c=n.extend({},c,c.options||{}),c.$orig=o,l.src=c.src||o.attr("href"),l.type||l.src||(l.type="inline",l.src=i)):l={type:"html",src:i+""},l.opts=n.extend(!0,{},e.opts,c),n.isArray(c.buttons)&&(l.opts.buttons=c.buttons),r=l.type||l.opts.type,s=l.src||"",!r&&s&&(s.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?r="image":s.match(/\.(pdf)((\?|#).*)?$/i)?r="pdf":"#"===s.charAt(0)&&(r="inline")),r?l.type=r:e.trigger("objectNeedsType",l),l.index=e.group.length,l.opts.$orig&&!l.opts.$orig.length&&delete l.opts.$orig,!l.opts.$thumb&&l.opts.$orig&&(l.opts.$thumb=l.opts.$orig.find("img:first")),l.opts.$thumb&&!l.opts.$thumb.length&&delete l.opts.$thumb,"function"===n.type(l.opts.caption)&&(l.opts.caption=l.opts.caption.apply(i,[e,l])),"function"===n.type(e.opts.caption)&&(l.opts.caption=e.opts.caption.apply(i,[e,l])),l.opts.caption instanceof n||(l.opts.caption=void 0===l.opts.caption?"":l.opts.caption+""),"ajax"===r&&(a=s.split(/\s+/,2),a.length>1&&(l.src=a.shift(),l.opts.filter=a.shift())),"auto"==l.opts.smallBtn&&(n.inArray(r,["html","inline","ajax"])>-1?(l.opts.toolbar=!1,l.opts.smallBtn=!0):l.opts.smallBtn=!1),"pdf"===r&&(l.type="iframe",l.opts.iframe.preload=!1),l.opts.modal&&(l.opts=n.extend(!0,l.opts,{infobar:0,toolbar:0,smallBtn:0,keyboard:0,slideShow:0,fullScreen:0,thumbs:0,touch:0,clickContent:!1,clickSlide:!1,clickOutside:!1,dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1})),e.group.push(l)})},addEvents:function(){var i=this;i.removeEvents(),i.$refs.container.on("click.fb-close","[data-fancybox-close]",function(t){t.stopPropagation(),t.preventDefault(),i.close(t)}).on("click.fb-prev touchend.fb-prev","[data-fancybox-prev]",function(t){t.stopPropagation(),t.preventDefault(),i.previous()}).on("click.fb-next touchend.fb-next","[data-fancybox-next]",function(t){t.stopPropagation(),t.preventDefault(),i.next()}).on("click.fb","[data-fancybox-zoom]",function(t){i[i.isScaledDown()?"scaleToActual":"scaleToFit"]()}),s.on("orientationchange.fb resize.fb",function(t){t&&t.originalEvent&&"resize"===t.originalEvent.type?u(function(){i.update()}):(i.$refs.stage.hide(),setTimeout(function(){i.$refs.stage.show(),i.update()},600))}),a.on("focusin.fb",function(t){var o=n.fancybox?n.fancybox.getInstance():null;o.isClosing||!o.current||!o.current.opts.trapFocus||n(t.target).hasClass("fancybox-container")||n(t.target).is(e)||o&&"fixed"!==n(t.target).css("position")&&!o.$refs.container.has(t.target).length&&(t.stopPropagation(),o.focus(),s.scrollTop(i.scrollTop).scrollLeft(i.scrollLeft))}),a.on("keydown.fb",function(t){var e=i.current,o=t.keyCode||t.which;if(e&&e.opts.keyboard&&!n(t.target).is("input")&&!n(t.target).is("textarea"))return 8===o||27===o?(t.preventDefault(),void i.close(t)):37===o||38===o?(t.preventDefault(),void i.previous()):39===o||40===o?(t.preventDefault(),void i.next()):void i.trigger("afterKeydown",t,o)}),i.group[i.currIndex].opts.idleTime&&(i.idleSecondsCounter=0,a.on("mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle",function(t){i.idleSecondsCounter=0,i.isIdle&&i.showControls(),i.isIdle=!1}),i.idleInterval=t.setInterval(function(){++i.idleSecondsCounter>=i.group[i.currIndex].opts.idleTime&&(i.isIdle=!0,i.idleSecondsCounter=0,i.hideControls())},1e3))},removeEvents:function(){var e=this;s.off("orientationchange.fb resize.fb"),a.off("focusin.fb keydown.fb .fb-idle"),this.$refs.container.off(".fb-close .fb-prev .fb-next"),e.idleInterval&&(t.clearInterval(e.idleInterval),e.idleInterval=null)},previous:function(t){return this.jumpTo(this.currPos-1,t)},next:function(t){return this.jumpTo(this.currPos+1,t)},jumpTo:function(t,e,i){var o,r,s,a,l,c,u,h=this,f=h.group.length;if(!(h.isSliding||h.isClosing||h.isAnimating&&h.firstRun)){if(t=parseInt(t,10),!(r=h.current?h.current.opts.loop:h.opts.loop)&&(t<0||t>=f))return!1;if(o=h.firstRun=null===h.firstRun,!(f<2&&!o&&h.isSliding)){if(a=h.current,h.prevIndex=h.currIndex,h.prevPos=h.currPos,s=h.createSlide(t),f>1&&((r||s.index>0)&&h.createSlide(t-1),(r||s.index<f-1)&&h.createSlide(t+1)),h.current=s,h.currIndex=s.index,h.currPos=s.pos,h.trigger("beforeShow",o),h.updateControls(),c=n.fancybox.getTranslate(s.$slide),s.isMoved=(0!==c.left||0!==c.top)&&!s.$slide.hasClass("fancybox-animated"),s.forcedDuration=void 0,n.isNumeric(e)?s.forcedDuration=e:e=s.opts[o?"animationDuration":"transitionDuration"],e=parseInt(e,10),o)return s.opts.animationEffect&&e&&h.$refs.container.css("transition-duration",e+"ms"),h.$refs.container.removeClass("fancybox-is-hidden"),d(h.$refs.container),h.$refs.container.addClass("fancybox-is-open"),s.$slide.addClass("fancybox-slide--current"),h.loadSlide(s),void h.preload();n.each(h.slides,function(t,e){n.fancybox.stop(e.$slide)}),s.$slide.removeClass("fancybox-slide--next fancybox-slide--previous").addClass("fancybox-slide--current"),s.isMoved?(l=Math.round(s.$slide.width()),n.each(h.slides,function(t,i){var o=i.pos-s.pos;n.fancybox.animate(i.$slide,{top:0,left:o*l+o*i.opts.gutter},e,function(){i.$slide.removeAttr("style").removeClass("fancybox-slide--next fancybox-slide--previous"),i.pos===h.currPos&&(s.isMoved=!1,h.complete())})})):h.$refs.stage.children().removeAttr("style"),s.isLoaded?h.revealContent(s):h.loadSlide(s),h.preload(),a.pos!==s.pos&&(u="fancybox-slide--"+(a.pos>s.pos?"next":"previous"),a.$slide.removeClass("fancybox-slide--complete fancybox-slide--current fancybox-slide--next fancybox-slide--previous"),a.isComplete=!1,e&&(s.isMoved||s.opts.transitionEffect)&&(s.isMoved?a.$slide.addClass(u):(u="fancybox-animated "+u+" fancybox-fx-"+s.opts.transitionEffect,n.fancybox.animate(a.$slide,u,e,function(){a.$slide.removeClass(u).removeAttr("style")}))))}}},createSlide:function(t){var e,i,o=this;return i=t%o.group.length,i=i<0?o.group.length+i:i,!o.slides[t]&&o.group[i]&&(e=n('<div class="fancybox-slide"></div>').appendTo(o.$refs.stage),o.slides[t]=n.extend(!0,{},o.group[i],{pos:t,$slide:e,isLoaded:!1}),o.updateSlide(o.slides[t])),o.slides[t]},scaleToActual:function(t,e,i){var o,r,s,a,l,c=this,u=c.current,h=u.$content,d=parseInt(u.$slide.width(),10),f=parseInt(u.$slide.height(),10),p=u.width,m=u.height;"image"!=u.type||u.hasError||!h||c.isAnimating||(n.fancybox.stop(h),c.isAnimating=!0,t=void 0===t?.5*d:t,e=void 0===e?.5*f:e,o=n.fancybox.getTranslate(h),a=p/o.width,l=m/o.height,r=.5*d-.5*p,s=.5*f-.5*m,p>d&&(r=o.left*a-(t*a-t),r>0&&(r=0),r<d-p&&(r=d-p)),m>f&&(s=o.top*l-(e*l-e),s>0&&(s=0),s<f-m&&(s=f-m)),c.updateCursor(p,m),n.fancybox.animate(h,{top:s,left:r,scaleX:a,scaleY:l},i||330,function(){c.isAnimating=!1}),c.SlideShow&&c.SlideShow.isActive&&c.SlideShow.stop())},scaleToFit:function(t){var e,i=this,o=i.current,r=o.$content;"image"!=o.type||o.hasError||!r||i.isAnimating||(n.fancybox.stop(r),i.isAnimating=!0,e=i.getFitPos(o),i.updateCursor(e.width,e.height),n.fancybox.animate(r,{top:e.top,left:e.left,scaleX:e.width/r.width(),scaleY:e.height/r.height()},t||330,function(){i.isAnimating=!1}))},getFitPos:function(t){var e,i,o,r,s,a=this,l=t.$content,c=t.width,u=t.height,h=t.opts.margin;return!(!l||!l.length||!c&&!u)&&("number"===n.type(h)&&(h=[h,h]),2==h.length&&(h=[h[0],h[1],h[0],h[1]]),e=parseInt(a.$refs.stage.width(),10)-(h[1]+h[3]),i=parseInt(a.$refs.stage.height(),10)-(h[0]+h[2]),o=Math.min(1,e/c,i/u),r=Math.floor(o*c),s=Math.floor(o*u),{top:Math.floor(.5*(i-s))+h[0],left:Math.floor(.5*(e-r))+h[3],width:r,height:s})},update:function(){var t=this;n.each(t.slides,function(e,n){t.updateSlide(n)})},updateSlide:function(t){var e=this,i=t.$content;i&&(t.width||t.height)&&(e.isAnimating=!1,n.fancybox.stop(i),n.fancybox.setTranslate(i,e.getFitPos(t)),t.pos===e.currPos&&e.updateCursor()),t.$slide.trigger("refresh"),e.trigger("onUpdate",t)},updateCursor:function(t,e){var n,i=this,o=i.$refs.container.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-drag fancybox-can-zoomOut");i.current&&!i.isClosing&&(i.isZoomable()?(o.addClass("fancybox-is-zoomable"),n=void 0!==t&&void 0!==e?t<i.current.width&&e<i.current.height:i.isScaledDown(),n?o.addClass("fancybox-can-zoomIn"):i.current.opts.touch?o.addClass("fancybox-can-drag"):o.addClass("fancybox-can-zoomOut")):i.current.opts.touch&&o.addClass("fancybox-can-drag"))},isZoomable:function(){var t,e=this,i=e.current;if(i&&!e.isClosing)return!!("image"===i.type&&i.isLoaded&&!i.hasError&&("zoom"===i.opts.clickContent||n.isFunction(i.opts.clickContent)&&"zoom"===i.opts.clickContent(i))&&(t=e.getFitPos(i),i.width>t.width||i.height>t.height))},isScaledDown:function(){var t=this,e=t.current,i=e.$content,o=!1;return i&&(o=n.fancybox.getTranslate(i),o=o.width<e.width||o.height<e.height),o},canPan:function(){var t=this,e=t.current,n=e.$content,i=!1;return n&&(i=t.getFitPos(e),i=Math.abs(n.width()-i.width)>1||Math.abs(n.height()-i.height)>1),i},loadSlide:function(t){var e,i,o,r=this;if(!t.isLoading&&!t.isLoaded){switch(t.isLoading=!0,r.trigger("beforeLoad",t),e=t.type,i=t.$slide,i.off("refresh").trigger("onReset").addClass("fancybox-slide--"+(e||"unknown")).addClass(t.opts.slideClass),e){case"image":r.setImage(t);break;case"iframe":r.setIframe(t);break;case"html":r.setContent(t,t.src||t.content);break;case"inline":n(t.src).length?r.setContent(t,n(t.src)):r.setError(t);break;case"ajax":r.showLoading(t),o=n.ajax(n.extend({},t.opts.ajax.settings,{url:t.src,success:function(e,n){"success"===n&&r.setContent(t,e)},error:function(e,n){e&&"abort"!==n&&r.setError(t)}})),i.one("onReset",function(){o.abort()});break;default:r.setError(t)}return!0}},setImage:function(e){var i,o,r,s,a=this,l=e.opts.srcset||e.opts.image.srcset;if(l){r=t.devicePixelRatio||1,s=t.innerWidth*r,o=l.split(",").map(function(t){var e={};return t.trim().split(/\s+/).forEach(function(t,n){var i=parseInt(t.substring(0,t.length-1),10);if(0===n)return e.url=t;i&&(e.value=i,e.postfix=t[t.length-1])}),e}),o.sort(function(t,e){return t.value-e.value});for(var c=0;c<o.length;c++){var u=o[c];if("w"===u.postfix&&u.value>=s||"x"===u.postfix&&u.value>=r){i=u;break}}!i&&o.length&&(i=o[o.length-1]),i&&(e.src=i.url,e.width&&e.height&&"w"==i.postfix&&(e.height=e.width/e.height*i.value,e.width=i.value))}e.$content=n('<div class="fancybox-image-wrap"></div>').addClass("fancybox-is-hidden").appendTo(e.$slide),!1!==e.opts.preload&&e.opts.width&&e.opts.height&&(e.opts.thumb||e.opts.$thumb)?(e.width=e.opts.width,e.height=e.opts.height,e.$ghost=n("<img />").one("error",function(){n(this).remove(),e.$ghost=null,a.setBigImage(e)}).one("load",function(){a.afterLoad(e),a.setBigImage(e)}).addClass("fancybox-image").appendTo(e.$content).attr("src",e.opts.thumb||e.opts.$thumb.attr("src"))):a.setBigImage(e)},setBigImage:function(t){var e=this,i=n("<img />");t.$image=i.one("error",function(){e.setError(t)}).one("load",function(){clearTimeout(t.timouts),t.timouts=null,e.isClosing||(t.width=this.naturalWidth,t.height=this.naturalHeight,t.opts.image.srcset&&i.attr("sizes","100vw").attr("srcset",t.opts.image.srcset),e.hideLoading(t),t.$ghost?t.timouts=setTimeout(function(){t.timouts=null,t.$ghost.hide()},Math.min(300,Math.max(1e3,t.height/1600))):e.afterLoad(t))}).addClass("fancybox-image").attr("src",t.src).appendTo(t.$content),(i[0].complete||"complete"==i[0].readyState)&&i[0].naturalWidth&&i[0].naturalHeight?i.trigger("load"):i[0].error?i.trigger("error"):t.timouts=setTimeout(function(){i[0].complete||t.hasError||e.showLoading(t)},100)},setIframe:function(t){var e,i=this,o=t.opts.iframe,r=t.$slide;t.$content=n('<div class="fancybox-content'+(o.preload?" fancybox-is-hidden":"")+'"></div>').css(o.css).appendTo(r),e=n(o.tpl.replace(/\{rnd\}/g,(new Date).getTime())).attr(o.attr).appendTo(t.$content),o.preload?(i.showLoading(t),e.on("load.fb error.fb",function(e){this.isReady=1,t.$slide.trigger("refresh"),i.afterLoad(t)}),r.on("refresh.fb",function(){var n,i,r,s=t.$content,a=o.css.width,l=o.css.height;if(1===e[0].isReady){try{i=e.contents(),r=i.find("body")}catch(t){}r&&r.length&&(void 0===a&&(n=e[0].contentWindow.document.documentElement.scrollWidth,a=Math.ceil(r.outerWidth(!0)+(s.width()-n)),a+=s.outerWidth()-s.innerWidth()),void 0===l&&(l=Math.ceil(r.outerHeight(!0)),l+=s.outerHeight()-s.innerHeight()),a&&s.width(a),l&&s.height(l)),s.removeClass("fancybox-is-hidden")}})):this.afterLoad(t),e.attr("src",t.src),!0===t.opts.smallBtn&&t.$content.prepend(i.translate(t,t.opts.btnTpl.smallBtn)),r.one("onReset",function(){try{n(this).find("iframe").hide().attr("src","//about:blank")}catch(t){}n(this).empty(),t.isLoaded=!1})},setContent:function(t,e){var i=this;i.isClosing||(i.hideLoading(t),t.$slide.empty(),c(e)&&e.parent().length?(e.parent(".fancybox-slide--inline").trigger("onReset"),t.$placeholder=n("<div></div>").hide().insertAfter(e),e.css("display","inline-block")):t.hasError||("string"===n.type(e)&&(e=n("<div>").append(n.trim(e)).contents(),3===e[0].nodeType&&(e=n("<div>").html(e))),t.opts.filter&&(e=n("<div>").html(e).find(t.opts.filter))),t.$slide.one("onReset",function(){t.$placeholder&&(t.$placeholder.after(e.hide()).remove(),t.$placeholder=null),t.$smallBtn&&(t.$smallBtn.remove(),t.$smallBtn=null),t.hasError||(n(this).empty(),t.isLoaded=!1)}),t.$content=n(e).appendTo(t.$slide),this.afterLoad(t))},setError:function(t){t.hasError=!0,t.$slide.removeClass("fancybox-slide--"+t.type),this.setContent(t,this.translate(t,t.opts.errorTpl))},showLoading:function(t){var e=this;(t=t||e.current)&&!t.$spinner&&(t.$spinner=n(e.opts.spinnerTpl).appendTo(t.$slide))},hideLoading:function(t){var e=this;(t=t||e.current)&&t.$spinner&&(t.$spinner.remove(),delete t.$spinner)},afterLoad:function(t){var e=this;e.isClosing||(t.isLoading=!1,t.isLoaded=!0,e.trigger("afterLoad",t),e.hideLoading(t),t.opts.smallBtn&&!t.$smallBtn&&(t.$smallBtn=n(e.translate(t,t.opts.btnTpl.smallBtn)).appendTo(t.$content.filter("div,form").first())),t.opts.protect&&t.$content&&!t.hasError&&(t.$content.on("contextmenu.fb",function(t){return 2==t.button&&t.preventDefault(),!0}),"image"===t.type&&n('<div class="fancybox-spaceball"></div>').appendTo(t.$content)),e.revealContent(t))},revealContent:function(t){var e,i,o,r,s,a=this,l=t.$slide,c=!1;return e=t.opts[a.firstRun?"animationEffect":"transitionEffect"],o=t.opts[a.firstRun?"animationDuration":"transitionDuration"],o=parseInt(void 0===t.forcedDuration?o:t.forcedDuration,10),!t.isMoved&&t.pos===a.currPos&&o||(e=!1),"zoom"!==e||t.pos===a.currPos&&o&&"image"===t.type&&!t.hasError&&(c=a.getThumbPos(t))||(e="fade"),"zoom"===e?(s=a.getFitPos(t),s.scaleX=s.width/c.width,s.scaleY=s.height/c.height,delete s.width,delete s.height,r=t.opts.zoomOpacity,"auto"==r&&(r=Math.abs(t.width/t.height-c.width/c.height)>.1),r&&(c.opacity=.1,s.opacity=1),n.fancybox.setTranslate(t.$content.removeClass("fancybox-is-hidden"),c),d(t.$content),void n.fancybox.animate(t.$content,s,o,function(){a.complete()})):(a.updateSlide(t),e?(n.fancybox.stop(l),i="fancybox-animated fancybox-slide--"+(t.pos>=a.prevPos?"next":"previous")+" fancybox-fx-"+e,l.removeAttr("style").removeClass("fancybox-slide--current fancybox-slide--next fancybox-slide--previous").addClass(i),t.$content.removeClass("fancybox-is-hidden"),d(l),void n.fancybox.animate(l,"fancybox-slide--current",o,function(e){l.removeClass(i).removeAttr("style"),t.pos===a.currPos&&a.complete()},!0)):(d(l),t.$content.removeClass("fancybox-is-hidden"),void(t.pos===a.currPos&&a.complete())))},getThumbPos:function(i){var o,r=this,s=!1,a=i.opts.$thumb,l=a?a.offset():0;return l&&a[0].ownerDocument===e&&function(e){for(var i=e[0],o=i.getBoundingClientRect(),r=[];null!==i.parentElement;)"hidden"!==n(i.parentElement).css("overflow")&&"auto"!==n(i.parentElement).css("overflow")||r.push(i.parentElement.getBoundingClientRect()),i=i.parentElement;return r.every(function(t){var e=Math.min(o.right,t.right)-Math.max(o.left,t.left),n=Math.min(o.bottom,t.bottom)-Math.max(o.top,t.top);return e>0&&n>0})&&o.bottom>0&&o.right>0&&o.left<n(t).width()&&o.top<n(t).height()}(a)&&(o=r.$refs.stage.offset(),s={top:l.top-o.top+parseFloat(a.css("border-top-width")||0),left:l.left-o.left+parseFloat(a.css("border-left-width")||0),width:a.width(),height:a.height(),scaleX:1,scaleY:1}),s},complete:function(){var t=this,i=t.current,o={};i.isMoved||!i.isLoaded||i.isComplete||(i.isComplete=!0,i.$slide.siblings().trigger("onReset"),d(i.$slide),i.$slide.addClass("fancybox-slide--complete"),n.each(t.slides,function(e,i){i.pos>=t.currPos-1&&i.pos<=t.currPos+1?o[i.pos]=i:i&&(n.fancybox.stop(i.$slide),i.$slide.off().remove())}),t.slides=o,t.updateCursor(),t.trigger("afterShow"),(n(e.activeElement).is("[disabled]")||i.opts.autoFocus&&"image"!=i.type&&"iframe"!==i.type)&&t.focus())},preload:function(){var t,e,n=this;n.group.length<2||(t=n.slides[n.currPos+1],e=n.slides[n.currPos-1],t&&"image"===t.type&&n.loadSlide(t),e&&"image"===e.type&&n.loadSlide(e))},focus:function(){var t,e=this.current;this.isClosing||(e&&e.isComplete&&(t=e.$slide.find("input[autofocus]:enabled:visible:first"),t.length||(t=e.$slide.find("button,:input,[tabindex],a").filter(":enabled:visible:first"))),t=t&&t.length?t:this.$refs.container,t.focus())},activate:function(){var t=this;n(".fancybox-container").each(function(){var e=n(this).data("FancyBox");e&&e.id!==t.id&&!e.isClosing&&(e.trigger("onDeactivate"),e.removeEvents(),e.isVisible=!1)}),t.isVisible=!0,(t.current||t.isIdle)&&(t.update(),t.updateControls()),t.trigger("onActivate"),t.addEvents()},close:function(t,e){var i,o,r,s,a,l,c=this,f=c.current,p=function(){c.cleanUp(t)};return!c.isClosing&&(c.isClosing=!0,!1===c.trigger("beforeClose",t)?(c.isClosing=!1,u(function(){c.update()}),!1):(c.removeEvents(),f.timouts&&clearTimeout(f.timouts),r=f.$content,i=f.opts.animationEffect,o=n.isNumeric(e)?e:i?f.opts.animationDuration:0,f.$slide.off(h).removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated"),f.$slide.siblings().trigger("onReset").remove(),o&&c.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing"),c.hideLoading(f),c.hideControls(),c.updateCursor(),"zoom"!==i||!0!==t&&r&&o&&"image"===f.type&&!f.hasError&&(l=c.getThumbPos(f))||(i="fade"),"zoom"===i?(n.fancybox.stop(r),a=n.fancybox.getTranslate(r),a.width=a.width*a.scaleX,a.height=a.height*a.scaleY,s=f.opts.zoomOpacity,"auto"==s&&(s=Math.abs(f.width/f.height-l.width/l.height)>.1),s&&(l.opacity=0),a.scaleX=a.width/l.width,a.scaleY=a.height/l.height,a.width=l.width,a.height=l.height,n.fancybox.setTranslate(f.$content,a),d(f.$content),n.fancybox.animate(f.$content,l,o,p),!0):(i&&o?!0===t?setTimeout(p,o):n.fancybox.animate(f.$slide.removeClass("fancybox-slide--current"),"fancybox-animated fancybox-slide--previous fancybox-fx-"+i,o,p):p(),!0)))},cleanUp:function(t){var i,o,r=this,a=n("body");r.current.$slide.trigger("onReset"),r.$refs.container.empty().remove(),r.trigger("afterClose",t),r.$lastFocus&&r.current.opts.backFocus&&r.$lastFocus.focus(),r.current=null,i=n.fancybox.getInstance(),i?i.activate():(s.scrollTop(r.scrollTop).scrollLeft(r.scrollLeft),a.removeClass("fancybox-active compensate-for-scrollbar"),a.hasClass("fancybox-iosfix")&&(o=parseInt(e.body.style.top,10),a.removeClass("fancybox-iosfix").css("top","").scrollTop(-1*o)),n("#fancybox-style-noscroll").remove())},trigger:function(t,e){var i,o=Array.prototype.slice.call(arguments,1),r=this,s=e&&e.opts?e:r.current;if(s?o.unshift(s):s=r,o.unshift(r),n.isFunction(s.opts[t])&&(i=s.opts[t].apply(s,o)),!1===i)return i;"afterClose"!==t&&r.$refs?r.$refs.container.trigger(t+".fb",o):a.trigger(t+".fb",o)},updateControls:function(t){var e=this,n=e.current,i=n.index,o=n.opts.caption,r=e.$refs.container,s=e.$refs.caption;n.$slide.trigger("refresh"),e.$caption=o&&o.length?s.html(o):null,e.isHiddenControls||e.isIdle||e.showControls(),r.find("[data-fancybox-count]").html(e.group.length),r.find("[data-fancybox-index]").html(i+1),r.find("[data-fancybox-prev]").prop("disabled",!n.opts.loop&&i<=0),r.find("[data-fancybox-next]").prop("disabled",!n.opts.loop&&i>=e.group.length-1),"image"===n.type?r.find("[data-fancybox-download]").attr("href",n.opts.image.src||n.src).show():r.find("[data-fancybox-download],[data-fancybox-zoom]").hide()},hideControls:function(){this.isHiddenControls=!0,this.$refs.container.removeClass("fancybox-show-infobar fancybox-show-toolbar fancybox-show-caption fancybox-show-nav")},showControls:function(){var t=this,e=t.current?t.current.opts:t.opts,n=t.$refs.container;t.isHiddenControls=!1,t.idleSecondsCounter=0,n.toggleClass("fancybox-show-toolbar",!(!e.toolbar||!e.buttons)).toggleClass("fancybox-show-infobar",!!(e.infobar&&t.group.length>1)).toggleClass("fancybox-show-nav",!!(e.arrows&&t.group.length>1)).toggleClass("fancybox-is-modal",!!e.modal),t.$caption?n.addClass("fancybox-show-caption "):n.removeClass("fancybox-show-caption")},toggleControls:function(){this.isHiddenControls?this.showControls():this.hideControls()}}),n.fancybox={version:"3.2.5",defaults:r,getInstance:function(t){var e=n('.fancybox-container:not(".fancybox-is-closing"):last').data("FancyBox"),i=Array.prototype.slice.call(arguments,1);return e instanceof f&&("string"===n.type(t)?e[t].apply(e,i):"function"===n.type(t)&&t.apply(e,i),e)},open:function(t,e,n){return new f(t,e,n)},close:function(t){var e=this.getInstance();e&&(e.close(),!0===t&&this.close())},destroy:function(){this.close(!0),a.off("click.fb-start")},isMobile:void 0!==e.createTouch&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),use3d:function(){var n=e.createElement("div");return t.getComputedStyle&&t.getComputedStyle(n).getPropertyValue("transform")&&!(e.documentMode&&e.documentMode<11)}(),getTranslate:function(t){var e;if(!t||!t.length)return!1;if(e=t.eq(0).css("transform"),e&&-1!==e.indexOf("matrix")?(e=e.split("(")[1],e=e.split(")")[0],e=e.split(",")):e=[],e.length)e=e.length>10?[e[13],e[12],e[0],e[5]]:[e[5],e[4],e[0],e[3]],e=e.map(parseFloat);else{e=[0,0,1,1];var n=/\.*translate\((.*)px,(.*)px\)/i,i=n.exec(t.eq(0).attr("style"));i&&(e[0]=parseFloat(i[2]),e[1]=parseFloat(i[1]))}return{top:e[0],left:e[1],scaleX:e[2],scaleY:e[3],opacity:parseFloat(t.css("opacity")),width:t.width(),height:t.height()}},setTranslate:function(t,e){var n="",i={};if(t&&e)return void 0===e.left&&void 0===e.top||(n=(void 0===e.left?t.position().left:e.left)+"px, "+(void 0===e.top?t.position().top:e.top)+"px",n=this.use3d?"translate3d("+n+", 0px)":"translate("+n+")"),void 0!==e.scaleX&&void 0!==e.scaleY&&(n=(n.length?n+" ":"")+"scale("+e.scaleX+", "+e.scaleY+")"),n.length&&(i.transform=n),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.width&&(i.width=e.width),void 0!==e.height&&(i.height=e.height),t.css(i)},animate:function(t,e,i,o,r){n.isFunction(i)&&(o=i,i=null),n.isPlainObject(e)||t.removeAttr("style"),t.on(h,function(i){(!i||!i.originalEvent||t.is(i.originalEvent.target)&&"z-index"!=i.originalEvent.propertyName)&&(n.fancybox.stop(t),n.isPlainObject(e)?void 0!==e.scaleX&&void 0!==e.scaleY&&(t.css("transition-duration",""),e.width=Math.round(t.width()*e.scaleX),e.height=Math.round(t.height()*e.scaleY),e.scaleX=1,e.scaleY=1,n.fancybox.setTranslate(t,e)):!0!==r&&t.removeClass(e),n.isFunction(o)&&o(i))}),n.isNumeric(i)&&t.css("transition-duration",i+"ms"),n.isPlainObject(e)?n.fancybox.setTranslate(t,e):t.addClass(e),e.scaleX&&t.hasClass("fancybox-image-wrap")&&t.parent().addClass("fancybox-is-scaling"),t.data("timer",setTimeout(function(){t.trigger("transitionend")},i+16))},stop:function(t){clearTimeout(t.data("timer")),t.off("transitionend").css("transition-duration",""),t.hasClass("fancybox-image-wrap")&&t.parent().removeClass("fancybox-is-scaling")}},n.fn.fancybox=function(t){var e;return t=t||{},e=t.selector||!1,e?n("body").off("click.fb-start",e).on("click.fb-start",e,{options:t},o):this.off("click.fb-start").on("click.fb-start",{items:this,options:t},o),this},a.on("click.fb-start","[data-fancybox]",o)}}(window,document,window.jQuery||jQuery),function(t){"use strict";var e=function(e,n,i){if(e)return i=i||"","object"===t.type(i)&&(i=t.param(i,!0)),t.each(n,function(t,n){e=e.replace("$"+t,n||"")}),i.length&&(e+=(e.indexOf("?")>0?"&":"?")+i),e},n={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},paramPlace:8,type:"iframe",url:"//www.youtube.com/embed/$4",thumb:"//img.youtube.com/vi/$4/hqdefault.jpg"},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1,api:1},paramPlace:3,type:"iframe",url:"//player.vimeo.com/video/$2"},metacafe:{matcher:/metacafe.com\/watch\/(\d+)\/(.*)?/,type:"iframe",url:"//www.metacafe.com/embed/$1/?ap=1"},dailymotion:{matcher:/dailymotion.com\/video\/(.*)\/?(.*)/,params:{additionalInfos:0,autoStart:1},type:"iframe",url:"//www.dailymotion.com/embed/video/$1"},vine:{matcher:/vine.co\/v\/([a-zA-Z0-9\?\=\-]+)/,type:"iframe",url:"//vine.co/v/$1/embed/simple"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},gmap_place:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/?ll="+(t[9]?t[9]+"&z="+Math.floor(t[10])+(t[12]?t[12].replace(/^\//,"&"):""):t[12])+"&output="+(t[12]&&t[12].indexOf("layer=c")>0?"svembed":"embed")}},gmap_search:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/maps?q="+t[5].replace("query=","q=").replace("api=1","")+"&output=embed"}}};t(document).on("objectNeedsType.fb",function(i,o,r){var s,a,l,c,u,h,d=r.src||"",f=!1;s=t.extend(!0,{},n,r.opts.media),t.each(s,function(n,i){if(l=d.match(i.matcher)){if(f=i.type,h={},i.paramPlace&&l[i.paramPlace]){u=l[i.paramPlace],"?"==u[0]&&(u=u.substring(1)),u=u.split("&");for(var o=0;o<u.length;++o){var s=u[o].split("=",2);2==s.length&&(h[s[0]]=decodeURIComponent(s[1].replace(/\+/g," ")))}}return c=t.extend(!0,{},i.params,r.opts[n],h),d="function"===t.type(i.url)?i.url.call(this,l,c,r):e(i.url,l,c),a="function"===t.type(i.thumb)?i.thumb.call(this,l,c,r):e(i.thumb,l),"vimeo"===n&&(d=d.replace("&%23","#")),!1}}),f?(r.src=d,r.type=f,r.opts.thumb||r.opts.$thumb&&r.opts.$thumb.length||(r.opts.thumb=a),"iframe"===f&&(t.extend(!0,r.opts,{iframe:{preload:!1,attr:{scrolling:"no"}}}),r.contentProvider=void 0,r.opts.slideClass+=" fancybox-slide--video")):d&&(r.type=r.opts.defaultType)})}(window.jQuery||jQuery),function(t,e,n){"use strict";var i=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)}}(),o=function(){return t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||function(e){t.clearTimeout(e)}}(),r=function(e){var n=[];e=e.originalEvent||e||t.e,e=e.touches&&e.touches.length?e.touches:e.changedTouches&&e.changedTouches.length?e.changedTouches:[e];for(var i in e)e[i].pageX?n.push({x:e[i].pageX,y:e[i].pageY}):e[i].clientX&&n.push({x:e[i].clientX,y:e[i].clientY});return n},s=function(t,e,n){return e&&t?"x"===n?t.x-e.x:"y"===n?t.y-e.y:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0},a=function(t){if(t.is('a,area,button,[role="button"],input,label,select,summary,textarea')||n.isFunction(t.get(0).onclick)||t.data("selectable"))return!0;for(var e=0,i=t[0].attributes,o=i.length;e<o;e++)if("data-fancybox-"===i[e].nodeName.substr(0,14))return!0;return!1},l=function(e){var n=t.getComputedStyle(e)["overflow-y"],i=t.getComputedStyle(e)["overflow-x"],o=("scroll"===n||"auto"===n)&&e.scrollHeight>e.clientHeight,r=("scroll"===i||"auto"===i)&&e.scrollWidth>e.clientWidth;return o||r},c=function(t){for(var e=!1;;){if(e=l(t.get(0)))break;if(t=t.parent(),!t.length||t.hasClass("fancybox-stage")||t.is("body"))break}return e},u=function(t){var e=this;e.instance=t,e.$bg=t.$refs.bg,e.$stage=t.$refs.stage,e.$container=t.$refs.container,e.destroy(),e.$container.on("touchstart.fb.touch mousedown.fb.touch",n.proxy(e,"ontouchstart"))};u.prototype.destroy=function(){this.$container.off(".fb.touch")},u.prototype.ontouchstart=function(i){var o=this,l=n(i.target),u=o.instance,h=u.current,d=h.$content,f="touchstart"==i.type;if(f&&o.$container.off("mousedown.fb.touch"),!h||o.instance.isAnimating||o.instance.isClosing)return i.stopPropagation(),void i.preventDefault();if((!i.originalEvent||2!=i.originalEvent.button)&&l.length&&!a(l)&&!a(l.parent())&&!(i.originalEvent.clientX>l[0].clientWidth+l.offset().left)&&(o.startPoints=r(i),o.startPoints&&!(o.startPoints.length>1&&u.isSliding))){if(o.$target=l,o.$content=d,o.canTap=!0,o.opts=h.opts.touch,n(e).off(".fb.touch"),n(e).on(f?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",n.proxy(o,"ontouchend")),n(e).on(f?"touchmove.fb.touch":"mousemove.fb.touch",n.proxy(o,"ontouchmove")),!o.opts&&!u.canPan()||!l.is(o.$stage)&&!o.$stage.find(l).length)return void(l.is("img")&&i.preventDefault());i.stopPropagation(),n.fancybox.isMobile&&(c(o.$target)||c(o.$target.parent()))||i.preventDefault(),o.canvasWidth=Math.round(h.$slide[0].clientWidth),o.canvasHeight=Math.round(h.$slide[0].clientHeight),o.startTime=(new Date).getTime(),o.distanceX=o.distanceY=o.distance=0,o.isPanning=!1,o.isSwiping=!1,o.isZooming=!1,o.sliderStartPos=o.sliderLastPos||{top:0,left:0},o.contentStartPos=n.fancybox.getTranslate(o.$content),o.contentLastPos=null,1!==o.startPoints.length||o.isZooming||(o.canTap=!u.isSliding,"image"===h.type&&(o.contentStartPos.width>o.canvasWidth+1||o.contentStartPos.height>o.canvasHeight+1)?(n.fancybox.stop(o.$content),o.$content.css("transition-duration","0ms"),o.isPanning=!0):o.isSwiping=!0,o.$container.addClass("fancybox-controls--isGrabbing")),2!==o.startPoints.length||u.isAnimating||h.hasError||"image"!==h.type||!h.isLoaded&&!h.$ghost||(o.isZooming=!0,o.isSwiping=!1,o.isPanning=!1,n.fancybox.stop(o.$content),o.$content.css("transition-duration","0ms"),o.centerPointStartX=.5*(o.startPoints[0].x+o.startPoints[1].x)-n(t).scrollLeft(),o.centerPointStartY=.5*(o.startPoints[0].y+o.startPoints[1].y)-n(t).scrollTop(),o.percentageOfImageAtPinchPointX=(o.centerPointStartX-o.contentStartPos.left)/o.contentStartPos.width,o.percentageOfImageAtPinchPointY=(o.centerPointStartY-o.contentStartPos.top)/o.contentStartPos.height,o.startDistanceBetweenFingers=s(o.startPoints[0],o.startPoints[1]))}},u.prototype.ontouchmove=function(t){var e=this;if(e.newPoints=r(t),n.fancybox.isMobile&&(c(e.$target)||c(e.$target.parent())))return t.stopPropagation(),void(e.canTap=!1);if((e.opts||e.instance.canPan())&&e.newPoints&&e.newPoints.length&&(e.distanceX=s(e.newPoints[0],e.startPoints[0],"x"),e.distanceY=s(e.newPoints[0],e.startPoints[0],"y"),e.distance=s(e.newPoints[0],e.startPoints[0]),e.distance>0)){if(!e.$target.is(e.$stage)&&!e.$stage.find(e.$target).length)return;t.stopPropagation(),t.preventDefault(),e.isSwiping?e.onSwipe():e.isPanning?e.onPan():e.isZooming&&e.onZoom()}},u.prototype.onSwipe=function(){var e,r=this,s=r.isSwiping,a=r.sliderStartPos.left||0;!0===s?Math.abs(r.distance)>10&&(r.canTap=!1,r.instance.group.length<2&&r.opts.vertical?r.isSwiping="y":r.instance.isSliding||!1===r.opts.vertical||"auto"===r.opts.vertical&&n(t).width()>800?r.isSwiping="x":(e=Math.abs(180*Math.atan2(r.distanceY,r.distanceX)/Math.PI),r.isSwiping=e>45&&e<135?"y":"x"),r.instance.isSliding=r.isSwiping,r.startPoints=r.newPoints,n.each(r.instance.slides,function(t,e){n.fancybox.stop(e.$slide),e.$slide.css("transition-duration","0ms"),e.inTransition=!1,e.pos===r.instance.current.pos&&(r.sliderStartPos.left=n.fancybox.getTranslate(e.$slide).left)}),r.instance.SlideShow&&r.instance.SlideShow.isActive&&r.instance.SlideShow.stop()):("x"==s&&(r.distanceX>0&&(r.instance.group.length<2||0===r.instance.current.index&&!r.instance.current.opts.loop)?a+=Math.pow(r.distanceX,.8):r.distanceX<0&&(r.instance.group.length<2||r.instance.current.index===r.instance.group.length-1&&!r.instance.current.opts.loop)?a-=Math.pow(-r.distanceX,.8):a+=r.distanceX),r.sliderLastPos={top:"x"==s?0:r.sliderStartPos.top+r.distanceY,left:a},r.requestId&&(o(r.requestId),r.requestId=null),r.requestId=i(function(){r.sliderLastPos&&(n.each(r.instance.slides,function(t,e){var i=e.pos-r.instance.currPos;n.fancybox.setTranslate(e.$slide,{top:r.sliderLastPos.top,left:r.sliderLastPos.left+i*r.canvasWidth+i*e.opts.gutter})}),r.$container.addClass("fancybox-is-sliding"))}))},u.prototype.onPan=function(){var t,e,r,s=this;s.canTap=!1,t=s.contentStartPos.width>s.canvasWidth?s.contentStartPos.left+s.distanceX:s.contentStartPos.left,e=s.contentStartPos.top+s.distanceY,r=s.limitMovement(t,e,s.contentStartPos.width,s.contentStartPos.height),r.scaleX=s.contentStartPos.scaleX,r.scaleY=s.contentStartPos.scaleY,s.contentLastPos=r,s.requestId&&(o(s.requestId),s.requestId=null),s.requestId=i(function(){n.fancybox.setTranslate(s.$content,s.contentLastPos)})},u.prototype.limitMovement=function(t,e,n,i){var o,r,s,a,l=this,c=l.canvasWidth,u=l.canvasHeight,h=l.contentStartPos.left,d=l.contentStartPos.top,f=l.distanceX,p=l.distanceY;return o=Math.max(0,.5*c-.5*n),r=Math.max(0,.5*u-.5*i),s=Math.min(c-n,.5*c-.5*n),a=Math.min(u-i,.5*u-.5*i),n>c&&(f>0&&t>o&&(t=o-1+Math.pow(-o+h+f,.8)||0),f<0&&t<s&&(t=s+1-Math.pow(s-h-f,.8)||0)),i>u&&(p>0&&e>r&&(e=r-1+Math.pow(-r+d+p,.8)||0),p<0&&e<a&&(e=a+1-Math.pow(a-d-p,.8)||0)),{top:e,left:t}},u.prototype.limitPosition=function(t,e,n,i){var o=this,r=o.canvasWidth,s=o.canvasHeight;return n>r?(t=t>0?0:t,t=t<r-n?r-n:t):t=Math.max(0,r/2-n/2),i>s?(e=e>0?0:e,e=e<s-i?s-i:e):e=Math.max(0,s/2-i/2),{top:e,left:t}},u.prototype.onZoom=function(){var e=this,r=e.contentStartPos.width,a=e.contentStartPos.height,l=e.contentStartPos.left,c=e.contentStartPos.top,u=s(e.newPoints[0],e.newPoints[1]),h=u/e.startDistanceBetweenFingers,d=Math.floor(r*h),f=Math.floor(a*h),p=(r-d)*e.percentageOfImageAtPinchPointX,m=(a-f)*e.percentageOfImageAtPinchPointY,g=(e.newPoints[0].x+e.newPoints[1].x)/2-n(t).scrollLeft(),v=(e.newPoints[0].y+e.newPoints[1].y)/2-n(t).scrollTop(),y=g-e.centerPointStartX,b=v-e.centerPointStartY,w=l+(p+y),x=c+(m+b),C={top:x,left:w,scaleX:e.contentStartPos.scaleX*h,scaleY:e.contentStartPos.scaleY*h};e.canTap=!1,e.newWidth=d,e.newHeight=f,e.contentLastPos=C,e.requestId&&(o(e.requestId),e.requestId=null),e.requestId=i(function(){n.fancybox.setTranslate(e.$content,e.contentLastPos)})},u.prototype.ontouchend=function(t){var i=this,s=Math.max((new Date).getTime()-i.startTime,1),a=i.isSwiping,l=i.isPanning,c=i.isZooming;if(i.endPoints=r(t),i.$container.removeClass("fancybox-controls--isGrabbing"),n(e).off(".fb.touch"),i.requestId&&(o(i.requestId),i.requestId=null),i.isSwiping=!1,i.isPanning=!1,i.isZooming=!1,i.canTap)return i.onTap(t);i.speed=366,i.velocityX=i.distanceX/s*.5,i.velocityY=i.distanceY/s*.5,i.speedX=Math.max(.5*i.speed,Math.min(1.5*i.speed,1/Math.abs(i.velocityX)*i.speed)),l?i.endPanning():c?i.endZooming():i.endSwiping(a)},u.prototype.endSwiping=function(t){var e=this,i=!1;e.instance.isSliding=!1,e.sliderLastPos=null,"y"==t&&Math.abs(e.distanceY)>50?(n.fancybox.animate(e.instance.current.$slide,{top:e.sliderStartPos.top+e.distanceY+150*e.velocityY,opacity:0},150),i=e.instance.close(!0,300)):"x"==t&&e.distanceX>50&&e.instance.group.length>1?i=e.instance.previous(e.speedX):"x"==t&&e.distanceX<-50&&e.instance.group.length>1&&(i=e.instance.next(e.speedX)),!1!==i||"x"!=t&&"y"!=t||e.instance.jumpTo(e.instance.current.index,150),e.$container.removeClass("fancybox-is-sliding")},u.prototype.endPanning=function(){var t,e,i,o=this;o.contentLastPos&&(!1===o.opts.momentum?(t=o.contentLastPos.left,e=o.contentLastPos.top):(t=o.contentLastPos.left+o.velocityX*o.speed,e=o.contentLastPos.top+o.velocityY*o.speed),i=o.limitPosition(t,e,o.contentStartPos.width,o.contentStartPos.height),i.width=o.contentStartPos.width,i.height=o.contentStartPos.height,n.fancybox.animate(o.$content,i,330))},u.prototype.endZooming=function(){var t,e,i,o,r=this,s=r.instance.current,a=r.newWidth,l=r.newHeight;r.contentLastPos&&(t=r.contentLastPos.left,e=r.contentLastPos.top,o={top:e,left:t,width:a,height:l,scaleX:1,scaleY:1},n.fancybox.setTranslate(r.$content,o),a<r.canvasWidth&&l<r.canvasHeight?r.instance.scaleToFit(150):a>s.width||l>s.height?r.instance.scaleToActual(r.centerPointStartX,r.centerPointStartY,150):(i=r.limitPosition(t,e,a,l),n.fancybox.setTranslate(r.content,n.fancybox.getTranslate(r.$content)),n.fancybox.animate(r.$content,i,150)))},u.prototype.onTap=function(t){var e,i=this,o=n(t.target),s=i.instance,a=s.current,l=t&&r(t)||i.startPoints,c=l[0]?l[0].x-i.$stage.offset().left:0,u=l[0]?l[0].y-i.$stage.offset().top:0,h=function(e){var o=a.opts[e];if(n.isFunction(o)&&(o=o.apply(s,[a,t])),o)switch(o){case"close":s.close(i.startEvent);break;case"toggleControls":s.toggleControls(!0);break;case"next":s.next();break;case"nextOrClose":s.group.length>1?s.next():s.close(i.startEvent);break;case"zoom":"image"==a.type&&(a.isLoaded||a.$ghost)&&(s.canPan()?s.scaleToFit():s.isScaledDown()?s.scaleToActual(c,u):s.group.length<2&&s.close(i.startEvent))}};if(!(t.originalEvent&&2==t.originalEvent.button||s.isSliding||c>o[0].clientWidth+o.offset().left)){if(o.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container"))e="Outside";else if(o.is(".fancybox-slide"))e="Slide";else{if(!s.current.$content||!s.current.$content.has(t.target).length)return;e="Content"}if(i.tapped){if(clearTimeout(i.tapped),i.tapped=null,Math.abs(c-i.tapX)>50||Math.abs(u-i.tapY)>50||s.isSliding)return this;h("dblclick"+e)}else i.tapX=c,i.tapY=u,a.opts["dblclick"+e]&&a.opts["dblclick"+e]!==a.opts["click"+e]?i.tapped=setTimeout(function(){i.tapped=null,h("click"+e)},300):h("click"+e);return this}},n(e).on("onActivate.fb",function(t,e){e&&!e.Guestures&&(e.Guestures=new u(e))}),n(e).on("beforeClose.fb",function(t,e){e&&e.Guestures&&e.Guestures.destroy()})}(window,document,window.jQuery||jQuery),function(t,e){"use strict";e.extend(!0,e.fancybox.defaults,{btnTpl:{slideShow:'<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"><svg viewBox="0 0 40 40"><path d="M13,12 L27,20 L13,27 Z" /><path d="M15,10 v19 M23,10 v19" /></svg></button>'},slideShow:{autoStart:!1,speed:3e3}});var n=function(t){this.instance=t,this.init()};e.extend(n.prototype,{timer:null,isActive:!1,$button:null,init:function(){var t=this;t.$button=t.instance.$refs.toolbar.find("[data-fancybox-play]").on("click",function(){t.toggle()}),(t.instance.group.length<2||!t.instance.group[t.instance.currIndex].opts.slideShow)&&t.$button.hide()},set:function(t){var e=this;e.instance&&e.instance.current&&(!0===t||e.instance.current.opts.loop||e.instance.currIndex<e.instance.group.length-1)?e.timer=setTimeout(function(){e.isActive&&e.instance.jumpTo((e.instance.currIndex+1)%e.instance.group.length)},e.instance.current.opts.slideShow.speed):(e.stop(),e.instance.idleSecondsCounter=0,e.instance.showControls())},clear:function(){var t=this;clearTimeout(t.timer),t.timer=null},start:function(){var t=this,e=t.instance.current;e&&(t.isActive=!0,t.$button.attr("title",e.opts.i18n[e.opts.lang].PLAY_STOP).removeClass("fancybox-button--play").addClass("fancybox-button--pause"),t.set(!0))},stop:function(){var t=this,e=t.instance.current;t.clear(),t.$button.attr("title",e.opts.i18n[e.opts.lang].PLAY_START).removeClass("fancybox-button--pause").addClass("fancybox-button--play"),t.isActive=!1},toggle:function(){var t=this;t.isActive?t.stop():t.start()}}),e(t).on({"onInit.fb":function(t,e){e&&!e.SlideShow&&(e.SlideShow=new n(e))},"beforeShow.fb":function(t,e,n,i){var o=e&&e.SlideShow;i?o&&n.opts.slideShow.autoStart&&o.start():o&&o.isActive&&o.clear()},"afterShow.fb":function(t,e,n){var i=e&&e.SlideShow;i&&i.isActive&&i.set()},"afterKeydown.fb":function(n,i,o,r,s){var a=i&&i.SlideShow;!a||!o.opts.slideShow||80!==s&&32!==s||e(t.activeElement).is("button,a,input")||(r.preventDefault(),a.toggle())},"beforeClose.fb onDeactivate.fb":function(t,e){var n=e&&e.SlideShow;n&&n.stop()}}),e(t).on("visibilitychange",function(){var n=e.fancybox.getInstance(),i=n&&n.SlideShow;i&&i.isActive&&(t.hidden?i.clear():i.set())})}(document,window.jQuery||jQuery),function(t,e){"use strict";var n=function(){var e,n,i,o=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r={};for(n=0;n<o.length;n++)if((e=o[n])&&e[1]in t){for(i=0;i<e.length;i++)r[o[0][i]]=e[i];return r}return!1}();if(!n)return void(e&&e.fancybox&&(e.fancybox.defaults.btnTpl.fullScreen=!1));var i={request:function(e){e=e||t.documentElement,e[n.requestFullscreen](e.ALLOW_KEYBOARD_INPUT)},exit:function(){t[n.exitFullscreen]()},toggle:function(e){e=e||t.documentElement,this.isFullscreen()?this.exit():this.request(e)},isFullscreen:function(){return Boolean(t[n.fullscreenElement])},enabled:function(){return Boolean(t[n.fullscreenEnabled])}};e.extend(!0,e.fancybox.defaults,{btnTpl:{fullScreen:'<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fullscreen" title="{{FULL_SCREEN}}"><svg viewBox="0 0 40 40"><path d="M9,12 h22 v16 h-22 v-16 v16 h22 v-16 Z" /></svg></button>'},fullScreen:{autoStart:!1}}),e(t).on({"onInit.fb":function(t,e){var n;e&&e.group[e.currIndex].opts.fullScreen?(n=e.$refs.container,n.on("click.fb-fullscreen","[data-fancybox-fullscreen]",function(t){t.stopPropagation(),t.preventDefault(),i.toggle(n[0])}),e.opts.fullScreen&&!0===e.opts.fullScreen.autoStart&&i.request(n[0]),e.FullScreen=i):e&&e.$refs.toolbar.find("[data-fancybox-fullscreen]").hide()},"afterKeydown.fb":function(t,e,n,i,o){e&&e.FullScreen&&70===o&&(i.preventDefault(),e.FullScreen.toggle(e.$refs.container[0]))},"beforeClose.fb":function(t){t&&t.FullScreen&&i.exit()}}),e(t).on(n.fullscreenchange,function(){var t=i.isFullscreen(),n=e.fancybox.getInstance();n&&(n.current&&"image"===n.current.type&&n.isAnimating&&(n.current.$content.css("transition","none"),n.isAnimating=!1,n.update(!0,!0,0)),n.trigger("onFullscreenChange",t),n.$refs.container.toggleClass("fancybox-is-fullscreen",t))})}(document,window.jQuery||jQuery),function(t,e){"use strict";e.fancybox.defaults=e.extend(!0,{btnTpl:{thumbs:'<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"><svg viewBox="0 0 120 120"><path d="M30,30 h14 v14 h-14 Z M50,30 h14 v14 h-14 Z M70,30 h14 v14 h-14 Z M30,50 h14 v14 h-14 Z M50,50 h14 v14 h-14 Z M70,50 h14 v14 h-14 Z M30,70 h14 v14 h-14 Z M50,70 h14 v14 h-14 Z M70,70 h14 v14 h-14 Z" /></svg></button>'},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"}},e.fancybox.defaults);var n=function(t){this.init(t)};e.extend(n.prototype,{$button:null,$grid:null,$list:null,isVisible:!1,isActive:!1,init:function(t){var e=this;e.instance=t,t.Thumbs=e;var n=t.group[0],i=t.group[1];e.opts=t.group[t.currIndex].opts.thumbs,e.$button=t.$refs.toolbar.find("[data-fancybox-thumbs]"),e.opts&&n&&i&&("image"==n.type||n.opts.thumb||n.opts.$thumb)&&("image"==i.type||i.opts.thumb||i.opts.$thumb)?(e.$button.show().on("click",function(){e.toggle()}),e.isActive=!0):e.$button.hide()},create:function(){var t,n,i=this,o=i.instance,r=i.opts.parentEl;i.$grid=e('<div class="fancybox-thumbs fancybox-thumbs-'+i.opts.axis+'"></div>').appendTo(o.$refs.container.find(r).addBack().filter(r)),t="<ul>",e.each(o.group,function(e,i){n=i.opts.thumb||(i.opts.$thumb?i.opts.$thumb.attr("src"):null),n||"image"!==i.type||(n=i.src),n&&n.length&&(t+='<li data-index="'+e+'"  tabindex="0" class="fancybox-thumbs-loading"><img data-src="'+n+'" /></li>')}),t+="</ul>",i.$list=e(t).appendTo(i.$grid).on("click","li",function(){o.jumpTo(e(this).data("index"))}),i.$list.find("img").hide().one("load",function(){var t,n,i,o,r=e(this).parent().removeClass("fancybox-thumbs-loading"),s=r.outerWidth(),a=r.outerHeight();t=this.naturalWidth||this.width,n=this.naturalHeight||this.height,i=t/s,o=n/a,i>=1&&o>=1&&(i>o?(t/=o,n=a):(t=s,n/=i)),e(this).css({width:Math.floor(t),height:Math.floor(n),"margin-top":n>a?Math.floor(.3*a-.3*n):Math.floor(.5*a-.5*n),"margin-left":Math.floor(.5*s-.5*t)}).show()}).each(function(){this.src=e(this).data("src")}),"x"===i.opts.axis&&i.$list.width(parseInt(i.$grid.css("padding-right"))+o.group.length*i.$list.children().eq(0).outerWidth(!0)+"px")},focus:function(t){var e,n,i=this,o=i.$list;i.instance.current&&(e=o.children().removeClass("fancybox-thumbs-active").filter('[data-index="'+i.instance.current.index+'"]').addClass("fancybox-thumbs-active"),n=e.position(),"y"===i.opts.axis&&(n.top<0||n.top>o.height()-e.outerHeight())?o.stop().animate({scrollTop:o.scrollTop()+n.top},t):"x"===i.opts.axis&&(n.left<o.parent().scrollLeft()||n.left>o.parent().scrollLeft()+(o.parent().width()-e.outerWidth()))&&o.parent().stop().animate({scrollLeft:n.left},t))},update:function(){this.instance.$refs.container.toggleClass("fancybox-show-thumbs",this.isVisible),this.isVisible?(this.$grid||this.create(),this.instance.trigger("onThumbsShow"),this.focus(0)):this.$grid&&this.instance.trigger("onThumbsHide"),this.instance.update()},hide:function(){this.isVisible=!1,this.update()},show:function(){this.isVisible=!0,this.update()},toggle:function(){this.isVisible=!this.isVisible,this.update()}}),e(t).on({"onInit.fb":function(t,e){var i;e&&!e.Thumbs&&(i=new n(e),i.isActive&&!0===i.opts.autoStart&&i.show())},"beforeShow.fb":function(t,e,n,i){var o=e&&e.Thumbs;o&&o.isVisible&&o.focus(i?0:250)},"afterKeydown.fb":function(t,e,n,i,o){var r=e&&e.Thumbs;r&&r.isActive&&71===o&&(i.preventDefault(),r.toggle())},"beforeClose.fb":function(t,e){var n=e&&e.Thumbs;n&&n.isVisible&&!1!==n.opts.hideOnClose&&n.$grid.hide()}})}(document,window.jQuery),function(t,e){"use strict";function n(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(t).replace(/[&<>"'`=\/]/g,function(t){return e[t]})}e.extend(!0,e.fancybox.defaults,{btnTpl:{share:'<button data-fancybox-share class="fancybox-button fancybox-button--share" title="{{SHARE}}"><svg viewBox="0 0 40 40"><path d="M6,30 C8,18 19,16 23,16 L23,16 L23,10 L33,20 L23,29 L23,24 C19,24 8,27 6,30 Z"></svg></button>'},share:{tpl:'<div class="fancybox-share"><h1>{{SHARE}}</h1><p><a href="https://www.facebook.com/sharer/sharer.php?u={{src}}" target="_blank" class="fancybox-share_button"><svg version="1.1" viewBox="0 0 32 32" fill="#3b5998"><path d="M27.6 3h-23.2c-.8 0-1.4.6-1.4 1.4v23.1c0 .9.6 1.5 1.4 1.5h12.5v-10.1h-3.4v-3.9h3.4v-2.9c0-3.4 2.1-5.2 5-5.2 1.4 0 2.7.1 3 .2v3.5h-2.1c-1.6 0-1.9.8-1.9 1.9v2.5h3.9l-.5 3.9h-3.4v10.1h6.6c.8 0 1.4-.6 1.4-1.4v-23.2c.1-.8-.5-1.4-1.3-1.4z"></path></svg><span>Facebook</span></a><a href="https://www.pinterest.com/pin/create/button/?url={{src}}&amp;description={{descr}}" target="_blank" class="fancybox-share_button"><svg version="1.1" viewBox="0 0 32 32" fill="#c92228"><path d="M16 3c-7.2 0-13 5.8-13 13 0 5.5 3.4 10.2 8.3 12.1-.1-1-.2-2.6 0-3.7.2-1 1.5-6.5 1.5-6.5s-.4-.8-.4-1.9c0-1.8 1-3.2 2.4-3.2 1.1 0 1.6.8 1.6 1.8 0 1.1-.7 2.8-1.1 4.3-.3 1.3.6 2.3 1.9 2.3 2.3 0 4.1-2.4 4.1-6 0-3.1-2.2-5.3-5.4-5.3-3.7 0-5.9 2.8-5.9 5.6 0 1.1.4 2.3 1 3 .1.1.1.2.1.4-.1.4-.3 1.3-.4 1.5-.1.2-.2.3-.4.2-1.6-.8-2.6-3.1-2.6-5 0-4.1 3-7.9 8.6-7.9 4.5 0 8 3.2 8 7.5 0 4.5-2.8 8.1-6.7 8.1-1.3 0-2.6-.7-3-1.5 0 0-.7 2.5-.8 3.1-.3 1.1-1.1 2.5-1.6 3.4 1.2.4 2.5.6 3.8.6 7.2 0 13-5.8 13-13 0-7.1-5.8-12.9-13-12.9z"></path></svg><span>Pinterest</span></a><a href="https://twitter.com/intent/tweet?url={{src}}&amp;text={{descr}}" target="_blank" class="fancybox-share_button"><svg version="1.1" viewBox="0 0 32 32" fill="#1da1f2"><path d="M30 7.3c-1 .5-2.1.8-3.3.9 1.2-.7 2.1-1.8 2.5-3.2-1.1.7-2.3 1.1-3.6 1.4-1-1.1-2.5-1.8-4.2-1.8-3.2 0-5.7 2.6-5.7 5.7 0 .5.1.9.1 1.3-4.8-.2-9-2.5-11.8-6-.5.9-.8 1.9-.8 3 0 2 1 3.8 2.6 4.8-.9 0-1.8-.3-2.6-.7v.1c0 2.8 2 5.1 4.6 5.6-.5.1-1 .2-1.5.2-.4 0-.7 0-1.1-.1.7 2.3 2.9 3.9 5.4 4-2 1.5-4.4 2.5-7.1 2.5-.5 0-.9 0-1.4-.1 2.5 1.6 5.6 2.6 8.8 2.6 10.6 0 16.3-8.8 16.3-16.3v-.7c1.1-1 2-2 2.8-3.2z"></path></svg><span>Twitter</span></a></p><p><input type="text" value="{{src_raw}}" onfocus="this.select()" /></p></div>'}}),e(t).on("click","[data-fancybox-share]",function(){var t,i,o=e.fancybox.getInstance();o&&(t=!1===o.current.opts.hash?o.current.src:window.location,i=o.current.opts.share.tpl.replace(/\{\{src\}\}/g,encodeURIComponent(t)).replace(/\{\{src_raw\}\}/g,n(t)).replace(/\{\{descr\}\}/g,o.$caption?encodeURIComponent(o.$caption.text()):""),e.fancybox.open({src:o.translate(o,i),type:"html",opts:{animationEffect:"fade",animationDuration:250}}))})}(document,window.jQuery||jQuery),function(t,e,n){"use strict";function i(){var t=e.location.hash.substr(1),n=t.split("-"),i=n.length>1&&/^\+?\d+$/.test(n[n.length-1])?parseInt(n.pop(-1),10)||1:1,o=n.join("-");return i<1&&(i=1),{hash:t,index:i,gallery:o}}function o(t){var e;""!==t.gallery&&(e=n("[data-fancybox='"+n.escapeSelector(t.gallery)+"']").eq(t.index-1),e.length||(e=n("#"+n.escapeSelector(t.gallery))),e.length&&(s=!1,e.trigger("click")))}function r(t){var e;return!!t&&(e=t.current?t.current.opts:t.opts,e.hash||(e.$orig?e.$orig.data("fancybox"):""))}n.escapeSelector||(n.escapeSelector=function(t){return(t+"").replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t})});var s=!0,a=null,l=null;n(function(){!1!==n.fancybox.defaults.hash&&(n(t).on({"onInit.fb":function(t,e){var n,o;!1!==e.group[e.currIndex].opts.hash&&(n=i(),(o=r(e))&&n.gallery&&o==n.gallery&&(e.currIndex=n.index-1))},"beforeShow.fb":function(n,i,o){var c;o&&!1!==o.opts.hash&&(c=r(i))&&""!==c&&(e.location.hash.indexOf(c)<0&&(i.opts.origHash=e.location.hash),a=c+(i.group.length>1?"-"+(o.index+1):""),"replaceState"in e.history?(l&&clearTimeout(l),l=setTimeout(function(){e.history[s?"pushState":"replaceState"]({},t.title,e.location.pathname+e.location.search+"#"+a),l=null,s=!1},300)):e.location.hash=a)},"beforeClose.fb":function(i,o,s){var c,u;l&&clearTimeout(l),!1!==s.opts.hash&&(c=r(o),u=o&&o.opts.origHash?o.opts.origHash:"",c&&""!==c&&("replaceState"in history?e.history.replaceState({},t.title,e.location.pathname+e.location.search+u):(e.location.hash=u,n(e).scrollTop(o.scrollTop).scrollLeft(o.scrollLeft))),a=null)}}),n(e).on("hashchange.fb",function(){var t=i();n.fancybox.getInstance()?!a||a===t.gallery+"-"+t.index||1===t.index&&a==t.gallery||(a=null,n.fancybox.close()):""!==t.gallery&&o(t)}),setTimeout(function(){o(i())},50))})}(document,window,window.jQuery||jQuery)},function(t,e,n){"use strict";var i=window.top.jsEmailBuilderEmitter,o={editorText:null,editorLink:null,editorImage:null,imageUploader:null,init:function(){$('[data-editable="link"]').off("click",this.linkEditor),$('[data-editable="image"]').off("click",this.imageEditor),this.textEditor(),$('[data-editable="link"]').on("click",this.linkEditor),$('[data-editable="image"]').on("click",this.imageEditor)},textEditor:function(){this.editorText=new MediumEditor('[data-editable="text"]',{toolbar:{buttons:["bold","italic","underline","anchor"]}})},linkEditor:function(t){var e=$(t.target),n=$("#linkeditor"),i=$.trim(e.html()),o=e.attr("href");return $('[data-link="text"]',n).val(i),$('[data-link="url"]',n).val(o),$.fancybox.open({src:"#linkeditor",type:"inline",opts:{afterClose:function(){$('[data-link="text"]',n).val(""),$('[data-link="url"]',n).val("")},onComplete:function(){$(".modal-btn-cancel",n).off("click"),$(".modal-btn-ok",n).off("click"),$(".modal-btn-cancel",n).on("click",function(t){$.fancybox.close()}),$(".modal-btn-ok",n).on("click",function(t){var i=$('[data-link="text"]',n).val(),o=$('[data-link="url"]',n).val();e.html(i),e.attr("href",o),$.fancybox.close()})}}}),!1},imageEditor:function(t){o.imageUploader&&(o.imageUploader.slim("destroy"),o.imageUploader=null);var e=$(t.target),n=$("#imageeditor"),i=e.attr("src"),r=e.attr("alt"),s=e.width(),a=e.height(),l="";return e.parent().is("a")&&(l=e.parent("a").attr("href")),$('[data-image="url"]',n).val(l),$('[data-image="alt"]',n).val(r),$('[data-image="width"]',n).val(s),$('[data-image="height"]',n).val(a),$('[data-image="src"]',n).attr("src",i),$.fancybox.open({src:"#imageeditor",type:"inline",opts:{afterClose:function(){$('[data-image="url"]',n).val(""),$('[data-image="alt"]',n).val(""),$('[data-image="width"]',n).val(""),$('[data-image="height"]',n).val(""),$('[data-image="src"]',n).attr("src","")},onComplete:function(){$(".modal-btn-cancel",n).off("click"),$(".modal-btn-ok",n).off("click"),o.imageUploader=$("#modal-image-uploader").slim({fetcher:"server/fetch.php",service:"server/async.php",push:!0,instantEdit:!0,didUpload:function(){var t=o.imageUploader.slim("data")[0],e=config.uploads+"/"+t.server.file,i=t.output.width,r=t.output.height;$('[data-image="width"]',n).val(i),$('[data-image="height"]',n).val(r),$('[data-image="src"]',n).attr("src",e)}}),$(".modal-btn-cancel",n).on("click",function(t){$.fancybox.close()}),$(".modal-btn-ok",n).on("click",function(t){var i=$('[data-image="url"]',n).val(),o=$('[data-image="alt"]',n).val(),r=$('[data-image="width"]',n).val(),s=$('[data-image="height"]',n).val(),a=$('[data-image="src"]',n).attr("src");e.attr("src",a),e.attr("alt",o),e.attr("width",r),e.attr("height",s),e.unwrap("a"),i&&e.wrap('<a href="'+i+'"></a>'),$.fancybox.close()})}}}),!1}};i.on("update_template",function(){o.init()}),t.exports=o},function(t,e,n){"use strict";function i(){this.events={}}i.prototype.on=function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)},i.prototype.emit=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.events[t]&&this.events[t].forEach(function(t){t(e)})},t.exports=new i},function(t,e,n){"use strict";var i=window.top.jsEmailBuilderEmitter,o={confirm:function(t,e){swal({title:t,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",closeOnConfirm:!1},function(t){t&&(swal("Deleted!","The module has been deleted","success"),e())})},current:null,imageUploader:null,controls:'<div class="module-controls-container" style="top: 10px">\x3c!-- Controls --\x3e<div class="btn-module btn-module-sort"><i class="icon-arrows"></i></div><div class="btn-module btn-module-duplicate"><i class="icon-files-o"></i></div><div class="btn-module btn-module-code" data-action="codeEditor"><i class="icon-code"></i></div><div class="btn-module btn-module-delete"><i class="icon-close"></i></div>\x3c!-- /Controls --\x3e</div>',codeControls:'<div class="module-code-controls"><div class="btn-code-control btn-code-update"><i class="icon-check"></i></div><div class="btn-code-control btn-code-cancel"><i class="icon-close"></i></div></div>',options:{color:[],bgcolor:[],bg:[]},init:function(){var t=this;$(".module-container",'[data-type="editor"]').off("mouseenter mouseleave"),$(".module-container",'[data-type="editor"]').on("mouseenter",function(e){$(this).children("table").append(t.controls),t.eventsInit(),$('[data-type="editor"]').sortable("refresh")}),$(".module-container",'[data-type="editor"]').on("mouseleave",function(t){$(".module-controls-container",this).remove()}),$(".module-container").on("click",function(e){var n=this;t.current!==n&&(t.current=n,i.emit("module_change"))})},rgb2hex:function(t){function e(t){return("0"+parseInt(t).toString(16)).slice(-2)}return/^#[0-9A-F]{6}$/i.test(t)?t:(t=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+e(t[1])+e(t[2])+e(t[3]))},eventsInit:function(){this.controlsDuplicate(),this.controlsCode(),this.controlsDelete()},controlsDuplicate:function(){$(".btn-module-duplicate",".module-controls-container").off("click"),$(".btn-module-duplicate",".module-controls-container").on("click",function(t){var e=$(this).closest(".module-container");e.clone().insertAfter(e).find(".module-controls-container").remove(),i.emit("update_template")})},controlsCode:function(){var t=this;$(".btn-module-code",".module-controls-container").on("click",function(e){var n=$(this).closest(".module-container"),o=$(n).clone();$(".mce-content-body",o).each(function(){var t=$(this).attr("style").replace(/"/g,"'");$(this).attr("style",t)}),o.find(".module-controls-container").remove(),o.find(".mce-content-body").removeClass("mce-content-body");var r=$(o).html();r=r.replace(/<tbody>/g,"").replace(/<\/tbody>/g,""),r=r.replace(/(v:)+([\w])|(xmlns)+(:v)/gi,function(t){return t.replace(/:/g,"_")}),r=$.htmlClean(r,{format:!0,allowEmpty:[["td"],["link"],["meta"],["table"],["tr"],["p"],["b"],["i"],["font"],["div"],["a"],["li"],["ul"]],formatIndent:1,allowComments:!0,allowedAttributes:[["id"],["map"],["area"],["class"],["border"],["style"],["width"],["height"],["bgcolor"],["shape"],["coords"],["cellspacing"],["cellpadding"],["mso-table-lspace"],["mso-table-rspace"],["align"],["bgcolor"],["valign"],["name"],["data-module"],["data-color"],["data-size"],["data-editable"],["contenteditable"],["href"],["data-min"],["data-max"],["data-crop"],["data-link-style"],["data-link-size"],["data-link-color"],["data-bg"],["data-bgcolor"],["data-border-top-color"],["data-border-bottom-color"],["data-border-left-color"],["data-border-right-color"],["background"],["itemscope"],["itemtype"],["itemprop"],["datetime"],["fill",["v_rect"]],["stroke",["v_rect"]],["type",["v_fill"]],["src",["v_fill"]],["color",["v_fill"]],["inset",["v_textbox"]],["xmlns_v",["v_rect"]]]}),r=r.replace(/(v_)+([\w])|(xmlns)+(_v)/gi,function(t){return t.replace(/_/g,":")}),$("#code").remove(),$(n).after(t.getCodeEditorHTML(r));var s=CodeMirror.fromTextArea(document.getElementById("code"),{mode:"xml",htmlMode:!0,lineNumbers:!0,lineWrapping:!0,styleActiveLine:!0});s.setSize("100%","100%"),s.setOption("theme","tomorrow-night-bright"),$(".btn-code-update").on("click",function(t){var e=s.getValue();n.html(e),$(".module-code-container",n.parent()).remove(),i.emit("update_template")}),$(".btn-code-cancel").on("click",function(t){$(".module-code-container",n.parent()).remove()})})},controlsDelete:function(){var t=this;$(".btn-module-delete",".module-controls-container").off("click"),$(".btn-module-delete",".module-controls-container").on("click",function(e){var n=$(this).closest(".module-container");t.confirm("Remove this module?",function(){n.remove(),i.emit("update_template")})})},optionActions:function(){var t=this;$('[data-control="colorpicker"]').minicolors({position:"bottom right"}),$('[data-control="colorpicker"]').on("change",function(e){var n=$(this).data("target-option"),o=$(this).data("target-attr"),r=$(this).val();$("[data-"+o+'="'+n+'"]',t.current).css(o,r),$("[data-"+o+'="'+n+'"]',t.current).attr(o,r),i.emit("update_template")}),$('[data-control="background-image"]').on("click",function(t){o.imageUploader&&(o.imageUploader.slim("destroy"),o.imageUploader=null);var e=$(t.target),n=$("#bgeditor"),r=$(this).data("bg-image"),s=$(this).data("target-option");$('[data-image="src"]',n).attr("src",r),$.fancybox.open({src:"#bgeditor",type:"inline",opts:{afterClose:function(){$('[data-image="src"]',n).attr("src","")},onComplete:function(){$(".modal-btn-cancel",n).off("click"),$(".modal-btn-ok",n).off("click"),o.imageUploader=$("#modal-bg-uploader").slim({fetcher:"server/fetch.php",service:"server/async.php",push:!0,instantEdit:!0,didUpload:function(){var t=o.imageUploader.slim("data")[0],e=config.uploads+"/"+t.server.file;$('[data-image="src"]',n).attr("src",e)}}),$(".modal-btn-cancel",n).on("click",function(t){$.fancybox.close()}),$(".modal-btn-ok",n).on("click",function(t){var i=$('[data-image="src"]',n).attr("src");$('[data-bg-option-label="'+s+'"]',e.parent()).html(i),$('[data-bg="'+s+'"]',o.current).css("background-image","url('"+i+"')"),$.fancybox.close()})}}}),i.emit("update_template")}),$('[data-control="background-appearance"]').on("change",function(e){var n=$(this).data("target-option"),i=$(this).val();switch($('[data-bg="'+n+'"]',t.current).css("background-position",""),$('[data-bg="'+n+'"]',t.current).css("background-size",""),$('[data-bg="'+n+'"]',t.current).css("background-attachment",""),i){case"original":$('[data-bg="'+n+'"]',t.current).css("background-position","center center");break;case"100%":$('[data-bg="'+n+'"]',t.current).css("background-size","100%");break;case"fluid":$('[data-bg="'+n+'"]',t.current).css("background-position","center center"),$('[data-bg="'+n+'"]',t.current).css("background-size","cover");break;case"fixed":$('[data-bg="'+n+'"]',t.current).css("background-position","center center"),$('[data-bg="'+n+'"]',t.current).css("background-size","cover"),$('[data-bg="'+n+'"]',t.current).css("background-attachment","fixed")}})},getCodeEditorHTML:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return'<div class="module-code-container">'+this.codeControls+'<textarea id="code" name="code">'+t+"</textarea></div>"},getOptions:function(){var t=this;t.options={color:[],bgcolor:[],bg:[]};var e=[],n=[],i=[];$("[data-color]",t.current).each(function(){var t=$(this).data("color");e.push(t)}),$("[data-bgcolor]",t.current).each(function(){var t=$(this).data("bgcolor");n.push(t)}),$("[data-bg]",t.current).each(function(){var t=$(this).data("bg");i.push(t)}),t.options.color=e.filter(function(t,e,n){return n.indexOf(t)===e}),t.options.bgcolor=n.filter(function(t,e,n){return n.indexOf(t)===e}),t.options.bg=i.filter(function(t,e,n){return n.indexOf(t)===e})},getOptionsHTML:function(){var t=this,e="";return t.options.color.length>0&&(e+='<div class="styles-group">',e+='    <div class="group-header">Font colors</div>',e+='    <div class="group-styles-inner">',t.options.color.forEach(function(n){var i=$('[data-color="'+n+'"]',t.current).css("color"),o=t.rgb2hex(i);e+='        <div class="style-item">',e+='            <div class="style-label">'+n+"</div>",e+='            <div class="style-control"><input type="text" value="'+o+'" data-control="colorpicker" data-target-option="'+n+'" data-target-attr="color"></div>',e+="        </div>"}),e+="    </div>",e+="</div>"),t.options.bgcolor.length>0&&(e+='<div class="styles-group">',e+='    <div class="group-header">Background colors</div>',e+='    <div class="group-styles-inner">',t.options.bgcolor.forEach(function(n){var i=$('[data-bgcolor="'+n+'"]',t.current).css("background-color"),o=t.rgb2hex(i);e+='        <div class="style-item">',e+='            <div class="style-label">'+n+"</div>",e+='            <div class="style-control"><input type="text" value="'+o+'" data-control="colorpicker" data-target-option="'+n+'" data-target-attr="bgcolor"></div>',e+="        </div>"}),e+="    </div>",e+="</div>"),t.options.bg.length>0&&(e+='<div class="styles-group">',e+='    <div class="group-header">Background images</div>',e+='    <div class="group-styles-inner">',t.options.bg.forEach(function(n){var i=$('[data-bg="'+n+'"]',t.current).css("background-image").replace(/^url\(["']?/,"").replace(/["']?\)$/,"");e+='        <div class="style-item">',e+='            <div class="style-label">'+n+"</div>",e+='            <div class="style-control"><span data-bg-option-label="'+n+'">'+i+'</span><button data-control="background-image" data-bg-image="'+i+'" data-target-option="'+n+'">Change</button></div>',e+="        </div>",e+='        <div class="style-item">',e+='            <div class="style-label">Position</div>',e+='            <div class="style-control">',e+='                <select data-control="background-appearance" data-target-option="'+n+'">',e+='                    <option value="original">Original</option>',e+='                    <option value="100%">100%</option>',e+='                    <option value="fluid">Fluid</option>',e+='                    <option value="fixed">Fixed</option>',e+="                </select>",e+="            </div>",e+="        </div>"}),e+="    </div>",e+="</div>"),e}};i.on("module_added",function(){i.emit("update_template")}),i.on("module_change",function(){$('[data-type="sidebar-second"]').find("[data-sidebar]").hide(),o.getOptions();var t=o.getOptionsHTML();$('[data-type="module-options"]').html(t),o.optionActions()}),i.on("update_template",function(){o.init()}),t.exports=o},function(t,e,n){"use strict";var i=window.top.jsEmailBuilderEmitter,o={init:function(){i.emit("show_nav"),this.bindAccordion(),this.bindSidebar()},showModulesSidebar:function(){var t=$('[data-type="nav"] [data-target="modules"]').get(0);this.toggleSidebar(t);var e=$('[data-type="nav"] [data-nav="has-child"]').find('[data-target="modules"]');e.closest('[data-type="subnav"]').slideDown(200,function(){e.addClass("active")})},bindAccordion:function(){$('[data-nav="has-child"]').on("click",function(t){var e=t.currentTarget;return"has-child"!=!$(e).data("nav")&&(!$(e).hasClass("active")&&($('[data-type="nav"]').find('[data-type="subnav"]').slideUp(200,function(){$('[data-nav="has-child"]').removeClass("active")}),void $(e).find('[data-type="subnav"]').slideDown(200,function(){$(e).addClass("active")})))})},bindSidebar:function(){var t=this;$('[data-type="nav"] [data-target]').on("click",function(e){var n=e.currentTarget;t.toggleSidebar(n)})},toggleSidebar:function(t){var e=$(t).data("target");$('[data-type="sidebar-second"]').effect("slide",{direction:"left",mode:"hide"},500,function(){$('[data-type="nav"] [data-target]').removeClass("active"),$(t).addClass("active"),$('[data-type="sidebar-second"]').find("[data-sidebar]").hide()}).promise().done(function(){$('[data-type="sidebar-second"]').find('[data-sidebar="'+e+'"]').show(),$('[data-type="sidebar-second"]').effect("slide",{direction:"left",mode:"show"},500)})}};i.on("init",function(){o.init(),o.showModulesSidebar()}),i.on("module_change",function(){var t=$('[data-type="nav"] [data-target="styles"]').get(0);o.toggleSidebar(t)}),t.exports=o},function(t,e,n){"use strict";var i=window.top.jsEmailBuilderEmitter,o={name:"",path:"",template:{},modulesHTML:{},renderModulePreview:function(t,e,n){return'<div class="module-item" data-module="'+t+'"><div class="module-thumb"><img src="'+n+'"></div><div class="module-title">'+e+"</div></div>"},load:function(t){var e=this;return e.name=t,e.path="templates/"+e.name,$.getJSON(e.getPath()+"/template.json",function(t){e.template=t;var n=e.getFonts();$("head").append(n),$.each(e.template.modules,function(t,n){e.modulesHTML[n.uid]=n.html})})},getPath:function(){return this.path},getName:function(){return this.name},getTitle:function(){return this.template.template},getTemplate:function(){return this.template},getModules:function(){return this.template.modules},getModuleHTML:function(t){return this.modulesHTML[t]},getModulesPreview:function(){var t=this,e=t.getPath(),n=t.getModules(),o="";return $.each(n,function(n,i){var r=e+"/"+i.thumb;o+=t.renderModulePreview(i.uid,i.title,r)}),i.emit("modules_preview"),o},getHeader:function(){return this.template.header},getFooter:function(){return this.template.footer},getFonts:function(){var t="";if("fonts"in this.template){var e=this.template.fonts;$.each(e,function(e,n){t+="<link href='"+n+"' rel='stylesheet' type='text/css'>"})}return t},actionModuleDrag:function(){$('[data-type="modules-container"] .module-item').draggable({appendTo:"body",helper:"clone",connectToSortable:'[data-type="editor"]',scroll:!1,zIndex:1e3,delay:100,revert:"invalid"})},actionModuleAdd:function(){var t=this;$('[data-type="editor"]').sortable({handle:".btn-module-sort",items:".module-container",placeholder:"module-placeholder",axis:"y",opacity:.9,scroll:!1,zIndex:1e3,refreshPositions:!0,beforeStop:function(e,n){var i=n.item.data("module"),o=$("<div/>").html(t.getModuleHTML(i));$("img",o).each(function(){var e=config.host,n=t.name,i=$(this).attr("src"),o=e+"/templates/"+n+"/"+i;$(this).attr("src",o)}),$(n.item).replaceWith('<div class="module-container" data-module="'+i+'">'+o.html()+"</div>")},receive:function(t,e){},activate:function(t,e){$(e.helper).html($(".module-thumb",e.item).html())},start:function(t,e){},update:function(t,e){i.emit("module_added")}})}};i.on("theme_load",function(t){$.when(o.load(t)).done(function(t){i.emit("theme_loaded")})}),i.on("theme_loaded",function(){var t=o.getModulesPreview();$('[data-type="modules-container"]').html(t),o.actionModuleDrag(),o.actionModuleAdd()}),i.on("update_template",function(){var t=o.getHeader(),e=o.getFooter(),n=$('[data-type="editor"]').html(),i=t+n+e;$("#templateHTML").val(btoa(i))}),t.exports=o},function(t,e,n){"use strict";var i=window.top.jsEmailBuilderEmitter,o={showPreview:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:375,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:559,n=window.open(null,"Preview HTML","width="+t+",height="+e+",resizeable,scrollbars"),i=$("#templateHTML").val();n.document.write(atob(i)),n.document.close()},templatePreviewMobile:function(){this.showPreview(375,559)},templatePreviewTablet:function(){this.showPreview(768,600)},templateClear:function(){swal({title:"Clear the template?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",closeOnConfirm:!1},function(t){t&&(swal("All done!","The template has been cleared","success"),$('[data-type="editor"]').html(""))})}};i.on("init",function(){$(".template-preview-mobile").on("click",function(t){o.templatePreviewMobile()}),$(".template-preview-tablet").on("click",function(t){o.templatePreviewTablet()}),$(".template-clear").on("click",function(t){o.templateClear()})}),t.exports=o},function(t,e){!function(t){function e(t,e,n,i){if(t.tag.format&&n.length>0){n.push("\n");for(var o=0;o<i;o++)n.push("\t")}}function n(i,o){var r=[],s=0===i.attributes.length,a=0;if(i.tag.isComment)o.allowComments&&(r.push("\x3c!--"),r.push(i.tag.rawAttributes),r.push(">"),o.format&&e(i,o,r,a-1));else{var l=0===o.removeTagsAndContent.length||-1==t.inArray(i.tag.name,o.removeTagsAndContent),f=l&&i.tag.render&&(0===o.allowedTags.length||t.inArray(i.tag.name,o.allowedTags)>-1)&&(0===o.removeTags.length||-1==t.inArray(i.tag.name,o.removeTags));if(!i.isRoot&&f&&(r.push("<"),r.push(i.tag.name),t.each(i.attributes,function(){if(-1==t.inArray(this.name,o.removeAttrs)){var e=RegExp(/^(['"]?)(.*?)['"]?$/).exec(this.value),n=e[2],s=e[1]||"'";"class"==this.name&&o.allowedClasses.length>0&&(n=t.grep(n.split(" "),function(e){return t.grep(o.allowedClasses,function(n){return n==e||n[0]==e&&(1==n.length||t.inArray(i.tag.name,n[1])>-1)}).length>0}).join(" ")),null!==n&&(n.length>0||t.inArray(this.name,i.tag.requiredAttributes)>-1)&&(r.push(" "),r.push(this.name),r.push("="),r.push(s),r.push(n),r.push(s))}})),i.tag.isSelfClosing)f&&r.push(" />"),s=!1;else if(i.tag.isNonClosing)s=!1;else if(l){!i.isRoot&&f&&r.push(">"),a=o.formatIndent++;var m=[];if(i.tag.toProtect)m=t.htmlClean.trim(i.children.join("")).replace(/<br>/gi,"\n"),r.push(m),s=0===m.length;else{m=[];for(var g=0;g<i.children.length;g++){var v=i.children[g],y=t.htmlClean.trim(p(h(v)?v:v.childrenToString()));d(v)&&g>0&&y.length>0&&(c(v)||u(i.children[g-1]))&&m.push(" "),h(v)?y.length>0&&m.push(y):(g!==i.children.length-1||"br"!==v.tag.name||o.allowBreakAsLastChild&&"br"===v.tag.name)&&(o.format&&e(v,o,m,a),m=m.concat(n(v,o)))}o.formatIndent--,m.length>0&&(o.format&&"\n"!=m[0]&&e(i,o,r,a),r=r.concat(m),s=!1)}!i.isRoot&&f&&(o.format&&e(i,o,r,a-1),r.push("</"),r.push(i.tag.name),r.push(">"))}if(!i.tag.allowEmpty&&s)return[]}return r}function i(e,n){return r(e,function(e){return t.inArray(e.tag.nameOriginal,n)>-1})}function o(t){return r(t,function(t){return t.isRoot||!t.tag.isInline})}function r(t,e,n){return n=n||1,!!e(t[t.length-n])||!!(t.length-n>0&&r(t,e,n+1))&&(t.pop(),!0)}function s(t){return t?(this.tag=t,this.isRoot=!1):(this.tag=new l("root"),this.isRoot=!0),this.attributes=[],this.children=[],this.hasAttribute=function(t){for(var e=0;e<this.attributes.length;e++)if(this.attributes[e].name==t)return!0;return!1},this.childrenToString=function(){return this.children.join("")},this}function a(t,e){return this.name=t,this.value=e,this}function l(e,n,i,o){return this.name=e.toLowerCase(),this.nameOriginal=this.name,this.render=!0,this.init=function(){if("--"==this.name?(this.isComment=!0,this.isSelfClosing=!0,this.format=!0):(this.isComment=!1,this.isSelfClosing=t.inArray(this.name,x)>-1,this.isNonClosing=t.inArray(this.name,C)>-1,this.isClosing=void 0!==n&&n.length>0,this.isInline=t.inArray(this.name,m)>-1,this.disallowNest=t.inArray(this.name,v)>-1,this.requiredParent=b[t.inArray(this.name,b)+1],this.allowEmpty=o&&t.inArray(this.name,o.allowEmpty)>-1,this.toProtect=t.inArray(this.name,w)>-1,this.format=t.inArray(this.name,g)>-1||!this.isInline),this.rawAttributes=i,this.requiredAttributes=S[t.inArray(this.name,S)+1],o){if(o.tagAttributesCache||(o.tagAttributesCache=[]),-1==t.inArray(this.name,o.tagAttributesCache)){for(var e=_[t.inArray(this.name,_)+1].slice(0),r=0;r<o.allowedAttributes.length;r++){var s=o.allowedAttributes[r][0];(1==o.allowedAttributes[r].length||t.inArray(this.name,o.allowedAttributes[r][1])>-1)&&-1==t.inArray(s,e)&&e.push(s)}o.tagAttributesCache.push(this.name),o.tagAttributesCache.push(e)}this.allowedAttributes=o.tagAttributesCache[t.inArray(this.name,o.tagAttributesCache)+1]}},this.init(),this.rename=function(t){this.name=t,this.init()},this}function c(e){for(;f(e)&&e.children.length>0;)e=e.children[0];if(!h(e))return!1;var n=p(e);return n.length>0&&t.htmlClean.isWhitespace(n.charAt(0))}function u(e){for(;f(e)&&e.children.length>0;)e=e.children[e.children.length-1];if(!h(e))return!1;var n=p(e);return n.length>0&&t.htmlClean.isWhitespace(n.charAt(n.length-1))}function h(t){return t.constructor==String}function d(t){return h(t)||t.tag.isInline}function f(t){return t.constructor==s}function p(t){return t.replace(/&nbsp;|\n/g," ").replace(/\s\s+/g," ")}t.fn.htmlClean=function(e){return this.each(function(){this.value?this.value=t.htmlClean(this.value,e):this.innerHTML=t.htmlClean(this.innerHTML,e)})},t.htmlClean=function(e,r){r=t.extend({},t.htmlClean.defaults,r),r.allowEmpty=y.concat(r.allowEmpty);var c,u=/(<(\/)?(\w+:)?([\w]+)([^>]*)>)|<!--(.*?--)>/gi,d=/([\w\-]+)\s*=\s*(".*?"|'.*?'|[^\s>\/]*)/gi,f=new s,p=[f],m=f;r.bodyOnly&&null!==(c=/<body[^>]*>((\n|.)*)<\/body>/i.exec(e))&&(e=c[1]),e=e.concat("<xxx>");for(var g;null!==(c=u.exec(e));){var v=c[6]?new l("--",null,c[6],r):new l(c[4],c[2],c[5],r),b=e.substring(g,c.index);if(b.length>0){var w=m.children[m.children.length-1];m.children.length>0&&h(w=m.children[m.children.length-1])?m.children[m.children.length-1]=w.concat(b):m.children.push(b)}if(g=u.lastIndex,v.isClosing)i(p,[v.name])&&(p.pop(),m=p[p.length-1]);else{for(var x,C=new s(v);null!==(x=d.exec(v.rawAttributes));){if("style"==x[1].toLowerCase()&&r.replaceStyles)for(var _=!v.isInline,S=0;S<r.replaceStyles.length;S++)r.replaceStyles[S][0].test(x[2])&&(_||(v.render=!1,_=!0),m.children.push(C),p.push(C),m=C,v=new l(r.replaceStyles[S][1],"","",r),C=new s(v));null!==v.allowedAttributes&&(0===v.allowedAttributes.length||t.inArray(x[1],v.allowedAttributes)>-1)&&C.attributes.push(new a(x[1],x[2]))}for(var k=0;k<v.requiredAttributes.length;k++){var T=v.requiredAttributes[k];C.hasAttribute(T)||C.attributes.push(new a(T,""))}for(var E=0;E<r.replace.length;E++)for(var L=0;L<r.replace[E][0].length;L++){var A="string"==typeof r.replace[E][0][L];if(A&&r.replace[E][0][L]==v.name||!A&&r.replace[E][0][L].test(c)){v.rename(r.replace[E][1]),E=r.replace.length;break}}var P=!0;if(m.isRoot||(m.tag.isInline&&!v.isInline?(P=o(p))&&(m=p[p.length-1]):m.tag.disallowNest&&v.disallowNest&&!v.requiredParent?P=!1:v.requiredParent&&(P=i(p,v.requiredParent))&&(m=p[p.length-1])),P)if(m.children.push(C),v.toProtect)for(var M;null!==(M=u.exec(e));){var N=new l(M[4],M[1],M[5],r);if(N.isClosing&&N.name==v.name){C.children.push(RegExp.leftContext.substring(g)),g=u.lastIndex;break}}else v.isSelfClosing||v.isNonClosing||(p.push(C),m=C)}}return t.htmlClean.trim(n(f,r).join(""))},t.htmlClean.defaults={bodyOnly:!0,allowedTags:[],removeTags:["basefont","center","dir","font","frame","frameset","iframe","isindex","menu","noframes","s","strike","u"],removeTagsAndContent:[],allowedAttributes:[],removeAttrs:[],allowedClasses:[],format:!1,formatIndent:0,replace:[[["b","big"],"strong"],[["i"],"em"]],replaceStyles:[[/font-weight:\s*bold/i,"strong"],[/font-style:\s*italic/i,"em"],[/vertical-align:\s*super/i,"sup"],[/vertical-align:\s*sub/i,"sub"]],allowComments:!1,allowEmpty:[],allowBreakAsLastChild:!1},t.htmlClean.trim=function(e){return t.htmlClean.trimStart(t.htmlClean.trimEnd(e))},t.htmlClean.trimStart=function(e){return e.substring(t.htmlClean.trimStartIndex(e))},t.htmlClean.trimStartIndex=function(e){for(var n=0;n<e.length-1&&t.htmlClean.isWhitespace(e.charAt(n));n++);return n},t.htmlClean.trimEnd=function(e){return e.substring(0,t.htmlClean.trimEndIndex(e))},t.htmlClean.trimEndIndex=function(e){for(var n=e.length-1;n>=0&&t.htmlClean.isWhitespace(e.charAt(n));n--);return n+1},t.htmlClean.isWhitespace=function(e){return-1!=t.inArray(e,k)};var m=["a","abbr","acronym","address","b","big","br","button","caption","cite","code","del","em","font","hr","i","input","img","ins","label","legend","map","q","s","samp","select","option","param","small","span","strike","strong","sub","sup","tt","u","var"],g=["address","button","caption","code","input","label","legend","select","option","param"],v=["h1","h2","h3","h4","h5","h6","p","th","td","object"],y=["th","td"],b=[null,"li",["ul","ol"],"dt",["dl"],"dd",["dl"],"td",["tr"],"th",["tr"],"tr",["table","thead","tbody","tfoot"],"thead",["table"],"tbody",["table"],"tfoot",["table"],"param",["object"]],w=["script","style","pre","code"],x=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],C=["!doctype","?xml"],_=[["class"],"?xml",[],"!doctype",[],"a",["accesskey","class","href","name","title","rel","rev","type","tabindex"],"abbr",["class","title"],"acronym",["class","title"],"blockquote",["cite","class"],"button",["class","disabled","name","type","value"],"del",["cite","class","datetime"],"form",["accept","action","class","enctype","method","name"],"iframe",["class","height","name","sandbox","seamless","src","srcdoc","width"],"input",["accept","accesskey","alt","checked","class","disabled","ismap","maxlength","name","size","readonly","src","tabindex","type","usemap","value"],"img",["alt","class","height","src","width"],"ins",["cite","class","datetime"],"label",["accesskey","class","for"],"legend",["accesskey","class"],"link",["href","rel","type"],"meta",["content","http-equiv","name","scheme","charset"],"map",["name"],"optgroup",["class","disabled","label"],"option",["class","disabled","label","selected","value"],"q",["class","cite"],"script",["src","type"],"select",["class","disabled","multiple","name","size","tabindex"],"style",["type"],"table",["class","summary"],"th",["class","colspan","rowspan"],"td",["class","colspan","rowspan"],"textarea",["accesskey","class","cols","disabled","name","readonly","rows","tabindex"],"param",["name","value"],"embed",["height","src","type","width"]],S=[[],"img",["alt"]],k=[" "," ","\t","\n","\r","\f"]}(jQuery)},function(t,e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"use strict";function i(t){return Array.prototype.slice.call(t)}function o(t){return"object"===n(t[0])||0===t.length}function r(t,e,n){var i=Object.getOwnPropertyDescriptor(l.prototype,e);return!!i&&void 0!==i.get}function s(t,e,n){var i=Object.getOwnPropertyDescriptor(l.prototype,e);return!!i&&void 0!==i.set}function a(t,e){return"function"==typeof t[e]}if(t){var l=function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n){if(!(e>=1)){for(var i=Math.min(n.width,Math.round(t.width*e)),o=Math.min(n.height,Math.round(t.height*e)),r=t.width,s=t.height,a=t,l=void 0,c=void 0;r>i&&s>o;)l=document.createElement("canvas"),r=Math.round(.5*a.width),s=Math.round(.5*a.height),r<i&&(r=i),s<o&&(s=o),l.width=r,l.height=s,c=l.getContext("2d"),c.drawImage(a,0,0,r,s),a=lt(l);t.width=i,t.height=o,c=t.getContext("2d"),c.drawImage(a,0,0,i,o)}}!function(){function t(t,n){n=n||{bubbles:!1,cancelable:!1,detail:e};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),i}if("function"==typeof window.CustomEvent)return!1;t.prototype=window.Event.prototype,window.CustomEvent=t}();var o=function t(e,n,i){var o,r,s=document.createElement("img");if(s.onerror=n,s.onload=function(){!r||i&&i.noRevoke||t.revokeObjectURL(r),n&&n(t.scale(s,i))},t.isInstanceOf("Blob",e)||t.isInstanceOf("File",e))o=r=t.createObjectURL(e),s._type=e.type;else{if("string"!=typeof e)return!1;o=e,i&&i.crossOrigin&&(s.crossOrigin=i.crossOrigin)}return o?(s.src=o,s):t.readFile(e,function(t){var e=t.target;e&&e.result?s.src=e.result:n&&n(t)})},r=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;o.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},o.transformCoordinates=function(){},o.getTransformedOptions=function(t,e){var n,i,o,r,s=e.aspectRatio;if(!s)return e;n={};for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n.crop=!0,o=t.naturalWidth||t.width,r=t.naturalHeight||t.height,o/r>s?(n.maxWidth=r*s,n.maxHeight=r):(n.maxWidth=o,n.maxHeight=o/s),n},o.renderImageToCanvas=function(t,e,n,i,o,r,s,a,l,c){return t.getContext("2d").drawImage(e,n,i,o,r,s,a,l,c),t},o.hasCanvasOption=function(t){return t.canvas||t.crop||!!t.aspectRatio},o.scale=function(t,n){function i(){var t=Math.max((l||x)/x,(c||C)/C);t>1&&(x*=t,C*=t)}function r(){var t=Math.min((s||x)/x,(a||C)/C);t<1&&(x*=t,C*=t)}n=n||{};var s,a,l,c,u,h,d,f,p,m,g,v=document.createElement("canvas"),y=t.getContext||o.hasCanvasOption(n)&&v.getContext,b=t.naturalWidth||t.width,w=t.naturalHeight||t.height,x=b,C=w;if(y&&(n=o.getTransformedOptions(t,n),d=n.left||0,f=n.top||0,n.sourceWidth?(u=n.sourceWidth,n.right!==e&&n.left===e&&(d=b-u-n.right)):u=b-d-(n.right||0),n.sourceHeight?(h=n.sourceHeight,n.bottom!==e&&n.top===e&&(f=w-h-n.bottom)):h=w-f-(n.bottom||0),x=u,C=h),s=n.maxWidth,a=n.maxHeight,l=n.minWidth,c=n.minHeight,y&&s&&a&&n.crop?(x=s,C=a,g=u/h-s/a,g<0?(h=a*u/s,n.top===e&&n.bottom===e&&(f=(w-h)/2)):g>0&&(u=s*h/a,n.left===e&&n.right===e&&(d=(b-u)/2))):((n.contain||n.cover)&&(l=s=s||l,c=a=a||c),n.cover?(r(),i()):(i(),r())),y){if(p=n.pixelRatio,p>1&&(v.style.width=x+"px",v.style.height=C+"px",x*=p,C*=p,v.getContext("2d").scale(p,p)),(m=n.downsamplingRatio)>0&&m<1&&x<u&&C<h)for(;u*m>x;)v.width=u*m,v.height=h*m,o.renderImageToCanvas(v,t,d,f,u,h,0,0,v.width,v.height),u=v.width,h=v.height,t=document.createElement("canvas"),t.width=u,t.height=h,o.renderImageToCanvas(t,v,0,0,u,h,0,0,u,h);return v.width=x,v.height=C,o.transformCoordinates(v,n),o.renderImageToCanvas(v,t,d,f,u,h,0,0,x,C)}return t.width=x,t.height=C,t},o.createObjectURL=function(t){return!!r&&r.createObjectURL(t)},o.revokeObjectURL=function(t){return!!r&&r.revokeObjectURL(t)},o.readFile=function(t,e,n){if(window.FileReader){var i=new FileReader;if(i.onload=i.onerror=e,n=n||"readAsDataURL",i[n])return i[n](t),i}return!1};var s=o.hasCanvasOption,a=o.transformCoordinates,l=o.getTransformedOptions;o.hasCanvasOption=function(t){return!!t.orientation||s.call(o,t)},o.transformCoordinates=function(t,e){a.call(o,t,e);var n=t.getContext("2d"),i=t.width,r=t.height,s=t.style.width,l=t.style.height,c=e.orientation;if(c&&!(c>8))switch(c>4&&(t.width=r,t.height=i,t.style.width=l,t.style.height=s),c){case 2:n.translate(i,0),n.scale(-1,1);break;case 3:n.translate(i,r),n.rotate(Math.PI);break;case 4:n.translate(0,r),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-r);break;case 7:n.rotate(.5*Math.PI),n.translate(i,-r),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-i,0)}},o.getTransformedOptions=function(t,e){var n,i,r=l.call(o,t,e),s=r.orientation;if(!s||s>8||1===s)return r;n={};for(i in r)r.hasOwnProperty(i)&&(n[i]=r[i]);switch(r.orientation){case 2:n.left=r.right,n.right=r.left;break;case 3:n.left=r.right,n.top=r.bottom,n.right=r.left,n.bottom=r.top;break;case 4:n.top=r.bottom,n.bottom=r.top;break;case 5:n.left=r.top,n.top=r.left,n.right=r.bottom,n.bottom=r.right;break;case 6:n.left=r.top,n.top=r.right,n.right=r.bottom,n.bottom=r.left;break;case 7:n.left=r.bottom,n.top=r.right,n.right=r.top,n.bottom=r.left;break;case 8:n.left=r.bottom,n.top=r.left,n.right=r.top,n.bottom=r.right}return r.orientation>4&&(n.maxWidth=r.maxHeight,n.maxHeight=r.maxWidth,n.minWidth=r.minHeight,n.minHeight=r.minWidth,n.sourceWidth=r.sourceHeight,n.sourceHeight=r.sourceWidth),n};var c=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);o.blobSlice=c&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},o.metaDataParsers={jpeg:{65505:[]}},o.parseMetaData=function(t,e,n){n=n||{};var i=this,r=n.maxMetaDataSize||262144,s={};!!(window.DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&o.blobSlice)&&o.readFile(o.blobSlice.call(t,0,r),function(t){if(t.target.error)return void e(s);var r,a,l,c,u=t.target.result,h=new DataView(u),d=2,f=h.byteLength-4,p=d;if(65496===h.getUint16(0)){for(;d<f&&((r=h.getUint16(d))>=65504&&r<=65519||65534===r)&&(a=h.getUint16(d+2)+2,!(d+a>h.byteLength));){if(l=o.metaDataParsers.jpeg[r])for(c=0;c<l.length;c+=1)l[c].call(i,h,d,a,s,n);d+=a,p=d}!n.disableImageHead&&p>6&&(u.slice?s.imageHead=u.slice(0,p):s.imageHead=new Uint8Array(u).subarray(0,p))}e(s)},"readAsArrayBuffer")||e(s)},o.ExifMap=function(){return this},o.ExifMap.prototype.map={Orientation:274},o.ExifMap.prototype.get=function(t){return this[t]||this[this.map[t]]},o.getExifThumbnail=function(t,e,n){var i,o,r;if(n&&!(e+n>t.byteLength)){for(i=[],o=0;o<n;o+=1)r=t.getUint8(e+o),i.push((r<16?"0":"")+r.toString(16));return"data:image/jpeg,%"+i.join("%")}},o.exifTagTypes={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,n){return t.getUint16(e,n)},size:2},4:{getValue:function(t,e,n){return t.getUint32(e,n)},size:4},5:{getValue:function(t,e,n){return t.getUint32(e,n)/t.getUint32(e+4,n)},size:8},9:{getValue:function(t,e,n){return t.getInt32(e,n)},size:4},10:{getValue:function(t,e,n){return t.getInt32(e,n)/t.getInt32(e+4,n)},size:8}},o.exifTagTypes[7]=o.exifTagTypes[1],o.getExifValue=function(t,e,n,i,r,s){var a,l,c,u,h,d,f=o.exifTagTypes[i];if(f&&(a=f.size*r,!((l=a>4?e+t.getUint32(n+8,s):n+8)+a>t.byteLength))){if(1===r)return f.getValue(t,l,s);for(c=[],u=0;u<r;u+=1)c[u]=f.getValue(t,l+u*f.size,s);if(f.ascii){for(h="",u=0;u<c.length&&"\0"!==(d=c[u]);u+=1)h+=d;return h}return c}},o.parseExifTag=function(t,e,n,i,r){var s=t.getUint16(n,i);r.exif[s]=o.getExifValue(t,e,n,t.getUint16(n+2,i),t.getUint32(n+4,i),i)},o.parseExifTags=function(t,e,n,i,o){var r,s,a;if(!(n+6>t.byteLength||(r=t.getUint16(n,i),(s=n+2+12*r)+4>t.byteLength))){for(a=0;a<r;a+=1)this.parseExifTag(t,e,n+2+12*a,i,o);return t.getUint32(s,i)}},o.parseExifData=function(t,e,n,i,r){if(!r.disableExif){var s,a,l,c=e+10;if(1165519206===t.getUint32(e+4)&&!(c+8>t.byteLength)&&0===t.getUint16(e+8)){switch(t.getUint16(c)){case 18761:s=!0;break;case 19789:s=!1;break;default:return}42===t.getUint16(c+2,s)&&(a=t.getUint32(c+4,s),i.exif=new o.ExifMap,a=o.parseExifTags(t,c,c+a,s,i),a&&!r.disableExifThumbnail&&(l={exif:{}},a=o.parseExifTags(t,c,c+a,s,l),l.exif[513]&&(i.exif.Thumbnail=o.getExifThumbnail(t,c+l.exif[513],l.exif[514]))),i.exif[34665]&&!r.disableExifSub&&o.parseExifTags(t,c,c+i.exif[34665],s,i),i.exif[34853]&&!r.disableExifGps&&o.parseExifTags(t,c,c+i.exif[34853],s,i))}}},o.metaDataParsers.jpeg[65505].push(o.parseExifData);var u=function(){var t=[],n=[],i=[],o="transform",r=window.getComputedStyle(document.documentElement,"");"webkit"===(Array.prototype.slice.call(r).join("").match(/-(moz|webkit|ms)-/)||""===r.OLink&&["","o"])[1]&&(o="webkitTransform");var s=function(t,n,i){var o=t;if(o.length!==e){for(var r={chainers:[],then:function(t){return this.snabbt(t)},snabbt:function(t){var e=this.chainers.length;return this.chainers.forEach(function(n,i){n.snabbt(a(t,i,e))}),r},setValue:function(t){return this.chainers.forEach(function(e){e.setValue(t)}),r},finish:function(){return this.chainers.forEach(function(t){t.finish()}),r},rollback:function(){return this.chainers.forEach(function(t){t.rollback()}),r}},s=0,c=o.length;s<c;++s)"string"==typeof n?r.chainers.push(l(o[s],n,a(i,s,c))):r.chainers.push(l(o[s],a(n,s,c),i));return r}return"string"==typeof n?l(o,n,a(i,0,1)):l(o,a(n,0,1),i)},a=function(t,e,n){if(!t)return t;var i=Y(t);X(t.delay)&&(i.delay=t.delay(e,n)),X(t.callback)&&(i.complete=function(){t.callback.call(this,e,n)});var o=X(t.allDone),r=X(t.complete);return(r||o)&&(i.complete=function(){r&&t.complete.call(this,e,n),o&&e==n-1&&t.allDone()}),X(t.valueFeeder)&&(i.valueFeeder=function(i,o){return t.valueFeeder(i,o,e,n)}),X(t.easing)&&(i.easing=function(i){return t.easing(i,e,n)}),["position","rotation","skew","rotationPost","scale","width","height","opacity","fromPosition","fromRotation","fromSkew","fromRotationPost","fromScale","fromWidth","fromHeight","fromOpacity","transformOrigin","duration","delay"].forEach(function(o){X(t[o])&&(i[o]=t[o](e,n))}),i},l=function(t,e,i){function o(e){if(p.tick(e),p.updateElement(t),!p.isStopped())return p.completed()?void(r.loop>1&&!p.isStopped()?(r.loop-=1,p.restart(),x(o)):(r.complete&&r.complete.call(t),g.length&&(r=g.pop(),l=y(r,h,!0),h=y(r,Y(h)),r=b(l,h,r),p=_(r),n.push([t,p]),p.tick(e),x(o)))):x(o)}if("attention"===e)return c(t,i);if("stop"===e)return u(t);if("detach"===e)return d(t);var r=e;m();var s=v(t),l=s;l=y(r,l,!0);var h=Y(s);h=y(r,h);var f=b(l,h,r),p=_(f);n.push([t,p]),p.updateElement(t,!0);var g=[],w={snabbt:function(t){return g.unshift(a(t,0,1)),w},then:function(t){return this.snabbt(t)}};return x(o),r.manual?p:w},c=function(t,e){function i(n){r.tick(n),r.updateElement(t),r.completed()?(e.callback&&e.callback(t),e.loop&&e.loop>1&&(e.loop--,r.restart(),x(i))):x(i)}var o=y(e,z({}));e.movement=o;var r=S(e);n.push([t,r]),x(i)},u=function(t){for(var e=0,i=n.length;e<i;++e){var o=n[e],r=o[0],s=o[1];r===t&&s.stop()}},h=function(t,e){for(var n=0,i=t.length;n<i;++n)if(t[n][0]===e)return n;return-1},d=function(t){var e,o,r=[],s=n.concat(i),a=s.length;for(o=0;o<a;++o)e=s[o][0],(t.contains(e)||t===e)&&r.push(e);for(a=r.length,o=0;o<a;++o)f(r[o])},f=function(t){u(t);var e=h(n,t);e>=0&&n.splice(e,1),(e=h(i,t))>=0&&i.splice(e,1)},p=function(t,e){for(var n=0,i=t.length;n<i;++n){var o=t[n],r=o[0],s=o[1];if(r===e){var a=s.getCurrentState();return s.stop(),a}}},m=function(){i=i.filter(function(t){return g(t[0]).body})},g=function(t){for(var e=t;e.parentNode;)e=e.parentNode;return e},v=function(t){var e=p(n,t);return e||p(i,t)},y=function(t,e,n){e||(e=z({position:[0,0,0],rotation:[0,0,0],rotationPost:[0,0,0],scale:[1,1],skew:[0,0]}));var i="position",o="rotation",r="skew",s="rotationPost",a="scale",l="scalePost",c="width",u="height",h="opacity";return n&&(i="fromPosition",o="fromRotation",r="fromSkew",s="fromRotationPost",a="fromScale",l="fromScalePost",c="fromWidth",u="fromHeight",h="fromOpacity"),e.position=U(t[i],e.position),e.rotation=U(t[o],e.rotation),e.rotationPost=U(t[s],e.rotationPost),e.skew=U(t[r],e.skew),e.scale=U(t[a],e.scale),e.scalePost=U(t[l],e.scalePost),e.opacity=t[h],e.width=t[c],e.height=t[u],e},b=function(t,e,n){return n.startState=t,n.endState=e,n},w=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},x=function(e){0===t.length&&w(C),t.push(e)},C=function e(o){for(var r=t.length,s=0;s<r;++s)t[s](o);t.splice(0,r);var a=n.filter(function(t){return t[1].completed()});i=i.filter(function(t){for(var e=0,n=a.length;e<n;++e)if(t[0]===a[e][0])return!1;return!0}),i=i.concat(a),n=n.filter(function(t){return!t[1].completed()}),0!==t.length&&w(e)},_=function(t){var n=t.startState,i=t.endState,o=U(t.duration,500),r=U(t.delay,0),s=t.perspective,a=M(U(t.easing,"linear"),t),l=0===o?i.clone():n.clone();t.transformOrigin;l.transformOrigin=t.transformOrigin;var c,u,h=0,d=0,f=!1,p=!1,m=t.manual,g=0,v=r/o;return u=t.valueFeeder?q(t.valueFeeder,n,i,l):j(n,i,l),{stop:function(){f=!0},isStopped:function(){return f},finish:function(t){m=!1,h=d-o*g,c=t,a.resetFrom=g},rollback:function(t){m=!1,u.setReverse(),h=d-o*(1-g),c=t,a.resetFrom=g},restart:function(){h=e,a.resetFrom(0)},tick:function(t){if(!f){if(m)return d=t,void this.updateCurrentTransform();if(h||(h=t),t-h>r){p=!0,d=t-r;var e=Math.min(Math.max(0,d-h),o);a.tick(e/o),this.updateCurrentTransform(),this.completed()&&c&&c()}}},getCurrentState:function(){return l},setValue:function(t){p=!0,g=Math.min(Math.max(t,1e-4),1+v)},updateCurrentTransform:function(){var t=a.getValue();if(m){var e=Math.max(1e-5,g-v);a.tick(e),t=a.getValue()}u.tween(t)},completed:function(){return!!f||0!==h&&a.completed()},updateElement:function(t,e){if(p||e){var n=u.asMatrix(),i=u.getProperties();V(t,n,s),K(t,i)}}}},S=function(t){var n=t.movement;t.initialVelocity=.1,t.equilibriumPosition=0;var i=A(t),o=!1,r=n.position,s=n.rotation,a=n.rotationPost,l=n.scale,c=n.skew,u=z({position:r?[0,0,0]:e,rotation:s?[0,0,0]:e,rotationPost:a?[0,0,0]:e,scale:l?[0,0]:e,skew:c?[0,0]:e});return{stop:function(){o=!0},isStopped:function(t){return o},tick:function(t){o||i.equilibrium||(i.tick(),this.updateMovement())},updateMovement:function(){var t=i.getValue();r&&(u.position[0]=n.position[0]*t,u.position[1]=n.position[1]*t,u.position[2]=n.position[2]*t),s&&(u.rotation[0]=n.rotation[0]*t,u.rotation[1]=n.rotation[1]*t,u.rotation[2]=n.rotation[2]*t),a&&(u.rotationPost[0]=n.rotationPost[0]*t,u.rotationPost[1]=n.rotationPost[1]*t,u.rotationPost[2]=n.rotationPost[2]*t),l&&(u.scale[0]=1+n.scale[0]*t,u.scale[1]=1+n.scale[1]*t),c&&(u.skew[0]=n.skew[0]*t,u.skew[1]=n.skew[1]*t)},updateElement:function(t){V(t,u.asMatrix()),K(t,u.getProperties())},getCurrentState:function(){return u},completed:function(){return i.equilibrium||o},restart:function(){i=A(t)}}},k=function(t){return t},T=function(t){return(Math.cos(t*Math.PI+Math.PI)+1)/2},E=function(t){return t*t},L=function(t){return 1-Math.pow(t-1,2)},A=function(t){var e=U(t.startPosition,0),n=U(t.equilibriumPosition,1),i=U(t.initialVelocity,0),o=U(t.springConstant,.8),r=U(t.springDeceleration,.9),s=U(t.springMass,10),a=!1;return{tick:function(t){if(0!==t&&!a){i+=-(e-n)*o/s,e+=i,i*=r,Math.abs(e-n)<.001&&Math.abs(i)<.001&&(a=!0)}},resetFrom:function(t){e=t,i=0},getValue:function(){return a?n:e},completed:function(){return a}}},P={linear:k,ease:T,easeIn:E,easeOut:L},M=function(t,e){if("spring"==t)return A(e);var n=t;X(t)||(n=P[t]);var i,o=n,r=0;return{tick:function(t){r=o(t),i=t},resetFrom:function(t){i=0},getValue:function(){return r},completed:function(){return i>=1&&i}}},N=function(t,e,n,i){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e,t[13]=n,t[14]=i,t[15]=1},D=function(t,e){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=Math.cos(e),t[6]=-Math.sin(e),t[7]=0,t[8]=0,t[9]=Math.sin(e),t[10]=Math.cos(e),t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},O=function(t,e){t[0]=Math.cos(e),t[1]=0,t[2]=Math.sin(e),t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=-Math.sin(e),t[9]=0,t[10]=Math.cos(e),t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},I=function(t,e){t[0]=Math.cos(e),t[1]=-Math.sin(e),t[2]=0,t[3]=0,t[4]=Math.sin(e),t[5]=Math.cos(e),t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},H=function(t,e,n){t[0]=1,t[1]=Math.tan(e),t[2]=0,t[3]=0,t[4]=Math.tan(n),t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},F=function(t,e,n){t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},R=function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},B=function(t,e){e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]},W=function(){var t=new Float32Array(16),e=new Float32Array(16),n=new Float32Array(16);return R(t),{data:t,asCSS:function(){for(var e="matrix3d(",n=0;n<15;++n)Math.abs(t[n])<1e-4?e+="0,":e+=t[n].toFixed(10)+",";return Math.abs(t[15])<1e-4?e+="0)":e+=t[15].toFixed(10)+")",e},clear:function(){R(t)},translate:function(i,o,r){return B(t,e),N(n,i,o,r),$(e,n,t),this},rotateX:function(i){return B(t,e),D(n,i),$(e,n,t),this},rotateY:function(i){return B(t,e),O(n,i),$(e,n,t),this},rotateZ:function(i){return B(t,e),I(n,i),$(e,n,t),this},scale:function(i,o){return B(t,e),F(n,i,o),$(e,n,t),this},skew:function(i,o){return B(t,e),H(n,i,o),$(e,n,t),this}}},$=function(t,e,n){return n[0]=t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12],n[1]=t[0]*e[1]+t[1]*e[5]+t[2]*e[9]+t[3]*e[13],n[2]=t[0]*e[2]+t[1]*e[6]+t[2]*e[10]+t[3]*e[14],n[3]=t[0]*e[3]+t[1]*e[7]+t[2]*e[11]+t[3]*e[15],n[4]=t[4]*e[0]+t[5]*e[4]+t[6]*e[8]+t[7]*e[12],n[5]=t[4]*e[1]+t[5]*e[5]+t[6]*e[9]+t[7]*e[13],n[6]=t[4]*e[2]+t[5]*e[6]+t[6]*e[10]+t[7]*e[14],n[7]=t[4]*e[3]+t[5]*e[7]+t[6]*e[11]+t[7]*e[15],n[8]=t[8]*e[0]+t[9]*e[4]+t[10]*e[8]+t[11]*e[12],n[9]=t[8]*e[1]+t[9]*e[5]+t[10]*e[9]+t[11]*e[13],n[10]=t[8]*e[2]+t[9]*e[6]+t[10]*e[10]+t[11]*e[14],n[11]=t[8]*e[3]+t[9]*e[7]+t[10]*e[11]+t[11]*e[15],n[12]=t[12]*e[0]+t[13]*e[4]+t[14]*e[8]+t[15]*e[12],n[13]=t[12]*e[1]+t[13]*e[5]+t[14]*e[9]+t[15]*e[13],n[14]=t[12]*e[2]+t[13]*e[6]+t[14]*e[10]+t[15]*e[14],n[15]=t[12]*e[3]+t[13]*e[7]+t[14]*e[11]+t[15]*e[15],n},z=function t(n){var i=W(),o={opacity:e,width:e,height:e};return{position:n.position,rotation:n.rotation,rotationPost:n.rotationPost,skew:n.skew,scale:n.scale,scalePost:n.scalePost,opacity:n.opacity,width:n.width,height:n.height,clone:function(){return t({position:this.position?this.position.slice(0):e,rotation:this.rotation?this.rotation.slice(0):e,rotationPost:this.rotationPost?this.rotationPost.slice(0):e,skew:this.skew?this.skew.slice(0):e,scale:this.scale?this.scale.slice(0):e,scalePost:this.scalePost?this.scalePost.slice(0):e,height:this.height,width:this.width,opacity:this.opacity})},asMatrix:function(){var t=i;return t.clear(),this.transformOrigin&&t.translate(-this.transformOrigin[0],-this.transformOrigin[1],-this.transformOrigin[2]),this.scale&&t.scale(this.scale[0],this.scale[1]),this.skew&&t.skew(this.skew[0],this.skew[1]),this.rotation&&(t.rotateX(this.rotation[0]),t.rotateY(this.rotation[1]),t.rotateZ(this.rotation[2])),this.position&&t.translate(this.position[0],this.position[1],this.position[2]),this.rotationPost&&(t.rotateX(this.rotationPost[0]),t.rotateY(this.rotationPost[1]),t.rotateZ(this.rotationPost[2])),this.scalePost&&t.scale(this.scalePost[0],this.scalePost[1]),this.transformOrigin&&t.translate(this.transformOrigin[0],this.transformOrigin[1],this.transformOrigin[2]),t},getProperties:function(){return o.opacity=this.opacity,o.width=this.width+"px",o.height=this.height+"px",o}}},j=function(t,n,i){var o=t,r=n,s=i,a=r.position!==e,l=r.rotation!==e,c=r.rotationPost!==e,u=r.scale!==e,h=r.skew!==e,d=r.width!==e,f=r.height!==e,p=r.opacity!==e;return{tween:function(t){if(a){var e=r.position[0]-o.position[0],n=r.position[1]-o.position[1],i=r.position[2]-o.position[2];s.position[0]=o.position[0]+t*e,s.position[1]=o.position[1]+t*n,s.position[2]=o.position[2]+t*i}if(l){var m=r.rotation[0]-o.rotation[0],g=r.rotation[1]-o.rotation[1],v=r.rotation[2]-o.rotation[2];s.rotation[0]=o.rotation[0]+t*m,s.rotation[1]=o.rotation[1]+t*g,s.rotation[2]=o.rotation[2]+t*v}if(c){var y=r.rotationPost[0]-o.rotationPost[0],b=r.rotationPost[1]-o.rotationPost[1],w=r.rotationPost[2]-o.rotationPost[2];s.rotationPost[0]=o.rotationPost[0]+t*y,s.rotationPost[1]=o.rotationPost[1]+t*b,s.rotationPost[2]=o.rotationPost[2]+t*w}if(h){var x=r.scale[0]-o.scale[0],C=r.scale[1]-o.scale[1];s.scale[0]=o.scale[0]+t*x,s.scale[1]=o.scale[1]+t*C}if(u){var _=r.skew[0]-o.skew[0],S=r.skew[1]-o.skew[1];s.skew[0]=o.skew[0]+t*_,s.skew[1]=o.skew[1]+t*S}if(d){var k=r.width-o.width;s.width=o.width+t*k}if(f){var T=r.height-o.height;s.height=o.height+t*T}if(p){var E=r.opacity-o.opacity;s.opacity=o.opacity+t*E}},asMatrix:function(){return s.asMatrix()},getProperties:function(){return s.getProperties()},setReverse:function(){var t=o;o=r,r=t}}},q=function(t,n,i,o){var r=t(0,W()),s=n,a=i,l=o,c=!1;return{tween:function(n){c&&(n=1-n),r.clear(),r=t(n,r);var i=a.width-s.width,o=a.height-s.height,u=a.opacity-s.opacity;a.width!==e&&(l.width=s.width+n*i),a.height!==e&&(l.height=s.height+n*o),a.opacity!==e&&(l.opacity=s.opacity+n*u)},asMatrix:function(){return r},getProperties:function(){return l.getProperties()},setReverse:function(){c=!0}}},U=function(t,e){return void 0===t?e:t},V=function(t,e,n){var i="";n&&(i="perspective("+n+"px) ");var r=e.asCSS();t.style[o]=i+r},K=function(t,e){for(var n in e)t.style[n]=e[n]},X=function(t){return"function"==typeof t},Y=function(t){if(!t)return t;var e={};for(var n in t)e[n]=t[n];return e};return s.createMatrix=W,s.setElementTransform=V,s}(),h=function(){function t(t,e,n,i,o){if("string"==typeof t)t=document.getElementById(t);else if(!t instanceof HTMLCanvasElement)return;var r,s=t.getContext("2d");try{try{r=s.getImageData(e,n,i,o)}catch(t){throw new Error("unable to access local image data: "+t)}}catch(t){throw new Error("unable to access image data: "+t)}return r}function e(e,i,o,r,s,a){if(!(isNaN(a)||a<1)){a|=0;var l=t(e,i,o,r,s);l=n(l,i,o,r,s,a),e.getContext("2d").putImageData(l,i,o)}}function n(t,e,n,s,a,l){var c,u,h,d,f,p,m,g,v,y,b,w,x,C,_,S,k,T,E,L,A,P,M,N,D=t.data,O=l+l+1,I=s-1,H=a-1,F=l+1,R=F*(F+1)/2,B=new i,W=B;for(h=1;h<O;h++)if(W=W.next=new i,h==F)var $=W;W.next=B;var z=null,j=null;m=p=0;var q=o[l],U=r[l];for(u=0;u<a;u++){for(S=k=T=E=g=v=y=b=0,w=F*(L=D[p]),x=F*(A=D[p+1]),C=F*(P=D[p+2]),_=F*(M=D[p+3]),g+=R*L,v+=R*A,y+=R*P,b+=R*M,W=B,h=0;h<F;h++)W.r=L,W.g=A,W.b=P,W.a=M,W=W.next;for(h=1;h<F;h++)d=p+((I<h?I:h)<<2),g+=(W.r=L=D[d])*(N=F-h),v+=(W.g=A=D[d+1])*N,y+=(W.b=P=D[d+2])*N,b+=(W.a=M=D[d+3])*N,S+=L,k+=A,T+=P,E+=M,W=W.next;for(z=B,j=$,c=0;c<s;c++)D[p+3]=M=b*q>>U,0!=M?(M=255/M,D[p]=(g*q>>U)*M,D[p+1]=(v*q>>U)*M,D[p+2]=(y*q>>U)*M):D[p]=D[p+1]=D[p+2]=0,g-=w,v-=x,y-=C,b-=_,w-=z.r,x-=z.g,C-=z.b,_-=z.a,d=m+((d=c+l+1)<I?d:I)<<2,S+=z.r=D[d],k+=z.g=D[d+1],T+=z.b=D[d+2],E+=z.a=D[d+3],g+=S,v+=k,y+=T,b+=E,z=z.next,w+=L=j.r,x+=A=j.g,C+=P=j.b,_+=M=j.a,S-=L,k-=A,T-=P,E-=M,j=j.next,p+=4;m+=s}for(c=0;c<s;c++){for(k=T=E=S=v=y=b=g=0,p=c<<2,w=F*(L=D[p]),x=F*(A=D[p+1]),C=F*(P=D[p+2]),_=F*(M=D[p+3]),g+=R*L,v+=R*A,y+=R*P,b+=R*M,W=B,h=0;h<F;h++)W.r=L,W.g=A,W.b=P,W.a=M,W=W.next;for(f=s,h=1;h<=l;h++)p=f+c<<2,g+=(W.r=L=D[p])*(N=F-h),v+=(W.g=A=D[p+1])*N,y+=(W.b=P=D[p+2])*N,b+=(W.a=M=D[p+3])*N,S+=L,k+=A,T+=P,E+=M,W=W.next,h<H&&(f+=s);for(p=c,z=B,j=$,u=0;u<a;u++)d=p<<2,D[d+3]=M=b*q>>U,M>0?(M=255/M,D[d]=(g*q>>U)*M,D[d+1]=(v*q>>U)*M,D[d+2]=(y*q>>U)*M):D[d]=D[d+1]=D[d+2]=0,g-=w,v-=x,y-=C,b-=_,w-=z.r,x-=z.g,C-=z.b,_-=z.a,d=c+((d=u+F)<H?d:H)*s<<2,g+=S+=z.r=D[d],v+=k+=z.g=D[d+1],y+=T+=z.b=D[d+2],b+=E+=z.a=D[d+3],z=z.next,w+=L=j.r,x+=A=j.g,C+=P=j.b,_+=M=j.a,S-=L,k-=A,T-=P,E-=M,j=j.next,p+=s}return t}function i(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var o=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];return e}();HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,n){for(var i=atob(this.toDataURL(e,n).split(",")[1]),o=i.length,r=new Uint8Array(o),s=0;s<o;s++)r[s]=i.charCodeAt(s);t(new Blob([r],{type:e||"image/png"}))}});var d=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),f="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return void 0===t?"undefined":n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":n(t)},p=function(t){if(void 0===t.dataset){var e,n,i={},o=t.attributes;for(e in o)o.hasOwnProperty(e)&&o[e].name&&/^data-[a-z_\-\d]*$/i.test(o[e].name)&&(n=m(o[e].name.substr(5)),i[n]=o[e].value);return i}return t.dataset},m=function(t){return t.replace(/\-./g,function(t){return t.charAt(1).toUpperCase()})},g=function(t){for(var e=[],n=Array.prototype.slice.call(t.attributes),i=n.length,o=0;o<i;o++)e.push({name:n[o].name,value:n[o].value});return e},v=function(t){return{x:void 0===t.offsetX?t.layerX:t.offsetX,y:void 0===t.offsetY?t.layerY:t.offsetY}},y=function(t,e){var n,i={},o=e||{};for(n in t)t.hasOwnProperty(n)&&(i[n]=void 0===o[n]?t[n]:o[n]);return i},b={ESC:27,RETURN:13},w={DOWN:["touchstart","pointerdown","mousedown"],MOVE:["touchmove","pointermove","mousemove"],UP:["touchend","touchcancel","pointerup","mouseup"]},x={jpeg:"image/jpeg",jpg:"image/jpeg",jpe:"image/jpeg",png:"image/png",gif:"image/gif",bmp:"image/bmp"},C=/(\.png|\.bmp|\.gif|\.jpg|\.jpe|\.jpg|\.jpeg)$/,_=function(t,e){var n=document.createElement(t);return e&&(n.className=e),n},S=function(t,e,n){e.forEach(function(e){t.addEventListener(e,n,!1)})},k=function(t,e,n){e.forEach(function(e){t.removeEventListener(e,n,!1)})},T=function(t){var e=t.changedTouches?t.changedTouches[0]:t;if(e)return{x:e.pageX,y:e.pageY}},E=function(t,e){var n=Math.PI/180*e,i=Math.cos(n),o=Math.sin(n),r=t.x,s=t.y,a=t.x+t.width,l=t.y+t.height,c=i*(r-.5)+o*(s-.5)+.5,u=i*(s-.5)-o*(r-.5)+.5,h=i*(a-.5)+o*(l-.5)+.5,d=i*(l-.5)-o*(a-.5)+.5;c<=h?(t.x=c,t.width=h-c):(t.x=h,t.width=c-h),u<=d?(t.y=u,t.height=d-u):(t.y=d,t.height=u-d)},L=function(t){var e=T(t);return e.x-=window.pageXOffset||document.documentElement.scrollLeft,e.y-=window.pageYOffset||document.documentElement.scrollTop,e},A=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},P=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},M=function(t){return t[t.length-1]},N=function(t,e,n){return Math.max(e,Math.min(n,t))},D=function(t,e){if(!e)return!1;for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},O=function(t,e,n,i,o,r){var s=new XMLHttpRequest;i&&s.upload.addEventListener("progress",function(t){i(t.loaded,t.total)}),s.open("POST",t,!0),n&&n(s),s.onreadystatechange=function(){if(4===s.readyState&&s.status>=200&&s.status<300){var t=s.responseText;if(!t.length)return void o();if(-1!==t.indexOf("Content-Length"))return void r("file-too-big");var e=void 0;try{e=JSON.parse(s.responseText)}catch(t){}if("object"===(void 0===e?"undefined":f(e))&&"failure"===e.status)return void r(e.message);o(e||t)}else if(4===s.readyState){var n=void 0;try{n=JSON.parse(s.responseText)}catch(t){}if("object"===(void 0===n?"undefined":f(n))&&"failure"===n.status)return void r(n.message);r("fail")}},s.send(e)},I=function(t){t&&(t.style.webkitTransform="",t.style.transform="")},H=function(t){return t/1e6},F=function(){var t=[],e=void 0,n=void 0;for(e in x)x.hasOwnProperty(e)&&(n=x[e],-1==t.indexOf(n)&&t.push(n));return t},R=function(t){return"image/jpeg"===t},B=function(t){var e=void 0;for(e in x)if(x.hasOwnProperty(e)&&x[e]===t)return e;return t},W=function(t){var e=void 0;for(e in x)if(x.hasOwnProperty(e)&&-1!==t.indexOf(x[e]))return x[e];return null},$=function(t){return t.split("/").pop().split("?").shift()},z=function(t){var n=arguments.length>1&&arguments[1]!==e?arguments[1]:"";return(n+t).slice(-n.length)},j=function(t){return t.getFullYear()+"-"+z(t.getMonth()+1,"00")+"-"+z(t.getDate(),"00")+"_"+z(t.getHours(),"00")+"-"+z(t.getMinutes(),"00")+"-"+z(t.getSeconds(),"00")},q=function(t){return void 0===t.name?j(new Date)+"."+B(U(t)):t.name},U=function(t){return t.type||"image/jpeg"},V=function(t){return"string"!=typeof t?j(new Date):$(t).split(".").shift()},K=function(t,e){return t.lastModifiedDate=new Date,t.name=e,t},X=function(t){return/^data:image/.test(t)},Y=function(t,e,n,i){var o=new XMLHttpRequest;o.open("GET",t+"?url="+e,!0),o.responseType="json",o.onload=function(t){if("failure"===this.response.status)return void n(this.response.message);G(this.response.body,i)},o.send()},G=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(n){var i=$(t),o=W(this.response.type);C.test(i)||(i+="."+B(o));var r=K(this.response,i);e(yt(r,o))},n.send()},Z=function(t){var e=t.split(",")[1],n=e.replace(/\s/g,"");return atob(n)},Q=function(t,e){for(var n=Z(t),i=new ArrayBuffer(n.length),o=new Uint8Array(i),r=0;r<n.length;r++)o[r]=n.charCodeAt(r);var s=xt(t);return void 0===e&&(e=j(new Date)+"."+B(s)),K(J(i,s),e)},J=function(t,e){var n=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(n){var i=new n;return i.append(t),i.getBlob(e)}return new Blob([t],{type:e})},tt=function(t,e,n){var i="string"!=typeof t||0!==t.indexOf("data:image");o.parseMetaData(t,function(r){var s={canvas:!0,crossOrigin:i};e&&(s.maxWidth=e.width,s.maxHeight=e.height),r.exif&&(s.orientation=r.exif.get("Orientation")),o(t,function(t){if("error"===t.type)return void n();n(t,r)},s)})},et=function(t,e,n){var i,o,r,s;return e/t<n?(s=e,r=s/n,i=.5*(t-r),o=0):(r=t,s=r*n,i=0,o=.5*(e-s)),{x:i,y:o,height:s,width:r}},nt=function(t){var n=arguments.length>1&&arguments[1]!==e?arguments[1]:{},o=arguments[2],r=_("canvas"),s=n.rotation,a=n.crop,l=n.size,c=n.filters;if(a){var u=s%180!=0,h={width:u?t.height:t.width,height:u?t.width:t.height};a.x<0&&(a.x=0),a.y<0&&(a.y=0),a.width>h.width&&(a.width=h.width),a.height>h.height&&(a.height=h.height),a.y+a.height>h.height&&(a.y=Math.max(0,h.height-a.height)),a.x+a.width>h.width&&(a.x=Math.max(0,h.width-a.width));var d=a.x/h.width,f=a.y/h.height,p=a.width/h.width,m=a.height/h.height;r.width=a.width,r.height=a.height;var g=r.getContext("2d");90===s?(g.translate(.5*r.width,.5*r.height),g.rotate(-90*Math.PI/180),g.drawImage(t,(1-f)*t.width-t.width*m,a.x,a.height,a.width,.5*-r.height,.5*-r.width,r.height,r.width)):180===s?(g.translate(.5*r.width,.5*r.height),g.rotate(-180*Math.PI/180),g.drawImage(t,(1-(d+p))*h.width,(1-(f+m))*h.height,p*h.width,m*h.height,.5*-r.width,.5*-r.height,r.width,r.height)):270===s?(g.translate(.5*r.width,.5*r.height),g.rotate(-270*Math.PI/180),g.drawImage(t,a.y,(1-d)*t.height-t.height*p,a.height,a.width,.5*-r.height,.5*-r.width,r.height,r.width)):g.drawImage(t,a.x,a.y,a.width,a.height,0,0,r.width,r.height)}if(l){var v=l.width/r.width,y=l.height/r.height;i(r,Math.min(v,y),l),c.sharpen>0&&ot(r,st(c.sharpen))}o(r)},it=function(t){return t.getContext("2d").getImageData(0,0,t.width,t.height)},ot=function(t,e){t.getContext("2d").putImageData(e(it(t),t.width,t.height),0,0)},rt=function(t,e,n){var i=document.createElement("canvas");i.width=t,i.height=e;var o=i.getContext("2d"),r=o.createImageData(i.width,i.height);return n&&r.set(n.data),r},st=function(t){return function(e,n,i){for(var o=[0,-1,0,-1,5,-1,0,-1,0],r=Math.round(Math.sqrt(o.length)),s=.5*r|0,a=rt(n,i),l=a.data,c=e.data,u=i,h=void 0;u--;)for(h=n;h--;){for(var d=u,f=h,p=4*(u*n+h),m=0,g=0,v=0,y=0,b=0;b<r;b++)for(var w=0;w<r;w++){var x=d+b-s,C=f+w-s;if(x>=0&&x<i&&C>=0&&C<n){var _=4*(x*n+C),S=o[b*r+w];m+=c[_]*S,g+=c[_+1]*S,v+=c[_+2]*S,y+=c[_+3]*S}}l[p]=m*t+c[p]*(1-t),l[p+1]=g*t+c[p+1]*(1-t),l[p+2]=v*t+c[p+2]*(1-t),l[p+3]=c[p+3]}return a}},at=function(t,e){var n=Math.abs(t.width-e.width),i=Math.abs(t.height-e.height);return Math.max(n,i)},lt=function(t){return ct(t,1)},ct=function(t,e){if(!t)return null;var n=document.createElement("canvas"),o=n.getContext("2d");return n.width=t.width,n.height=t.height,o.drawImage(t,0,0),e>0&&1!=e&&i(n,e,{width:Math.round(t.width*e),height:Math.round(t.height*e)}),n},ut=function(t){return t.width&&t.height},ht=function(t,e){var n=e.getContext("2d");ut(e)?n.drawImage(t,0,0,e.width,e.height):(e.width=t.width,e.height=t.height,n.drawImage(t,0,0))},dt=function(t){h(t,0,0,t.width,t.height,3)},ft=function(t,e){return parseInt(t.width,10)>=e.width&&parseInt(t.height,10)>=e.height},pt=function(t,e,n){return{x:t.x*e,y:t.y*n,width:t.width*e,height:t.height*n}},mt=function(t,e,n){return{x:t.x/e,y:t.y/n,width:t.width/e,height:t.height/n}},gt=function(t){if(t&&""!==t.value){try{t.value=""}catch(t){}if(t.value){var e=document.createElement("form"),n=t.parentNode,i=t.nextSibling;e.appendChild(t),e.reset(),i?n.insertBefore(t,i):n.appendChild(t)}}},vt=function(t){return"object"===("undefined"==typeof value?"undefined":f(value))&&null!==value?JSON.parse(JSON.stringify(t)):t},yt=function(t){var n=arguments.length>1&&arguments[1]!==e?arguments[1]:null;if(!t)return null;var i=t.slice(0,t.size,n||t.type);return i.name=t.name,t.lastModifiedDate&&(i.lastModifiedDate=new Date(t.lastModifiedDate)),i},bt=function(t){var e=vt(t);return e.input.file=yt(t.input.file),e.output.image=lt(t.output.image),e},wt=function(t,n,i){return t&&n?t.toDataURL(n,R(n)&&"number"==typeof i?i/100:e):null},xt=function(t){if(!t)return null;var e=t.substr(0,16).match(/^.+;/);return e.length?e[0].substring(5,e[0].length-1):null},Ct=function(t){var n=arguments.length>1&&arguments[1]!==e?arguments[1]:[],i=arguments[2],o=arguments[3],r=arguments[4],s={server:vt(t.server),meta:vt(t.meta),input:{name:t.input.name,type:t.input.type,size:t.input.size,width:t.input.width,height:t.input.height,field:t.input.field}};return D("input",n)&&!r&&(s.input.image=wt(t.input.image,t.input.type)),D("output",n)&&(s.output={name:o?V(t.input.name)+"."+o:t.input.name,type:x[o]||t.input.type,width:t.output.width,height:t.output.height},s.output.image=wt(t.output.image,s.output.type,i),s.output.type=xt(s.output.image),"image/png"===s.output.type&&(s.output.name=V(s.input.name)+".png")),D("actions",n)&&(s.actions=vt(t.actions)),s},_t=function(t,n,i){var o=t.output.image,r=i?V(t.input.name)+"."+i:t.input.name,s=x[i]||t.input.type;"image/png"===s&&(r=V(t.input.name)+".png"),o.toBlob(function(t){if("msSaveBlob"in window.navigator)return void window.navigator.msSaveBlob(t,r);var e=(window.URL||window.webkitURL).createObjectURL(t),n=_("a");n.style.display="none",n.download=r,n.href=e,document.body.appendChild(n),n.click(),setTimeout(function(){document.body.removeChild(n),(window.URL||window.webkitURL).revokeObjectURL(e)},0)},s,"number"==typeof n?n/100:e)},St=function(t,e,n){var i=n.querySelector(t);i&&(i.style.display=e?"":"none")},kt=function(t){return Array.prototype.slice.call(t)},Tt=function(t){t.parentNode.removeChild(t)},Et=function(t){var e=_("div");return t.parentNode&&(t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)),e.appendChild(t),e},Lt=function(t,e,n,i){var o=(i-90)*Math.PI/180;return{x:t+n*Math.cos(o),y:e+n*Math.sin(o)}},At=function(t,e,n,i,o){var r=Lt(t,e,n,o),s=Lt(t,e,n,i),a=o-i<=180?"0":"1";return["M",r.x,r.y,"A",n,n,0,a,0,s.x,s.y].join(" ")},Pt=function(t,e,n,i){return At(t,e,n,0,360*i)},Mt=function(){var n={n:function(t,e,n,i){var o,r,s,a,l,c,u,h;return s=t.y+t.height,o=N(e.y,0,s),s-o<n.min.height&&(o=s-n.min.height),l=i?(s-o)/i:t.width,l<n.min.width&&(l=n.min.width,o=s-l*i),u=.5*(l-t.width),a=t.x-u,r=t.x+t.width+u,(a<0||r>n.width)&&(h=Math.min(t.x,n.width-(t.x+t.width)),a=t.x-h,r=t.x+t.width+h,l=r-a,c=l*i,o=s-c),{x:a,y:o,width:r-a,height:s-o}},s:function(t,e,n,i){var o,r,s,a,l,c,u,h;return o=t.y,s=N(e.y,o,n.height),s-o<n.min.height&&(s=o+n.min.height),l=i?(s-o)/i:t.width,l<n.min.width&&(l=n.min.width,s=o+l*i),u=.5*(l-t.width),a=t.x-u,r=t.x+t.width+u,(a<0||r>n.width)&&(h=Math.min(t.x,n.width-(t.x+t.width)),a=t.x-h,r=t.x+t.width+h,l=r-a,c=l*i,s=o+c),{x:a,y:o,width:r-a,height:s-o}},e:function(t,e,n,i){var o,r,s,a,l,c,u,h;return a=t.x,r=N(e.x,a,n.width),r-a<n.min.width&&(r=a+n.min.width),c=i?(r-a)*i:t.height,c<n.min.height&&(c=n.min.height,r=a+c/i),u=.5*(c-t.height),o=t.y-u,s=t.y+t.height+u,(o<0||s>n.height)&&(h=Math.min(t.y,n.height-(t.y+t.height)),o=t.y-h,s=t.y+t.height+h,c=s-o,l=c/i,r=a+l),{x:a,y:o,width:r-a,height:s-o}},w:function(t,e,n,i){var o,r,s,a,l,c,u,h;return r=t.x+t.width,a=N(e.x,0,r),r-a<n.min.width&&(a=r-n.min.width),c=i?(r-a)*i:t.height,c<n.min.height&&(c=n.min.height,a=r-c/i),u=.5*(c-t.height),o=t.y-u,s=t.y+t.height+u,(o<0||s>n.height)&&(h=Math.min(t.y,n.height-(t.y+t.height)),o=t.y-h,s=t.y+t.height+h,c=s-o,l=c/i,a=r-l),{x:a,y:o,width:r-a,height:s-o}},ne:function(t,e,n,i){var o,r,s,a,l,c,u;return a=t.x,s=t.y+t.height,r=N(e.x,a,n.width),r-a<n.min.width&&(r=a+n.min.width),c=i?(r-a)*i:N(s-e.y,n.min.height,s),c<n.min.height&&(c=n.min.height,r=a+c/i),o=t.y-(c-t.height),(o<0||s>n.height)&&(u=Math.min(t.y,n.height-(t.y+t.height)),o=t.y-u,c=s-o,l=c/i,r=a+l),{x:a,y:o,width:r-a,height:s-o}},se:function(t,e,n,i){var o,r,s,a,l,c,u;return a=t.x,o=t.y,r=N(e.x,a,n.width),r-a<n.min.width&&(r=a+n.min.width),c=i?(r-a)*i:N(e.y-t.y,n.min.height,n.height-o),c<n.min.height&&(c=n.min.height,r=a+c/i),s=t.y+t.height+(c-t.height),(o<0||s>n.height)&&(u=Math.min(t.y,n.height-(t.y+t.height)),s=t.y+t.height+u,c=s-o,l=c/i,r=a+l),{x:a,y:o,width:r-a,height:s-o}},sw:function(t,e,n,i){var o,r,s,a,l,c,u;return r=t.x+t.width,o=t.y,a=N(e.x,0,r),r-a<n.min.width&&(a=r-n.min.width),c=i?(r-a)*i:N(e.y-t.y,n.min.height,n.height-o),c<n.min.height&&(c=n.min.height,a=r-c/i),s=t.y+t.height+(c-t.height),(o<0||s>n.height)&&(u=Math.min(t.y,n.height-(t.y+t.height)),s=t.y+t.height+u,c=s-o,l=c/i,a=r-l),{x:a,y:o,width:r-a,height:s-o}},nw:function(t,e,n,i){var o,r,s,a,l,c,u;return r=t.x+t.width,s=t.y+t.height,a=N(e.x,0,r),r-a<n.min.width&&(a=r-n.min.width),c=i?(r-a)*i:N(s-e.y,n.min.height,s),c<n.min.height&&(c=n.min.height,a=r-c/i),o=t.y-(c-t.height),(o<0||s>n.height)&&(u=Math.min(t.y,n.height-(t.y+t.height)),o=t.y-u,c=s-o,l=c/i,a=r-l),{x:a,y:o,width:r-a,height:s-o}}};return function(){function i(){var n=arguments.length>0&&arguments[0]!==e?arguments[0]:document.createElement("div");t(this,i),this._element=n,this._interaction=null,this._minWidth=0,this._minHeight=0,this._ratio=null,this._rect={x:0,y:0,width:0,height:0},this._space={width:0,height:0},this._rectChanged=!1,this._init()}return d(i,[{key:"_init",value:function(){this._element.className="slim-crop-area";var t=_("div","grid");this._element.appendChild(t);for(var e in n)if(n.hasOwnProperty(e)){var i=_("button",e);this._element.appendChild(i)}var o=_("button","c");this._element.appendChild(o),S(document,w.DOWN,this)}},{key:"reset",value:function(){this._interaction=null,this._rect={x:0,y:0,width:0,height:0},this._rectChanged=!0,this._redraw(),this._element.dispatchEvent(new CustomEvent("change"))}},{key:"rescale",value:function(t){1!==t&&(this._interaction=null,this._rectChanged=!0,this._rect.x*=t,this._rect.y*=t,this._rect.width*=t,this._rect.height*=t,this._redraw(),this._element.dispatchEvent(new CustomEvent("change")))}},{key:"limit",value:function(t,e){this._space.width=t,this._space.height=e}},{key:"offset",value:function(t,e){this._space.x=t,this._space.y=e}},{key:"resize",value:function(t,e,n,i){this._interaction=null,this._rect={x:N(t,0,this._space.width-this._minWidth),y:N(e,0,this._space.height-this._minHeight),width:N(n,this._minWidth,this._space.width),height:N(i,this._minHeight,this._space.height)},this._rectChanged=!0,this._redraw(),this._element.dispatchEvent(new CustomEvent("change"))}},{key:"handleEvent",value:function(t){switch(t.type){case"touchstart":case"pointerdown":case"mousedown":this._onStartDrag(t);break;case"touchmove":case"pointermove":case"mousemove":this._onDrag(t);break;case"touchend":case"touchcancel":case"pointerup":case"mouseup":this._onStopDrag(t)}}},{key:"_onStartDrag",value:function(t){this._element.contains(t.target)&&(t.preventDefault(),S(document,w.MOVE,this),S(document,w.UP,this),this._interaction={type:t.target.className,offset:L(t)},this._interaction.offset.x-=this._rect.x,this._interaction.offset.y-=this._rect.y,this._element.setAttribute("data-dragging","true"),this._redraw())}},{key:"_onDrag",value:function(t){t.preventDefault();var e=L(t),i=this._interaction.type;"c"===i?(this._rect.x=N(e.x-this._interaction.offset.x,0,this._space.width-this._rect.width),this._rect.y=N(e.y-this._interaction.offset.y,0,this._space.height-this._rect.height)):n[i]&&(this._rect=n[i](this._rect,{x:e.x-this._space.x,y:e.y-this._space.y},{x:0,y:0,width:this._space.width,height:this._space.height,min:{width:this._minWidth,height:this._minHeight}},this._ratio)),this._rectChanged=!0,this._element.dispatchEvent(new CustomEvent("input"))}},{key:"_onStopDrag",value:function(t){t.preventDefault(),k(document,w.MOVE,this),k(document,w.UP,this),this._interaction=null,this._element.setAttribute("data-dragging","false"),this._element.dispatchEvent(new CustomEvent("change"))}},{key:"_redraw",value:function(){var t=this;if(this._rectChanged){var e="translate("+this._rect.x+"px,"+this._rect.y+"px);";this._element.style.cssText="\n\t\t\t\t\t-webkit-transform: "+e+";\n\t\t\t\t\ttransform: "+e+";\n\t\t\t\t\twidth:"+this._rect.width+"px;\n\t\t\t\t\theight:"+this._rect.height+"px;\n\t\t\t\t",this._rectChanged=!1}this._interaction&&requestAnimationFrame(function(){return t._redraw()})}},{key:"destroy",value:function(){this._interaction=!1,this._rectChanged=!1,k(document,w.DOWN,this),k(document,w.MOVE,this),k(document,w.UP,this),Tt(this._element)}},{key:"element",get:function(){return this._element}},{key:"space",get:function(){return this._space}},{key:"area",get:function(){return{x:this._rect.x/this._space.width,y:this._rect.y/this._space.height,width:this._rect.width/this._space.width,height:this._rect.height/this._space.height}}},{key:"dirty",get:function(){return 0!==this._rect.x||0!==this._rect.y||0!==this._rect.width||0!==this._rect.height}},{key:"minWidth",set:function(t){this._minWidth=t}},{key:"minHeight",set:function(t){this._minHeight=t}},{key:"ratio",set:function(t){this._ratio=t}}]),i}()}(),Nt=function(){var n=["input","change"],i=function(){function i(){var n=arguments.length>0&&arguments[0]!==e?arguments[0]:document.createElement("div"),o=arguments.length>1&&arguments[1]!==e?arguments[1]:{};t(this,i),this._element=n,this._options=y(i.options(),o),this._ratio=null,this._output=null,this._input=null,this._preview=null,this._previewBlurred=null,this._blurredPreview=!1,this._cropper=null,this._straightCrop=null,this._previewWrapper=null,this._currentWindowSize={},this._btnGroup=null,this._maskFrame=null,this._dirty=!1,this._wrapperRotation=0,this._wrapperScale=1,this._init()}return d(i,[{key:"_init",value:function(){var t=this;this._element.className="slim-image-editor",this._container=_("div","slim-container"),this._wrapper=_("div","slim-wrapper"),this._stage=_("div","slim-stage"),this._container.appendChild(this._stage),this._cropper=new Mt,n.forEach(function(e){t._cropper.element.addEventListener(e,t)}),this._stage.appendChild(this._cropper.element),this._previewWrapper=_("div","slim-image-editor-preview slim-crop-preview"),this._previewBlurred=_("canvas","slim-crop-blur"),this._previewWrapper.appendChild(this._previewBlurred),this._wrapper.appendChild(this._previewWrapper),this._previewMask=_("div","slim-crop-mask"),this._preview=_("img"),this._previewMask.appendChild(this._preview),this._cropper.element.appendChild(this._previewMask),this._btnGroup=_("div","slim-editor-btn-group"),i.Buttons.forEach(function(e){var n=P(e),i=t._options["button"+n+"Label"],o=t._options["button"+n+"Title"],r=t._options["button"+n+"ClassName"],s=_("button","slim-editor-btn slim-btn-"+e+(r?" "+r:""));s.innerHTML=i,s.title=o||i,s.type="button",s.setAttribute("data-action",e),s.addEventListener("click",t),t._btnGroup.appendChild(s)}),this._utilsGroup=_("div","slim-editor-utils-group");var e=_("button","slim-editor-utils-btn slim-btn-rotate"+(this._options.buttonRotateClassName?" "+this._options.buttonRotateClassName:""));e.setAttribute("data-action","rotate"),e.addEventListener("click",this),e.title=this._options.buttonRotateTitle,this._utilsGroup.appendChild(e),this._container.appendChild(this._wrapper),this._element.appendChild(this._container),this._element.appendChild(this._utilsGroup),this._element.appendChild(this._btnGroup)}},{key:"dirty",value:function(){this._dirty=!0}},{key:"handleEvent",value:function(t){switch(t.type){case"click":this._onClick(t);break;case"change":this._onGridChange(t);break;case"input":this._onGridInput(t);break;case"keydown":this._onKeyDown(t);break;case"resize":this._onResize(t)}}},{key:"_onKeyDown",value:function(t){switch(t.keyCode){case b.RETURN:this._confirm();break;case b.ESC:this._cancel()}}},{key:"_onClick",value:function(t){t.target.classList.contains("slim-btn-cancel")&&this._cancel(),t.target.classList.contains("slim-btn-confirm")&&this._confirm(),t.target.classList.contains("slim-btn-rotate")&&this._rotate()}},{key:"_onResize",value:function(){this._currentWindowSize={width:window.innerWidth,height:window.innerHeight},this._redraw(),this._redrawCropper(this._cropper.area),this._updateWrapperScale(),this._redrawWrapper()}},{key:"_redrawWrapper",value:function(){var t=u.createMatrix();t.scale(this._wrapperScale,this._wrapperScale),t.rotateZ(this._wrapperRotation*(Math.PI/180)),u.setElementTransform(this._previewWrapper,t)}},{key:"_onGridInput",value:function(){this._redrawCropMask()}},{key:"_onGridChange",value:function(){this._redrawCropMask()}},{key:"_updateWrapperRotation",value:function(){this._options.minSize.width>this._input.height||this._options.minSize.height>this._input.width?this._wrapperRotation+=180:this._wrapperRotation+=90}},{key:"_updateWrapperScale",value:function(){if(this._wrapperRotation%180!=0){var t=this._container.offsetWidth,e=this._container.offsetHeight,n=this._wrapper.offsetHeight,i=this._wrapper.offsetWidth,o=t/n;o*i>e&&(o=e/i),this._wrapperScale=o}else this._wrapperScale=1}},{key:"_cancel",value:function(){this._element.dispatchEvent(new CustomEvent("cancel"))}},{key:"_confirm",value:function(){var t=this._wrapperRotation%180!=0,e=this._cropper.area,n=pt(e,t?this._input.height:this._input.width,t?this._input.width:this._input.height);this._element.dispatchEvent(new CustomEvent("confirm",{detail:{rotation:this._wrapperRotation%360,crop:n}}))}},{key:"_rotate",value:function(){var t=this;this._updateWrapperRotation();var e=1===this.ratio||null===this._ratio?this._cropper.area:null;e&&E(e,90),this._updateWrapperScale(),this._hideCropper(),u(this._previewWrapper,{rotation:[0,0,this._wrapperRotation*(Math.PI/180)],scale:[this._wrapperScale,this._wrapperScale],easing:"spring",springConstant:.8,springDeceleration:.65,complete:function(){t._redrawCropper(e),t._showCropper()}})}},{key:"_showCropper",value:function(){u(this._stage,{easing:"ease",duration:250,fromOpacity:0,opacity:1})}},{key:"_hideCropper",value:function(){u(this._stage,{duration:0,fromOpacity:0,opacity:0})}},{key:"_redrawCropMask",value:function(){var t=this,e=this._wrapperRotation%360,n=this._wrapperScale,i={width:this._wrapper.offsetWidth,height:this._wrapper.offsetHeight},o=this._cropper.area,r={x:0,y:0};0===e?(r.x=-o.x,r.y=-o.y):90===e?(r.x=-(1-o.y),r.y=-o.x):180===e?(r.x=-(1-o.x),r.y=-(1-o.y)):270===e&&(r.x=-o.y,r.y=-(1-o.x)),r.x*=i.width,r.y*=i.height,cancelAnimationFrame(this._maskFrame),this._maskFrame=requestAnimationFrame(function(){var i="scale("+n+") rotate("+-e+"deg) translate("+r.x+"px, "+r.y+"px);";t._preview.style.cssText="\n\t\t\t\t\twidth: "+t._previewSize.width+"px;\n\t\t\t\t\theight: "+t._previewSize.height+"px;\n\t\t\t\t\t-webkit-transform: "+i+";\n\t\t\t\t\ttransform: "+i+";\n\t\t\t\t"})}},{key:"open",value:function(t,e,n,i,o){var r=this;if(this._input&&!this._dirty&&this._ratio===e)return void o();this._currentWindowSize={width:window.innerWidth,height:window.innerHeight},this._dirty=!1,this._wrapperRotation=i||0,this._blurredPreview=!1,this._ratio=e,this._previewSize=null,this._element.style.opacity="0",this._input=t;var s=i%180!=0,a=mt(n,s?t.height:t.width,s?t.width:t.height);this._preview.onload=function(){r._preview.onload=null,r._cropper.ratio=r.ratio,r._redraw(),r._redrawCropper(a),o(),r._element.style.opacity=""},this._preview.src=ct(this._input,Math.min(this._container.offsetWidth/this._input.width,this._container.offsetHeight/this._input.height)).toDataURL()}},{key:"_redrawCropper",value:function(t){var e=this._wrapperRotation%180!=0,n=e?this._input.height/this._input.width:this._input.width/this._input.height,i=this._wrapper.offsetWidth,o=this._wrapper.offsetHeight,r=this._container.offsetWidth,s=this._container.offsetHeight;this._updateWrapperScale();var a=this._wrapperScale*(e?o:i),l=this._wrapperScale*(e?i:o),c=e?.5*(r-a):this._wrapper.offsetLeft,u=e?.5*(s-l):this._wrapper.offsetTop;this._stage.style.cssText="\n\t\t\t\tleft:"+c+"px;\n\t\t\t\ttop:"+u+"px;\n\t\t\t\twidth:"+a+"px;\n\t\t\t\theight:"+l+"px;\n\t\t\t",this._cropper.limit(a,a/n),this._cropper.offset(c+this._element.offsetLeft,u+this._element.offsetTop),this._cropper.minWidth=this._wrapperScale*this._options.minSize.width*this.scalar,this._cropper.minHeight=this._wrapperScale*this._options.minSize.height*this.scalar;var h=null;h=t?{x:t.x*a,y:t.y*l,width:t.width*a,height:t.height*l}:et(a,l,this._ratio||l/a),this._cropper.resize(h.x,h.y,h.width,h.height)}},{key:"_redraw",value:function(){var t=this._input.height/this._input.width,e=this._container.clientWidth,n=this._container.clientHeight,i=e,o=i*t;o>n&&(o=n,i=o/t),i=Math.round(i),o=Math.round(o);var r=(e-i)/2,s=(n-o)/2;this._wrapper.style.cssText="\n\t\t\t\tleft:"+r+"px;\n\t\t\t\ttop:"+s+"px;\n\t\t\t\twidth:"+i+"px;\n\t\t\t\theight:"+o+"px;\n\t\t\t",this._previewBlurred.style.cssText="\n\t\t\t\twidth:"+i+"px;\n\t\t\t\theight:"+o+"px;\n\t\t\t",this._preview.style.cssText="\n\t\t\t\twidth:"+i+"px;\n\t\t\t\theight:"+o+"px;\n\t\t\t",this._previewSize={width:i,height:o},this._blurredPreview||(this._previewBlurred.width=300,this._previewBlurred.height=this._previewBlurred.width*t,ht(this._input,this._previewBlurred),dt(this._previewBlurred),this._blurredPreview=!0)}},{key:"show",value:function(){var t=arguments.length>0&&arguments[0]!==e?arguments[0]:function(){};this._currentWindowSize.width===window.innerWidth&&this._currentWindowSize.height===window.innerHeight||(this._redraw(),this._redrawCropper(this._cropper.area)),document.addEventListener("keydown",this),window.addEventListener("resize",this);var n=this._wrapperRotation*(Math.PI/180);u(this._previewWrapper,{fromRotation:[0,0,n],rotation:[0,0,n],fromPosition:[0,0,0],position:[0,0,0],fromOpacity:0,opacity:1,fromScale:[this._wrapperScale-.02,this._wrapperScale-.02],scale:[this._wrapperScale,this._wrapperScale],easing:"spring",springConstant:.3,springDeceleration:.85,delay:450,complete:function(){}}),this._cropper.dirty?u(this._stage,{fromPosition:[0,0,0],position:[0,0,0],fromOpacity:0,opacity:1,duration:250,delay:850,complete:function(){I(this),t()}}):u(this._stage,{fromPosition:[0,0,0],position:[0,0,0],fromOpacity:0,opacity:1,duration:250,delay:1e3,complete:function(){I(this)}}),u(this._btnGroup.childNodes,{fromScale:[.9,.9],scale:[1,1],fromOpacity:0,opacity:1,delay:function(t){return 1e3+100*t},easing:"spring",springConstant:.3,springDeceleration:.85,complete:function(){I(this)}}),u(this._utilsGroup.childNodes,{fromScale:[.9,.9],scale:[1,1],fromOpacity:0,opacity:1,easing:"spring",springConstant:.3,springDeceleration:.85,delay:1250,complete:function(){I(this)}})}},{key:"hide",value:function(){var t=arguments.length>0&&arguments[0]!==e?arguments[0]:function(){};document.removeEventListener("keydown",this),window.removeEventListener("resize",this),u(this._utilsGroup.childNodes,{fromOpacity:1,opacity:0,duration:250}),u(this._btnGroup.childNodes,{fromOpacity:1,opacity:0,delay:200,duration:350}),u([this._stage,this._previewWrapper],{fromPosition:[0,0,0],position:[0,-250,0],fromOpacity:1,opacity:0,easing:"spring",springConstant:.3,springDeceleration:.75,delay:250,allDone:function(){t()}})}},{key:"destroy",value:function(){var t=this;kt(this._btnGroup.children).forEach(function(e){e.removeEventListener("click",t)}),n.forEach(function(e){t._cropper.element.removeEventListener(e,t)}),this._cropper.destroy(),this._element.parentNode&&Tt(this._element)}},{key:"showRotateButton",set:function(t){t?this._element.classList.remove("slim-rotation-disabled"):this._element.classList.add("slim-rotation-disabled")}},{key:"element",get:function(){return this._element}},{key:"ratio",get:function(){return"input"===this._ratio?this._input.height/this._input.width:this._ratio}},{key:"offset",get:function(){return this._element.getBoundingClientRect()}},{key:"original",get:function(){return this._input}},{key:"scalar",get:function(){return this._previewSize.width/this._input.width}}],[{key:"options",value:function(){return{buttonCancelClassName:null,buttonConfirmClassName:null,buttonCancelLabel:"Cancel",buttonConfirmLabel:"Confirm",buttonCancelTitle:null,buttonConfirmTitle:null,buttonRotateTitle:"Rotate",buttonRotateClassName:null,minSize:{width:0,height:0}}}}]),i}();return i.Buttons=["cancel","confirm"],i}(),Dt=function(){var n=["dragover","dragleave","drop"];return function(){function i(){var n=arguments.length>0&&arguments[0]!==e?arguments[0]:document.createElement("div");t(this,i),this._element=n,this._accept=[],this._allowURLs=!1,this._dragPath=null,this._init()}return d(i,[{key:"isValidDataTransfer",value:function(t){return t.files&&t.files.length?this.areValidDataTransferFiles(t.files):t.items&&t.items.length?this.areValidDataTransferItems(t.items):null}},{key:"areValidDataTransferFiles",value:function(t){return!this._accept.length||!t||-1!==this._accept.indexOf(t[0].type)}},{key:"areValidDataTransferItems",value:function(t){return!this._accept.length||!t||(this._allowURLs&&"string"===t[0].kind?null:t[0].type&&0===t[0].type.indexOf("application")?null:-1!==this._accept.indexOf(t[0].type))}},{key:"reset",value:function(){this._element.files=null}},{key:"_init",value:function(){var t=this;this._element.className="slim-file-hopper",n.forEach(function(e){t._element.addEventListener(e,t)})}},{key:"handleEvent",value:function(t){switch(t.type){case"dragover":this._onDragOver(t);break;case"dragleave":this._onDragLeave(t);break;case"drop":this._onDrop(t)}}},{key:"_onDrop",value:function(t){t.preventDefault();var e=null;if(this._allowURLs){var n=void 0,i=void 0;try{n=t.dataTransfer.getData("url"),i=t.dataTransfer.getData("text/html")}catch(t){}if(i&&i.length){var o=i.match(/src\s*=\s*"(.+?)"/);o&&(e=o[1])}else n&&n.length&&(e=n)}if(e)this._element.files=[{remote:e}];else{if(!this.isValidDataTransfer(t.dataTransfer))return this._element.dispatchEvent(new CustomEvent("file-invalid-drop")),void(this._dragPath=null);this._element.files=t.dataTransfer.files}this._element.dispatchEvent(new CustomEvent("file-drop",{detail:v(t)})),this._element.dispatchEvent(new CustomEvent("change")),this._dragPath=null}},{key:"_onDragOver",value:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy";var e=this.isValidDataTransfer(t.dataTransfer);if(null!==e&&!e)return t.dataTransfer.dropEffect="none",void this._element.dispatchEvent(new CustomEvent("file-invalid"));this._dragPath||(this._dragPath=[]),this._dragPath.push(v(t)),this._element.dispatchEvent(new CustomEvent("file-over",{detail:{x:M(this._dragPath).x,y:M(this._dragPath).y}}))}},{key:"_onDragLeave",value:function(t){this._element.dispatchEvent(new CustomEvent("file-out",{detail:v(t)})),this._dragPath=null}},{key:"destroy",value:function(){var t=this;n.forEach(function(e){t._element.removeEventListener(e,t)}),Tt(this._element),this._element=null,this._dragPath=null,this._accept=null}},{key:"element",get:function(){return this._element}},{key:"dragPath",get:function(){return this._dragPath}},{key:"enabled",get:function(){return""===this._element.style.display},set:function(t){this._element.style.display=t?"":"none"}},{key:"allowURLs",set:function(t){this._allowURLs=t}},{key:"accept",set:function(t){this._accept=t},get:function(){return this._accept}}]),i}()}(),Ot=function(){return function(){function n(){t(this,n),this._element=null,this._inner=null,this._init()}return d(n,[{key:"_init",value:function(){this._element=_("div","slim-popover"),this._element.setAttribute("data-state","off"),document.body.appendChild(this._element)}},{key:"show",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==e?arguments[0]:function(){};this._element.setAttribute("data-state","on"),u(this._element,{fromOpacity:0,opacity:1,duration:350,complete:function(){I(t._element),n()}})}},{key:"hide",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==e?arguments[0]:function(){};u(this._element,{fromOpacity:1,opacity:0,duration:500,complete:function(){I(t._element),t._element.setAttribute("data-state","off"),n()}})}},{key:"destroy",value:function(){this._element.parentNode&&(this._element.parentNode.removeChild(this._element),this._element=null,this._inner=null)}},{key:"inner",set:function(t){this._inner=t,this._element.firstChild&&this._element.removeChild(this._element.firstChild),this._element.appendChild(this._inner)}}]),n}()}(),It=function(t,e){return t.split(e).map(function(t){return parseInt(t,10)})},Ht=function(t){return"DIV"===t.nodeName||"SPAN"===t.nodeName},Ft={AUTO:"auto",INITIAL:"initial",MANUAL:"manual"},Rt=["x","y","width","height"],Bt=["file-invalid-drop","file-invalid","file-drop","file-over","file-out","click"],Wt=["cancel","confirm"],$t=["remove","edit","download","upload"],zt=null,jt=0,qt='\n<div class="slim-loader">\n\t<svg>\n\t\t<path class="slim-loader-background" fill="none" stroke-width="3" />\n\t\t<path class="slim-loader-foreground" fill="none" stroke-width="3" />\n\t</svg>\n</div>\n',Ut=function(t){var e=t.split(",");return{width:parseInt(e[0],10),height:parseInt(e[1],10)}},Vt=function(){function n(i){var o=arguments.length>1&&arguments[1]!==e?arguments[1]:{};t(this,n),zt||(zt=new Ot),this._uid=jt++,this._options=y(n.options(),o),this._options.forceSize&&("string"==typeof this._options.forceSize&&(this._options.forceSize=Ut(this._options.forceSize)),this._options.ratio=this._options.forceSize.width+":"+this._options.forceSize.height,this._options.size=vt(this._options.forceSize)),"string"==typeof this._options.size&&(this._options.size=Ut(this._options.size)),"string"==typeof this._options.minSize&&(this._options.minSize=Ut(this._options.minSize)),this._originalElement=i,this._originalElementInner=i.innerHTML,this._originalElementAttributes=g(i),Ht(i)?this._element=i:(this._element=Et(i),this._element.className=i.className,i.className="",this._element.setAttribute("data-ratio",this._options.ratio)),this._element.classList.add("slim"),this._element.setAttribute("data-state","init"),this._state=[],this._timers=[],this._input=null,this._inputReference=null,this._output=null,this._ratio=null,this._isRequired=!1,this._imageHopper=null,this._imageEditor=null,this._progressEnabled=!0,this._data={},this._resetData(),this._drip=null,this._hasInitialImage=!1,this._initialCrop=this._options.crop,this._initialRotation=this._options.rotation&&this._options.rotation%90==0?this._options.rotation:null,this._isBeingDestroyed=!1,n.supported?this._init():this._fallback()}return d(n,[{key:"setRotation",value:function(t,e){if("number"==typeof t||t%90==0){this._data.actions.rotation=t;var n=this._data.actions.rotation%180!=0;if(this._data.input.image){var i=n?this._data.input.image.height:this._data.input.image.width,o=n?this._data.input.image.width:this._data.input.image.height;this._data.actions.crop=et(i,o,this._ratio),this._data.actions.crop.type=Ft.AUTO}this._data.input.image&&e&&this._manualTransform(e)}}},{key:"setSize",value:function(t,e){"string"==typeof t&&(t=Ut(t)),t&&t.width&&t.height&&(this._options.size=vt(t),this._data.actions.size=vt(t),this._data.input.image&&e&&this._manualTransform(e))}},{key:"setRatio",value:function(t,e){var n=this;if(t&&"string"==typeof t&&(this._options.ratio=t,this._isFixedRatio())){var i=It(this._options.ratio,":");this._ratio=i[1]/i[0],this._data.input.image&&e?this._cropAuto(function(t){n._scaleDropArea(n._ratio),e&&e(t)}):(this._data.input.image&&(this._data.actions.crop=et(this._data.input.image.width,this._data.input.image.height,this._ratio),this._data.actions.crop.type=Ft.AUTO),this._scaleDropArea(this._ratio),e&&e(null))}}},{key:"isAttachedTo",value:function(t){return this._element===t||this._originalElement===t}},{key:"isDetached",value:function(){return null===this._element.parentNode}},{key:"load",value:function(t){var n=arguments.length>1&&arguments[1]!==e?arguments[1]:{},i=arguments[2];"function"==typeof n?i=n:(this._options.crop=n.crop,this._options.rotation=n.rotation,this._initialRotation=n.rotation&&n.rotation%90==0?n.rotation:null,this._initialCrop=this._options.crop),this._load(t,i)}},{key:"upload",value:function(t){this._doUpload(t)}},{key:"download",value:function(){this._doDownload()}},{key:"remove",value:function(){return this._doRemove()}},{key:"destroy",value:function(){this._doDestroy()}},{key:"edit",value:function(){this._doEdit()}},{key:"crop",value:function(t,e){this._crop(t.x,t.y,t.width,t.height,e)}},{key:"containsImage",value:function(){return null!==this._data.input.name}},{key:"_canInstantEdit",value:function(){return this._options.instantEdit&&!this._isInitialising}},{key:"_getFileInput",value:function(){return this._element.querySelector("input[type=file]")}},{key:"_getInitialImage",value:function(){return this._element.querySelector("img")}},{key:"_getInputElement",value:function(){return this._getFileInput()||this._getInitialImage()}},{key:"_getRatioSpacerElement",value:function(){return this._element.children[0]}},{key:"_isImageOnly",value:function(){return"INPUT"!==this._input.nodeName}},{key:"_isFixedRatio",value:function(){return-1!==this._options.ratio.indexOf(":")}},{key:"_isAutoCrop",value:function(){return this._data.actions.crop.type===Ft.AUTO}},{key:"_toggleButton",value:function(t,e){St('.slim-btn[data-action="'+t+'"]',e,this._element)}},{key:"_clearState",value:function(){this._state=[],this._updateState()}},{key:"_removeState",value:function(t){this._state=this._state.filter(function(e){return e!==t}),this._updateState()}},{key:"_addState",value:function(t){D(t,this._state)||(this._state.push(t),this._updateState())}},{key:"_updateState",value:function(){this._element&&this._element.setAttribute("data-state",this._state.join(","))}},{key:"_resetData",value:function(){this._data={server:null,meta:vt(this._options.meta),input:{field:this._inputReference,name:null,type:null,width:0,height:0,file:null},output:{image:null,width:0,height:0},actions:{rotation:null,crop:null,size:null}},this._output&&(this._output.value=""),gt(this._getFileInput())}},{key:"_init",value:function(){var t=this;this._isInitialising=!0,this._addState("empty"),D("input",this._options.post)&&(this._inputReference="slim_input_"+this._uid),this._input=this._getInputElement(),this._input||(this._input=_("input"),this._input.type="file",this._element.appendChild(this._input)),this._isRequired=!0===this._input.required,this._output=this._element.querySelector("input[type=hidden]"),this._output||(this._output=_("input"),this._output.type="hidden",this._output.name=this._input.name||this._options.defaultInputName,this._element.appendChild(this._output)),this._input.removeAttribute("name");var e=_("div","slim-area"),n=this._getInitialImage(),i=(n||{}).src;i?this._hasInitialImage=!0:(this._initialCrop=null,this._initialRotation=null);var o='\n\t\t<div class="slim-result">\n\t\t\t<img class="in" style="opacity:0" '+(i?'src="'+i+'"':"")+'><img><img style="opacity:0">\n\t\t</div>';if(this._isImageOnly())e.innerHTML="\n\t\t\t\t"+qt+'\n\t\t\t\t\n<div class="slim-upload-status"></div>\n\n\t\t\t\t'+o+'\n\t\t\t\t<div class="slim-status"><div class="slim-label-loading">'+(this._options.labelLoading||"")+"</div></div>\n\t\t\t";else{D("input",this._options.post)&&(this._data.input.field=this._inputReference,this._options.service||(this._input.name=this._inputReference));var r=void 0;this._input.hasAttribute("accept")&&"image/*"!==this._input.getAttribute("accept")?r=this._input.accept.split(",").map(function(t){return t.trim()}).filter(function(t){return t.length>0}):(r=F(),this._input.setAttribute("accept",r.join(","))),this._imageHopper=new Dt,this._imageHopper.accept=r,this._imageHopper.allowURLs="string"==typeof this._options.fetcher,this._element.appendChild(this._imageHopper.element),Bt.forEach(function(e){t._imageHopper.element.addEventListener(e,t)}),e.innerHTML="\n\t\t\t\t"+qt+'\n\t\t\t\t\n<div class="slim-upload-status"></div>\n\n\t\t\t\t<div class="slim-drip"><span><span></span></span></div>\n\t\t\t\t<div class="slim-status"><div class="slim-label">'+(this._options.label||"")+'</div><div class="slim-label-loading">'+(this._options.labelLoading||"")+"</div></div>\n\t\t\t\t"+o+"\n\t\t\t",this._input.addEventListener("change",this)}if(this._element.appendChild(e),this._btnGroup=_("div","slim-btn-group"),this._btnGroup.style.display="none",this._element.appendChild(this._btnGroup),$t.filter(function(e){return t._isButtonAllowed(e)}).forEach(function(e){var n=P(e),i=t._options["button"+n+"Label"],o=t._options["button"+n+"Title"]||i,r=t._options["button"+n+"ClassName"],s=_("button","slim-btn slim-btn-"+e+(r?" "+r:""));s.innerHTML=i,s.title=o,s.type="button",s.addEventListener("click",t),s.setAttribute("data-action",e),t._btnGroup.appendChild(s)}),this._isFixedRatio()){var s=It(this._options.ratio,":");this._ratio=s[1]/s[0],this._scaleDropArea(this._ratio)}this._updateProgress(.5),i?this._load(i,function(){t._onInit()}):this._onInit()}},{key:"_onInit",value:function(){var t=this;this._isInitialising=!1;var e=function(){var e=setTimeout(function(){t._options.didInit.apply(t,[t.data])},0);t._timers.push(e)};this._options.saveInitialImage&&this.containsImage()?this._options.service||this._save(function(){e()},!1):(this._options.service&&this.containsImage()&&this._toggleButton("upload",!1),e())}},{key:"_updateProgress",value:function(t){if(t=Math.min(.99999,t),this._element&&this._progressEnabled){var e=this._element.querySelector(".slim-loader");if(e){var n=e.offsetWidth,i=e.querySelectorAll("path"),o=parseInt(i[0].getAttribute("stroke-width"),10);i[0].setAttribute("d",Pt(.5*n,.5*n,.5*n-o,.9999)),i[1].setAttribute("d",Pt(.5*n,.5*n,.5*n-o,t))}}}},{key:"_startProgress",value:function(t){var e=this;if(this._element){this._progressEnabled=!1;var n=this._element.querySelector(".slim-loader");if(n){var i=n.children[0];this._stopProgressLoop(function(){n.removeAttribute("style"),i.removeAttribute("style"),e._progressEnabled=!0,e._updateProgress(0),e._progressEnabled=!1,u(i,{fromOpacity:0,opacity:1,duration:250,complete:function(){e._progressEnabled=!0,t&&t()}})})}}}},{key:"_stopProgress",value:function(){var t=this;if(this._element){var e=this._element.querySelector(".slim-loader");if(e){var n=e.children[0];this._updateProgress(1),u(n,{fromOpacity:1,opacity:0,duration:250,complete:function(){e.removeAttribute("style"),n.removeAttribute("style"),t._updateProgress(.5),t._progressEnabled=!1}})}}}},{key:"_startProgressLoop",value:function(){if(this._element){var t=this._element.querySelector(".slim-loader");if(t){var e=t.children[0];t.removeAttribute("style"),e.removeAttribute("style"),this._updateProgress(.5);u(t,"stop"),u(t,{rotation:[0,0,-2*Math.PI*1e3],easing:"linear",duration:1e6}),u(e,{fromOpacity:0,opacity:1,duration:250})}}}},{key:"_stopProgressLoop",value:function(t){if(this._element){var e=this._element.querySelector(".slim-loader");if(e){var n=e.children[0];u(n,{fromOpacity:parseFloat(n.style.opacity),opacity:0,duration:250,complete:function(){u(e,"stop"),e.removeAttribute("style"),n.removeAttribute("style"),t&&t()}})}}}},{key:"_isButtonAllowed",value:function(t){return"edit"===t?this._options.edit:"download"===t?this._options.download:"upload"===t?!!this._options.service&&!this._options.push:"remove"!==t||!this._isImageOnly()}},{key:"_fallback",value:function(){var t=_("div","slim-area");t.innerHTML='\n\t\t\t<div class="slim-status"><div class="slim-label">'+(this._options.label||"")+"</div></div>\n\t\t",this._element.appendChild(t),this._throwError(this._options.statusNoSupport)}},{key:"handleEvent",value:function(t){switch(t.type){case"click":this._onClick(t);break;case"change":this._onChange(t);break;case"cancel":this._onCancel(t);break;case"confirm":this._onConfirm(t);break;case"file-over":this._onFileOver(t);break;case"file-out":this._onFileOut(t);break;case"file-drop":this._onDropFile(t);break;case"file-invalid":this._onInvalidFile(t);break;case"file-invalid-drop":this._onInvalidFileDrop(t)}}},{key:"_getIntro",value:function(){return this._element.querySelector(".slim-result .in")}},{key:"_getOutro",value:function(){return this._element.querySelector(".slim-result .out")}},{key:"_getInOut",value:function(){return this._element.querySelectorAll(".slim-result img")}},{key:"_getDrip",value:function(){return this._drip||(this._drip=this._element.querySelector(".slim-drip > span")),this._drip}},{key:"_throwError",value:function(t){this._addState("error"),this._element.querySelector(".slim-label").style.display="none";var e=this._element.querySelector(".slim-error");e||(e=_("div","slim-error"),this._element.querySelector(".slim-status").appendChild(e)),e.innerHTML=t}},{key:"_removeError",value:function(){this._removeState("error"),this._element.querySelector(".slim-label").style.display="";var t=this._element.querySelector(".slim-error");t&&t.parentNode.removeChild(t)}},{key:"_openFileDialog",value:function(){this._removeError(),this._input.click()}},{key:"_onClick",value:function(t){var e=this,n=t.target.classList,i=t.target;if(n.contains("slim-file-hopper"))return void this._openFileDialog();switch(i.getAttribute("data-action")){case"remove":this._options.willRemove.apply(this,[this.data,function(){e._doRemove()}]);break;case"edit":this._doEdit();break;case"download":this._doDownload();break;case"upload":this._doUpload()}}},{key:"_onInvalidFileDrop",value:function(){this._onInvalidFile(),this._removeState("file-over");var t=this._getDrip();u(t.firstChild,{fromScale:[.5,.5],scale:[0,0],fromOpacity:.5,opacity:0,duration:150,complete:function(){I(t.firstChild)}})}},{key:"_onInvalidFile",value:function(){var t=this._imageHopper.accept.map(B),e=this._options.statusFileType.replace("$0",t.join(", "));this._throwError(e)}},{key:"_onImageTooSmall",value:function(){var t=this._options.statusImageTooSmall.replace("$0",this._options.minSize.width+" × "+this._options.minSize.height);this._throwError(t)}},{key:"_onOverWeightFile",value:function(){var t=this._options.statusFileSize.replace("$0",this._options.maxFileSize);this._throwError(t)}},{key:"_onRemoteURLProblem",value:function(t){this._throwError(t)}},{key:"_onFileOver",value:function(t){this._addState("file-over"),this._removeError();var e=this._getDrip(),n=u.createMatrix();n.translate(t.detail.x,t.detail.y,0),u.setElementTransform(e,n),1==this._imageHopper.dragPath.length&&(e.style.opacity=1,u(e.firstChild,{fromOpacity:0,opacity:.5,fromScale:[0,0],scale:[.5,.5],duration:150}))}},{key:"_onFileOut",value:function(t){this._removeState("file-over"),this._removeState("file-invalid"),this._removeError();var e=this._getDrip(),n=u.createMatrix();n.translate(t.detail.x,t.detail.y,0),u.setElementTransform(e,n),u(e.firstChild,{fromScale:[.5,.5],scale:[0,0],fromOpacity:.5,opacity:0,duration:150,complete:function(){I(e.firstChild)}})}},{key:"_onDropFile",value:function(t){var e=this;this._removeState("file-over");var n=this._getDrip(),i=u.createMatrix();i.translate(t.detail.x,t.detail.y,0),u.setElementTransform(n,i);var o=this._imageHopper.dragPath.length,r=this._imageHopper.dragPath[o-Math.min(10,o)],s=t.detail.x-r.x,a=t.detail.y-r.y;u(n,{fromPosition:[t.detail.x,t.detail.y,0],position:[t.detail.x+s,t.detail.y+a,0],duration:200}),u(n.firstChild,{fromScale:[.5,.5],scale:[2,2],fromOpacity:1,opacity:0,duration:200,complete:function(){I(n.firstChild),e._load(t.target.files[0])}})}},{key:"_onChange",value:function(t){t.target.files.length&&this._load(t.target.files[0])}},{key:"_load",value:function(t,e){var n=this;if(!this._isBeingDestroyed){if(this.containsImage())return clearTimeout(this._replaceTimeout),void this._doRemove(function(){n._replaceTimeout=setTimeout(function(){n._load(t,e)},100)});this._removeState("empty"),this._addState("busy"),this._startProgressLoop(),this._imageHopper&&(this._imageHopper.enabled=!1),clearTimeout(this._loadTimeout);var i=function(){n._imageHopper&&(n._imageHopper.enabled=!0),n._removeState("loading"),n._removeState("busy"),n._addState("empty"),n._stopProgressLoop()};if("string"==typeof t)return void(X(t)?this._load(Q(t),e):(!function(){clearTimeout(n._loadTimeout),n._loadTimeout=setTimeout(function(){n._isBeingDestroyed||(n._addState("loading"),u(n._element.querySelector(".slim-label-loading"),{fromOpacity:0,opacity:1,duration:250}))},500)}(),G(t,function(t){n._load(t,e)})));if(void 0!==t.remote&&this._options.fetcher)return void Y(this._options.fetcher,t.remote,function(t){i(),n._onRemoteURLProblem("<p>"+t+"</p>"),e&&e.apply(n,["remote-url-problem"])},function(t){n._load(t,e)});var o=t;if(this._imageHopper&&-1===this._imageHopper.accept.indexOf(o.type))return i(),this._onInvalidFile(),void(e&&e.apply(this,["file-invalid"]));if(o.size&&this._options.maxFileSize&&H(o.size)>this._options.maxFileSize)return i(),this._onOverWeightFile(),void(e&&e.apply(this,["file-too-big"]));this._imageEditor&&this._imageEditor.dirty(),this._data.input.name=q(o),this._data.input.type=U(o),this._data.input.size=o.size,this._data.input.file=o,tt(o,this._options.internalCanvasSize,function(t,i){var r=function(){n._imageHopper&&(n._imageHopper.enabled=!0),n._removeState("loading"),n._removeState("busy"),n._addState("empty"),n._stopProgressLoop(),n._resetData()};if(!t)return r(),void(e&&e.apply(n,["file-not-found"]));if(!ft(t,n._options.minSize))return r(),n._onImageTooSmall(),void(e&&e.apply(n,["image-too-small"]));var s=n._options.didLoad.apply(n,[o,t,i]);if(!0!==s)return r(),!1!==s&&n._throwError(s),void(e&&e.apply(n,[s]));n._removeState("loading");var a=function(t){n._imageHopper&&n._options.dropReplace&&(n._imageHopper.enabled=!0);var e=n._getIntro(),i={fromScale:[1.25,1.25],scale:[1,1],fromOpacity:0,opacity:1,complete:function(){I(e),e.style.opacity=1,t()}};n.isDetached()?i.duration=1:(i.easing="spring",i.springConstant=.3,i.springDeceleration=.7),n._canInstantEdit()&&(i.delay=500,i.duration=1,n._doEdit()),u(e,i)};n._loadCanvas(t,function(t){n._addState("preview"),a(function(){n._canInstantEdit()||t||n._showButtons(),t||(n._stopProgressLoop(),n._removeState("busy")),e&&e.apply(n,[null,n.data])})},function(){n._canInstantEdit()||n._showButtons(),n._removeState("busy")})})}}},{key:"_loadCanvas",value:function(t,e,n){var i=this;if(!this._isBeingDestroyed){this._data.input.image=t,this._data.input.width=t.width,this._data.input.height=t.height,this._initialRotation&&(this._data.actions.rotation=this._initialRotation,this._initialRotation=null);var o=this._data.actions.rotation%180!=0;this._isFixedRatio()||(this._initialCrop?this._ratio=this._initialCrop.height/this._initialCrop.width:this._ratio=o?t.width/t.height:t.height/t.width,this._scaleDropArea(this._ratio)),this._initialCrop?(this._data.actions.crop=vt(this._initialCrop),this._data.actions.crop.type=Ft.INITIAL,this._initialCrop=null):(this._data.actions.crop=et(o?t.height:t.width,o?t.width:t.height,this._ratio),this._data.actions.crop.type=Ft.AUTO),this._options.size&&(this._data.actions.size={width:this._options.size.width,height:this._options.size.height}),this._applyTransforms(t,function(t){var o=i._getIntro(),r=o.offsetWidth/t.width,s=!1;i._options.service&&i._options.push&&(i._hasInitialImage||i._canInstantEdit()||(s=!0,i._stopProgressLoop(function(){i._startProgress(function(){i._updateProgress(.1)})}))),i._canInstantEdit()||i._save(function(){i._isBeingDestroyed||s&&(i._stopProgress(),n())},s),o.src="",o.src=ct(t,r).toDataURL(),o.onload=function(){o.onload=null,i._isBeingDestroyed||e&&e(s)}})}}},{key:"_applyTransforms",value:function(t,e){var n=this,i=vt(this._data.actions);i.filters={sharpen:this._options.filterSharpen/100},nt(t,i,function(t){var i=t;if(n._options.forceSize||n._options.size&&1==at(n._options.size,t)){i=_("canvas"),i.width=n._options.size.width,i.height=n._options.size.height;i.getContext("2d").drawImage(t,0,0,n._options.size.width,n._options.size.height)}n._data.output.width=i.width,n._data.output.height=i.height,n._data.output.image=i,n._onTransformCanvas(function(t){n._data=t,n._options.didTransform.apply(n,[n.data]),e(n._data.output.image)})})}},{key:"_onTransformCanvas",value:function(t){this._options.willTransform.apply(this,[this.data,t])}},{key:"_appendEditor",value:function(){var t=this;this._imageEditor||(this._imageEditor=new Nt(_("div"),{minSize:this._options.minSize,buttonConfirmClassName:this._options.buttonConfirmClassName,buttonCancelClassName:this._options.buttonCancelClassName,buttonRotateClassName:this._options.buttonRotateClassName,buttonConfirmLabel:this._options.buttonConfirmLabel,buttonCancelLabel:this._options.buttonCancelLabel,buttonRotateLabel:this._options.buttonRotateLabel,buttonConfirmTitle:this._options.buttonConfirmTitle,buttonCancelTitle:this._options.buttonCancelTitle,buttonRotateTitle:this._options.buttonRotateTitle}),Wt.forEach(function(e){t._imageEditor.element.addEventListener(e,t)}))}},{key:"_scaleDropArea",value:function(t){var e=this._getRatioSpacerElement();e&&this._element&&(e.style.marginBottom=100*t+"%",this._element.setAttribute("data-ratio","1:"+t))}},{key:"_onCancel",value:function(t){this._removeState("editor"),this._options.didCancel.apply(this),this._showButtons(),this._hideEditor(),this._options.instantEdit&&!this._hasInitialImage&&this._isAutoCrop()&&this._doRemove()}},{key:"_onConfirm",value:function(t){var e=this,n=this._options.service&&this._options.push;n?this._startProgress(function(){e._updateProgress(.1)}):this._startProgressLoop(),this._removeState("editor"),this._addState("busy"),this._output.value="",this._data.actions.rotation=t.detail.rotation,this._data.actions.crop=t.detail.crop,this._data.actions.crop.type=Ft.MANUAL,this._applyTransforms(this._data.input.image,function(t){e._options.didConfirm.apply(e,[e.data]);var i=e._getInOut(),o="out"===i[0].className?i[0]:i[1],r=o===i[0]?i[1]:i[0];o.className="in",o.style.opacity="0",o.style.zIndex="2",r.className="out",r.style.zIndex="1",o.src="",o.src=ct(t,o.offsetWidth/t.width).toDataURL(),o.onload=function(){o.onload=null,"free"===e._options.ratio&&(e._ratio=o.naturalHeight/o.naturalWidth,e._scaleDropArea(e._ratio)),e._hideEditor();var t=setTimeout(function(){e._showPreview(o,function(){e._save(function(t,i,o){e._toggleButton("upload",!0),n?e._stopProgress():e._stopProgressLoop(),e._removeState("busy"),e._showButtons()},n)})},250);e._timers.push(t)}})}},{key:"_cropAuto",value:function(){var t=arguments.length>0&&arguments[0]!==e?arguments[0]:function(t){},n=this._data.actions.rotation%180!=0,i=et(n?this._data.input.image.width:this._data.input.image.height,n?this._data.input.image.height:this._data.input.image.width,this._ratio);this._crop(i.x,i.y,i.width,i.height,t,Ft.AUTO)}},{key:"_crop",value:function(t,n,i,o){var r=arguments.length>4&&arguments[4]!==e?arguments[4]:function(t){},s=arguments.length>5&&arguments[5]!==e?arguments[5]:Ft.MANUAL;this._output.value="",this._data.actions.crop={x:t,y:n,width:i,height:o},this._data.actions.crop.type=s,this._manualTransform(r)}},{key:"_manualTransform",value:function(t){var e=this;this._startProgressLoop(),this._addState("busy"),this._applyTransforms(this._data.input.image,function(n){var i=e._getInOut(),o="out"===i[0].className?i[0]:i[1],r=o===i[0]?i[1]:i[0];o.className="in",o.style.opacity="1",o.style.zIndex="2",r.className="out",r.style.zIndex="0",o.src="",o.src=ct(n,o.offsetWidth/n.width).toDataURL(),o.onload=function(){o.onload=null,"free"===e._options.ratio&&(e._ratio=o.naturalHeight/o.naturalWidth,e._scaleDropArea(e._ratio));var n=e._options.service&&e._options.push,i=function(){e._save(function(i,o,r){n||e._stopProgressLoop(),e._removeState("busy"),t.apply(e,[e.data])},n)};n?e._startProgress(i):i()}})}},{key:"_save",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==e?arguments[0]:function(){},i=!(arguments.length>1&&arguments[1]!==e)||arguments[1];if(!this._isBeingDestroyed){var o=this.dataBase64;this._options.service||this._isInitialising&&!this._isImageOnly()||this._options.willSave.apply(this,[o,function(e){t._store(e),t._options.didSave.apply(t,[e])}]),this._isBeingDestroyed||(this._options.service&&i&&this._options.willSave.apply(this,[o,function(e){t._addState("upload"),t._imageHopper&&t._options.dropReplace&&(t._imageHopper.enabled=!1),t._upload(e,function(i,o){t._imageHopper&&t._options.dropReplace&&(t._imageHopper.enabled=!0),i||t._storeServerResponse(o),t._options.didUpload.apply(t,[i,e,o]),t._removeState("upload"),n(i,e,o)})}]),this._options.service&&i||n())}}},{key:"_storeServerResponse",value:function(t){this._isRequired&&(this._input.required=!1),this._data.server=t,this._output.value="object"===(void 0===t?"undefined":f(t))?JSON.stringify(this._data.server):t}},{key:"_store",value:function(t){this._isRequired&&(this._input.required=!1),this._output.value=JSON.stringify(t)}},{key:"_upload",value:function(t,e){var n=this,i=new FormData;if(null!==this._data.output.image&&!1===this._options.uploadBase64){var o=Q(t.output.image,t.output.name),r="slim_output_"+this._uid;t.output.image=null,t.output.field=r,i.append(r,o,t.output.name)}i.append(this._output.name,JSON.stringify(t)),D("input",this._options.post)&&i.append(this._inputReference,this._data.input.file,this._data.input.file.name);var s=this._element.querySelector(".slim-upload-status"),a=this._options.willRequest;O(this._options.service,i,a,function(t,e){n._updateProgress(Math.max(.1,t/e))},function(t){var i=setTimeout(function(){if(!n._isBeingDestroyed){s.innerHTML=n._options.statusUploadSuccess,s.setAttribute("data-state","success"),s.style.opacity=1;var t=setTimeout(function(){s.style.opacity=0},2e3);n._timers.push(t)}},250);n._timers.push(i),e(null,t)},function(t){var i="";i="file-too-big"===t?n._options.statusContentLength:n._options.didReceiveServerError.apply(n,[t,n._options.statusUnknownResponse]);var o=setTimeout(function(){s.innerHTML=i,s.setAttribute("data-state","error"),s.style.opacity=1},250);n._timers.push(o),e(t)})}},{key:"_showEditor",value:function(){zt.show(),this._imageEditor.show()}},{key:"_hideEditor",value:function(){this._imageEditor.hide();var t=setTimeout(function(){zt.hide()},250);this._timers.push(t)}},{key:"_showPreview",value:function(t,e){u(t,{fromPosition:[0,50,0],position:[0,0,0],fromScale:[1.5,1.5],scale:[1,1],fromOpacity:0,opacity:1,easing:"spring",springConstant:.3,springDeceleration:.7,complete:function(){I(t),e&&e()}})}},{key:"_hideResult",value:function(t){var e=this._getIntro();e&&u(e,{fromScale:[1,1],scale:[.5,.5],fromOpacity:1,opacity:0,easing:"spring",springConstant:.3,springDeceleration:.75,complete:function(){I(e),t&&t()}})}},{key:"_showButtons",value:function(t){if(this._btnGroup){this._btnGroup.style.display="";var e={fromScale:[.5,.5],scale:[1,1],fromPosition:[0,10,0],position:[0,0,0],fromOpacity:0,opacity:1,complete:function(){I(this)},allDone:function(){t&&t()}};this.isDetached()?e.duration=1:(e.delay=function(t){return 250+50*t},e.easing="spring",e.springConstant=.3,e.springDeceleration=.85),u(this._btnGroup.childNodes,e)}}},{key:"_hideButtons",value:function(t){var e=this;if(this._btnGroup){var n={fromScale:[1,1],scale:[.85,.85],fromOpacity:1,opacity:0,allDone:function(){e._btnGroup.style.display="none",t&&t()}};this.isDetached()?n.duration=1:(n.easing="spring",n.springConstant=.3,n.springDeceleration=.75),u(this._btnGroup.childNodes,n)}}},{key:"_hideStatus",value:function(){this._element.querySelector(".slim-upload-status").style.opacity=0}},{key:"_doEdit",value:function(){var t=this;this._data.input.image&&(this._addState("editor"),this._imageEditor||this._appendEditor(),this._imageEditor.showRotateButton=this._options.rotateButton,zt.inner=this._imageEditor.element,this._imageEditor.open(lt(this._data.input.image),"free"===this._options.ratio?null:this._ratio,this._data.actions.crop,this._data.actions.rotation,function(){t._showEditor(),t._hideButtons(),t._hideStatus()}))}},{key:"_doRemove",value:function(t){var e=this;if(!this._isImageOnly()){this._clearState(),this._addState("empty"),this._hasInitialImage=!1,this._imageHopper&&(this._imageHopper.enabled=!0),this._isRequired&&(this._input.required=!0);var n=this._getOutro();n&&(n.style.opacity="0");var i=this.data;this._resetData();var o=setTimeout(function(){e._isBeingDestroyed||(e._hideButtons(function(){e._toggleButton("upload",!0)}),e._hideStatus(),e._hideResult(),e._options.didRemove.apply(e,[i]),t&&t())},this.isDetached()?0:250);return this._timers.push(o),i}}},{key:"_doUpload",value:function(t){var e=this;this._data.input.image&&(this._addState("upload"),this._startProgress(),this._hideButtons(function(){e._toggleButton("upload",!1),e._save(function(n,i,o){e._removeState("upload"),e._stopProgress(),t&&t.apply(e,[n,i,o]),n&&e._toggleButton("upload",!0),e._showButtons()})}))}},{key:"_doDownload",value:function(){this._data.output.image&&_t(this._data,this._options.jpegCompression,this._options.forceType)}},{key:"_doDestroy",value:function(){function t(t,e){return 0!==e.filter(function(e){return t.name===e.name&&t.value===e.value}).length}var e=this;this._isBeingDestroyed=!0,this._timers.forEach(function(t){clearTimeout(t)}),this._timers=[],u(this._element,"detach"),this._imageHopper&&(Bt.forEach(function(t){e._imageHopper.element.removeEventListener(t,e)}),this._imageHopper.destroy(),this._imageHopper=null),this._imageEditor&&(Wt.forEach(function(t){e._imageEditor.element.removeEventListener(t,e)}),this._imageEditor.destroy(),this._imageEditor=null),kt(this._btnGroup.children).forEach(function(t){t.removeEventListener("click",e)}),this._input.removeEventListener("change",this),this._element!==this._originalElement&&this._element.parentNode&&this._element.parentNode.replaceChild(this._originalElement,this._element),this._originalElement.innerHTML=this._originalElementInner;var n=g(this._originalElement);n.forEach(function(n){t(n,e._originalElementAttributes)||e._originalElement.removeAttribute(n.name)}),this._originalElementAttributes.forEach(function(i){t(i,n)||e._originalElement.setAttribute(i.name,i.value)}),jt=Math.max(0,jt-1),zt&&0===jt&&(zt.destroy(),zt=null),this._originalElement=null,this._element=null,this._input=null,this._output=null,this._btnGroup=null,this._options=null}},{key:"dataBase64",get:function(){return Ct(this._data,this._options.post,this._options.jpegCompression,this._options.forceType,null!==this._options.service)}},{key:"data",get:function(){return bt(this._data)}},{key:"element",get:function(){return this._element}},{key:"service",set:function(t){this._options.service=t}},{key:"size",set:function(t){this.setSize(t,null)}},{key:"rotation",set:function(t){this.setRotation(t,null)}},{key:"ratio",set:function(t){this.setRatio(t,null)}}],[{key:"options",value:function(){var t={edit:!0,instantEdit:!1,uploadBase64:!1,meta:{},ratio:"free",size:null,rotation:null,crop:null,post:["output","actions"],service:null,filterSharpen:0,push:!1,defaultInputName:"slim[]",minSize:{width:100,height:100},maxFileSize:null,jpegCompression:null,download:!1,saveInitialImage:!1,forceType:!1,forceSize:null,dropReplace:!0,fetcher:null,internalCanvasSize:{width:4096,height:4096},rotateButton:!0,label:"<p>Drop your image here</p>",labelLoading:"<p>Loading image...</p>",statusFileType:"<p>Invalid file type, expects: $0.</p>",statusFileSize:"<p>File is too big, maximum file size: $0 MB.</p>",statusNoSupport:"<p>Your browser does not support image cropping.</p>",statusImageTooSmall:"<p>Image is too small, minimum size is: $0 pixels.</p>",statusContentLength:'<span class="slim-upload-status-icon"></span> The file is probably too big',statusUnknownResponse:'<span class="slim-upload-status-icon"></span> An unknown error occurred',statusUploadSuccess:'<span class="slim-upload-status-icon"></span> Saved',didInit:function(t){},didLoad:function(t,e,n){return!0},didSave:function(t){},didUpload:function(t,e,n){},didReceiveServerError:function(t,e){return e},didRemove:function(t){},didTransform:function(t){},didConfirm:function(t){},didCancel:function(){},willTransform:function(t,e){e(t)},willSave:function(t,e){e(t)},willRemove:function(t,e){e()},willRequest:function(t){}};return $t.concat(Nt.Buttons).concat("rotate").forEach(function(e){var n=P(e);t["button"+n+"ClassName"]=null,t["button"+n+"Label"]=n,t["button"+n+"Title"]=n}),t}}]),n}();return function(){function t(t){return t?"<p>"+t+"</p>":null}function e(t){var e=window,n=t.split(".");return n.forEach(function(t,i){e[n[i]]&&(e=e[n[i]])}),e!==window?e:null}var n=[],i=function(t){for(var e=0,i=n.length;e<i;e++)if(n[e].isAttachedTo(t))return e;return-1},o=function(t){return t},r=function(t){return"true"===t},s=function(t){return!t||"true"===t},a=function(e){return t(e)},l=function(t){return t?e(t):null},c=function(t){if(!t)return null;var e=It(t,",");return{width:e[0],height:e[1]}},u=function(t){return t?parseFloat(t):null},h=function(t){return t?parseInt(t,10):null},d=function(t){if(!t)return null;var e={};return t.split(",").map(function(t){return parseInt(t,10)}).forEach(function(t,n){e[Rt[n]]=t}),e},f={download:r,edit:s,instantEdit:r,minSize:c,size:c,forceSize:c,internalCanvasSize:c,service:function(t){return void 0===t?null:t},fetcher:function(t){return void 0===t?null:t},push:r,rotation:function(t){return void 0===t?null:parseInt(t,10)},crop:d,post:function(t){return t?t.split(",").map(function(t){return t.trim()}):null},defaultInputName:o,ratio:function(t){return t||null},maxFileSize:u,filterSharpen:h,jpegCompression:h,uploadBase64:r,forceType:o,dropReplace:s,saveInitialImage:r,rotateButton:s,label:a,labelLoading:a};["FileSize","FileType","NoSupport","ImageTooSmall"].forEach(function(t){f["status"+t]=a}),["ContentLength","UnknownResponse","UploadSuccess"].forEach(function(t){f["status"+t]=o}),["Init","Load","Save","Upload","Remove","Transform","ReceiveServerError","Confirm","Cancel"].forEach(function(t){f["did"+t]=l}),["Transform","Save","Remove","Request"].forEach(function(t){f["will"+t]=l});var m=["ClassName","Label","Title"];$t.concat(Nt.Buttons).concat("rotate").forEach(function(t){var e=P(t);m.forEach(function(t){f["button"+e+t]=o})}),Vt.supported=function(){return!("[object OperaMini]"===Object.prototype.toString.call(window.operamini)||void 0===window.addEventListener||void 0===window.FileReader||void 0===window.URL||void 0===window.URL.createObjectURL)}(),Vt.parse=function(t){var e,n,i,o=[];for(e=t.querySelectorAll(".slim:not([data-state])"),i=e.length;i--;)n=e[i],o.push(Vt.create(n,Vt.getOptionsFromAttributes(n)));return o},Vt.getOptionsFromAttributes=function(t){var e=p(t),n={meta:{}};for(var i in e){var o=f[i],r=e[i];o?(r=o(r),r=null===r?vt(Vt.options()[i]):r,n[i]=r):0===i.indexOf("meta")&&(n.meta[A(i.substr(4))]=r)}return n},Vt.find=function(t){var e=n.filter(function(e){return e.isAttachedTo(t)});return e?e[0]:null},Vt.create=function(t,e){if(!Vt.find(t)){e||(e=Vt.getOptionsFromAttributes(t));var i=new Vt(t,e);return n.push(i),i}},Vt.destroy=function(t){var e=i(t);return!(e<0)&&(n[e].destroy(),n.splice(e,1),!0)}}(),Vt}();t.fn.slim=function(){var t=i(arguments);if(o(t))return this.each(function(){l.create(this,t[0])});var e=t.shift();switch(e){case"supported":return l.supported;case"destroy":return this.each(function(){l.destroy(this)});case"parse":return this.each(function(){l.parse(this)});default:var n=[];return this.each(function(){var i=l.find(this);i&&(a(i,e)?n.push(i[e].apply(i,t)):r(i,e)?n.push(i[e]):s(i,e)&&n.push(i[e]=t[0]))}),n}}}}(window.jQuery)},function(t,e,n){!function(t){t(n(6))}(function(t){"use strict";var e={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};t.defineMode("xml",function(i,o){function r(t,e){function n(n){return e.tokenize=n,n(t,e)}var i=t.next();if("<"==i)return t.eat("!")?t.eat("[")?t.match("CDATA[")?n(l("atom","]]>")):null:t.match("--")?n(l("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),n(c(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),e.tokenize=l("meta","?>"),"meta"):(T=t.eat("/")?"closeTag":"openTag",e.tokenize=s,"tag bracket");if("&"==i){var o;return o=t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"),o?"atom":"error"}return t.eatWhile(/[^&<]/),null}function s(t,e){var n=t.next();if(">"==n||"/"==n&&t.eat(">"))return e.tokenize=r,T=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return T="equals",null;if("<"==n){e.tokenize=r,e.state=f,e.tagName=e.tagStart=null;var i=e.tokenize(t,e);return i?i+" tag error":"tag error"}return/[\'\"]/.test(n)?(e.tokenize=a(n),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function a(t){var e=function(e,n){for(;!e.eol();)if(e.next()==t){n.tokenize=s;break}return"string"};return e.isInAttribute=!0,e}function l(t,e){return function(n,i){for(;!n.eol();){if(n.match(e)){i.tokenize=r;break}n.next()}return t}}function c(t){return function(e,n){for(var i;null!=(i=e.next());){if("<"==i)return n.tokenize=c(t+1),n.tokenize(e,n);if(">"==i){if(1==t){n.tokenize=r;break}return n.tokenize=c(t-1),n.tokenize(e,n)}}return"meta"}}function u(t,e,n){this.prev=t.context,this.tagName=e,this.indent=t.indented,this.startOfLine=n,(_.doNotIndent.hasOwnProperty(e)||t.context&&t.context.noIndent)&&(this.noIndent=!0)}function h(t){t.context&&(t.context=t.context.prev)}function d(t,e){for(var n;;){if(!t.context)return;if(n=t.context.tagName,!_.contextGrabbers.hasOwnProperty(n)||!_.contextGrabbers[n].hasOwnProperty(e))return;h(t)}}function f(t,e,n){return"openTag"==t?(n.tagStart=e.column(),p):"closeTag"==t?m:f}function p(t,e,n){return"word"==t?(n.tagName=e.current(),E="tag",y):_.allowMissingTagName&&"endTag"==t?(E="tag bracket",y(t,e,n)):(E="error",p)}function m(t,e,n){if("word"==t){var i=e.current();return n.context&&n.context.tagName!=i&&_.implicitlyClosed.hasOwnProperty(n.context.tagName)&&h(n),n.context&&n.context.tagName==i||!1===_.matchClosing?(E="tag",g):(E="tag error",v)}return _.allowMissingTagName&&"endTag"==t?(E="tag bracket",g(t,e,n)):(E="error",v)}function g(t,e,n){return"endTag"!=t?(E="error",g):(h(n),f)}function v(t,e,n){return E="error",g(t,e,n)}function y(t,e,n){if("word"==t)return E="attribute",b;if("endTag"==t||"selfcloseTag"==t){var i=n.tagName,o=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==t||_.autoSelfClosers.hasOwnProperty(i)?d(n,i):(d(n,i),n.context=new u(n,i,o==n.indented)),f}return E="error",y}function b(t,e,n){return"equals"==t?w:(_.allowMissing||(E="error"),y(t,e,n))}function w(t,e,n){return"string"==t?x:"word"==t&&_.allowUnquoted?(E="string",y):(E="error",y(t,e,n))}function x(t,e,n){return"string"==t?x:y(t,e,n)}var C=i.indentUnit,_={},S=o.htmlMode?e:n;for(var k in S)_[k]=S[k];for(var k in o)_[k]=o[k];var T,E;return r.isInText=!0,{startState:function(t){var e={tokenize:r,state:f,indented:t||0,tagName:null,tagStart:null,context:null};return null!=t&&(e.baseIndent=t),e},token:function(t,e){if(!e.tagName&&t.sol()&&(e.indented=t.indentation()),t.eatSpace())return null;T=null;var n=e.tokenize(t,e);return(n||T)&&"comment"!=n&&(E=null,e.state=e.state(T||n,t,e),E&&(n="error"==E?n+" error":E)),n},indent:function(e,n,i){var o=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+C;if(o&&o.noIndent)return t.Pass;if(e.tokenize!=s&&e.tokenize!=r)return i?i.match(/^(\s*)/)[0].length:0;if(e.tagName)return!1!==_.multilineTagIndentPastTag?e.tagStart+e.tagName.length+2:e.tagStart+C*(_.multilineTagIndentFactor||1);if(_.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var a=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(a&&a[1])for(;o;){if(o.tagName==a[2]){o=o.prev;break}if(!_.implicitlyClosed.hasOwnProperty(o.tagName))break;o=o.prev}else if(a)for(;o;){var l=_.contextGrabbers[o.tagName];if(!l||!l.hasOwnProperty(a[2]))break;o=o.prev}for(;o&&o.prev&&!o.startOfLine;)o=o.prev;return o?o.indent+C:e.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:_.htmlMode?"html":"xml",helperType:_.htmlMode?"html":"xml",skipAttribute:function(t){t.state==w&&(t.state=y)}}}),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})})},function(t,e,n){var i,o,r;/*!
 * jQuery UI Effects 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(s){o=[n(0),n(1)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){var e="ui-effects-animated",n=t;/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
return t.effects={effect:{}},function(t,e){function n(t,e,n){var i=u[e.type]||{};return null==t?n||!e.def?null:e.def:(t=i.floor?~~t:parseFloat(t),isNaN(t)?e.def:i.mod?(t+i.mod)%i.mod:0>t?0:i.max<t?i.max:t)}function i(e){var n=l(),i=n._rgba=[];return e=e.toLowerCase(),f(a,function(t,o){var r,s=o.re.exec(e),a=s&&o.parse(s),l=o.space||"rgba";if(a)return r=n[l](a),n[c[l].cache]=r[c[l].cache],i=n._rgba=r._rgba,!1}),i.length?("0,0,0,0"===i.join()&&t.extend(i,r.transparent),n):r[e]}function o(t,e,n){return n=(n+1)%1,6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}var r,s=/^([\-+])=\s*(\d+\.?\d*)/,a=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,n,i,o){return new t.Color.fn.parse(e,n,i,o)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=l.support={},d=t("<p>")[0],f=t.each;d.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=d.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),l.fn=t.extend(l.prototype,{parse:function(e,o,s,a){if(void 0===e)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=t(e).css(o),o=void 0);var u=this,h=t.type(e),d=this._rgba=[];return void 0!==o&&(e=[e,o,s,a],h="array"),"string"===h?this.parse(i(e)||r._default):"array"===h?(f(c.rgba.props,function(t,i){d[i.idx]=n(e[i.idx],i)}),this):"object"===h?(e instanceof l?f(c,function(t,n){e[n.cache]&&(u[n.cache]=e[n.cache].slice())}):f(c,function(i,o){var r=o.cache;f(o.props,function(t,i){if(!u[r]&&o.to){if("alpha"===t||null==e[t])return;u[r]=o.to(u._rgba)}u[r][i.idx]=n(e[t],i,!0)}),u[r]&&t.inArray(null,u[r].slice(0,3))<0&&(u[r][3]=1,o.from&&(u._rgba=o.from(u[r])))}),this):void 0},is:function(t){var e=l(t),n=!0,i=this;return f(c,function(t,o){var r,s=e[o.cache];return s&&(r=i[o.cache]||o.to&&o.to(i._rgba)||[],f(o.props,function(t,e){if(null!=s[e.idx])return n=s[e.idx]===r[e.idx]})),n}),n},_space:function(){var t=[],e=this;return f(c,function(n,i){e[i.cache]&&t.push(n)}),t.pop()},transition:function(t,e){var i=l(t),o=i._space(),r=c[o],s=0===this.alpha()?l("transparent"):this,a=s[r.cache]||r.to(s._rgba),h=a.slice();return i=i[r.cache],f(r.props,function(t,o){var r=o.idx,s=a[r],l=i[r],c=u[o.type]||{};null!==l&&(null===s?h[r]=l:(c.mod&&(l-s>c.mod/2?s+=c.mod:s-l>c.mod/2&&(s-=c.mod)),h[r]=n((l-s)*e+s,o)))}),this[o](h)},blend:function(e){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),o=l(e)._rgba;return l(t.map(n,function(t,e){return(1-i)*o[e]+i*t}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===n[3]&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===n[3]&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),i=n.pop();return e&&n.push(~~(255*i)),"#"+t.map(n,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,n,i=t[0]/255,o=t[1]/255,r=t[2]/255,s=t[3],a=Math.max(i,o,r),l=Math.min(i,o,r),c=a-l,u=a+l,h=.5*u;return e=l===a?0:i===a?60*(o-r)/c+360:o===a?60*(r-i)/c+120:60*(i-o)/c+240,n=0===c?0:h<=.5?c/u:c/(2-u),[Math.round(e)%360,n,h,null==s?1:s]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],i=t[2],r=t[3],s=i<=.5?i*(1+n):i+n-i*n,a=2*i-s;return[Math.round(255*o(a,s,e+1/3)),Math.round(255*o(a,s,e)),Math.round(255*o(a,s,e-1/3)),r]},f(c,function(e,i){var o=i.props,r=i.cache,a=i.to,c=i.from;l.fn[e]=function(e){if(a&&!this[r]&&(this[r]=a(this._rgba)),void 0===e)return this[r].slice();var i,s=t.type(e),u="array"===s||"object"===s?e:arguments,h=this[r].slice();return f(o,function(t,e){var i=u["object"===s?t:e.idx];null==i&&(i=h[e.idx]),h[e.idx]=n(i,e)}),c?(i=l(c(h)),i[r]=h,i):l(h)},f(o,function(n,i){l.fn[n]||(l.fn[n]=function(o){var r,a=t.type(o),l="alpha"===n?this._hsla?"hsla":"rgba":e,c=this[l](),u=c[i.idx];return"undefined"===a?u:("function"===a&&(o=o.call(this,u),a=t.type(o)),null==o&&i.empty?this:("string"===a&&(r=s.exec(o))&&(o=u+parseFloat(r[2])*("+"===r[1]?1:-1)),c[i.idx]=o,this[l](c)))})})}),l.hook=function(e){var n=e.split(" ");f(n,function(e,n){t.cssHooks[n]={set:function(e,o){var r,s,a="";if("transparent"!==o&&("string"!==t.type(o)||(r=i(o)))){if(o=l(r||o),!h.rgba&&1!==o._rgba[3]){for(s="backgroundColor"===n?e.parentNode:e;(""===a||"transparent"===a)&&s&&s.style;)try{a=t.css(s,"backgroundColor"),s=s.parentNode}catch(t){}o=o.blend(a&&"transparent"!==a?a:"_default")}o=o.toRgbaString()}try{e.style[n]=o}catch(t){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=l(e.elem,n),e.end=l(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(n,i){e["border"+i+"Color"]=t}),e}},r=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(n),function(){function e(e){var n,i,o=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,r={};if(o&&o.length&&o[0]&&o[o[0]])for(i=o.length;i--;)n=o[i],"string"==typeof o[n]&&(r[t.camelCase(n)]=o[n]);else for(n in o)"string"==typeof o[n]&&(r[n]=o[n]);return r}function i(e,n){var i,o,s={};for(i in n)o=n[i],e[i]!==o&&(r[i]||!t.fx.step[i]&&isNaN(parseFloat(o))||(s[i]=o));return s}var o=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(n.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(n,r,s,a){var l=t.speed(r,s,a);return this.queue(function(){var r,s=t(this),a=s.attr("class")||"",c=l.children?s.find("*").addBack():s;c=c.map(function(){return{el:t(this),start:e(this)}}),r=function(){t.each(o,function(t,e){n[e]&&s[e+"Class"](n[e])})},r(),c=c.map(function(){return this.end=e(this.el[0]),this.diff=i(this.start,this.end),this}),s.attr("class",a),c=c.map(function(){var e=this,n=t.Deferred(),i=t.extend({},l,{queue:!1,complete:function(){n.resolve(e)}});return this.el.animate(this.diff,i),n.promise()}),t.when.apply(t,c.get()).done(function(){r(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(s[0])})})},t.fn.extend({addClass:function(e){return function(n,i,o,r){return i?t.effects.animateClass.call(this,{add:n},i,o,r):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(n,i,o,r){return arguments.length>1?t.effects.animateClass.call(this,{remove:n},i,o,r):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(n,i,o,r,s){return"boolean"==typeof i||void 0===i?o?t.effects.animateClass.call(this,i?{add:n}:{remove:n},o,r,s):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:n},i,o,r)}}(t.fn.toggleClass),switchClass:function(e,n,i,o,r){return t.effects.animateClass.call(this,{add:n,remove:e},i,o,r)}})}(),function(){function n(e,n,i,o){return t.isPlainObject(e)&&(n=e,e=e.effect),e={effect:e},null==n&&(n={}),t.isFunction(n)&&(o=n,i=null,n={}),("number"==typeof n||t.fx.speeds[n])&&(o=i,i=n,n={}),t.isFunction(i)&&(o=i,i=null),n&&t.extend(e,n),i=i||n.duration,e.duration=t.fx.off?0:"number"==typeof i?i:i in t.fx.speeds?t.fx.speeds[i]:t.fx.speeds._default,e.complete=o||n.complete,e}function i(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||("string"==typeof e&&!t.effects.effect[e]||(!!t.isFunction(e)||"object"==typeof e&&!e.effect))}function o(t,e){var n=e.outerWidth(),i=e.outerHeight(),o=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,r=o.exec(t)||["",0,n,i,0];return{top:parseFloat(r[1])||0,right:"auto"===r[2]?n:parseFloat(r[2]),bottom:"auto"===r[3]?i:parseFloat(r[3]),left:parseFloat(r[4])||0}}t.expr&&t.expr.filters&&t.expr.filters.animated&&(t.expr.filters.animated=function(n){return function(i){return!!t(i).data(e)||n(i)}}(t.expr.filters.animated)),!1!==t.uiBackCompat&&t.extend(t.effects,{save:function(t,e){for(var n=0,i=e.length;n<i;n++)null!==e[n]&&t.data("ui-effects-"+e[n],t[0].style[e[n]])},restore:function(t,e){for(var n,i=0,o=e.length;i<o;i++)null!==e[i]&&(n=t.data("ui-effects-"+e[i]),t.css(e[i],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var n={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},i=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:e.width(),height:e.height()},r=document.activeElement;try{r.id}catch(t){r=document.body}return e.wrap(i),(e[0]===r||t.contains(e[0],r))&&t(r).trigger("focus"),i=e.parent(),"static"===e.css("position")?(i.css({position:"relative"}),e.css({position:"relative"})):(t.extend(n,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,i){n[i]=e.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(o),i.css(n).show()},removeWrapper:function(e){var n=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===n||t.contains(e[0],n))&&t(n).trigger("focus")),e}}),t.extend(t.effects,{version:"1.12.1",define:function(e,n,i){return i||(i=n,n="effect"),t.effects.effect[e]=i,t.effects.effect[e].mode=n,i},scaledDimensions:function(t,e,n){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var i="horizontal"!==n?(e||100)/100:1,o="vertical"!==n?(e||100)/100:1;return{height:t.height()*o,width:t.width()*i,outerHeight:t.outerHeight()*o,outerWidth:t.outerWidth()*i}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,n){var i=t.queue();e>1&&i.splice.apply(i,[1,0].concat(i.splice(e,n))),t.dequeue()},saveStyle:function(t){t.data("ui-effects-style",t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data("ui-effects-style")||"",t.removeData("ui-effects-style")},mode:function(t,e){var n=t.is(":hidden");return"toggle"===e&&(e=n?"show":"hide"),(n?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var n,i;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=t[1]/e.width}return{x:i,y:n}},createPlaceholder:function(e){var n,i=e.css("position"),o=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(i)&&(i="absolute",n=t("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),float:e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data("ui-effects-placeholder",n)),e.css({position:i,left:o.left,top:o.top}),n},removePlaceholder:function(t){var e="ui-effects-placeholder",n=t.data(e);n&&(n.remove(),t.removeData(e))},cleanUp:function(e){t.effects.restoreStyle(e),t.effects.removePlaceholder(e)},setTransition:function(e,n,i,o){return o=o||{},t.each(n,function(t,n){var r=e.cssUnit(n);r[0]>0&&(o[n]=r[0]*i+r[1])}),o}}),t.fn.extend({effect:function(){function i(n){function i(){l.removeData(e),t.effects.cleanUp(l),"hide"===o.mode&&l.hide(),a()}function a(){t.isFunction(c)&&c.call(l[0]),t.isFunction(n)&&n()}var l=t(this);o.mode=h.shift(),!1===t.uiBackCompat||s?"none"===o.mode?(l[u](),a()):r.call(l[0],o,i):(l.is(":hidden")?"hide"===u:"show"===u)?(l[u](),a()):r.call(l[0],o,a)}var o=n.apply(this,arguments),r=t.effects.effect[o.effect],s=r.mode,a=o.queue,l=a||"fx",c=o.complete,u=o.mode,h=[],d=function(n){var i=t(this),o=t.effects.mode(i,u)||s;i.data(e,!0),h.push(o),s&&("show"===o||o===s&&"hide"===o)&&i.show(),s&&"none"===o||t.effects.saveStyle(i),t.isFunction(n)&&n()};return t.fx.off||!r?u?this[u](o.duration,c):this.each(function(){c&&c.call(this)}):!1===a?this.each(d).each(i):this.queue(l,d).queue(l,i)},show:function(t){return function(e){if(i(e))return t.apply(this,arguments);var o=n.apply(this,arguments);return o.mode="show",this.effect.call(this,o)}}(t.fn.show),hide:function(t){return function(e){if(i(e))return t.apply(this,arguments);var o=n.apply(this,arguments);return o.mode="hide",this.effect.call(this,o)}}(t.fn.hide),toggle:function(t){return function(e){if(i(e)||"boolean"==typeof e)return t.apply(this,arguments);var o=n.apply(this,arguments);return o.mode="toggle",this.effect.call(this,o)}}(t.fn.toggle),cssUnit:function(e){var n=this.css(e),i=[];return t.each(["em","px","%","pt"],function(t,e){n.indexOf(e)>0&&(i=[parseFloat(n),e])}),i},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):o(this.css("clip"),this)},transfer:function(e,n){var i=t(this),o=t(e.to),r="fixed"===o.css("position"),s=t("body"),a=r?s.scrollTop():0,l=r?s.scrollLeft():0,c=o.offset(),u={top:c.top-a,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},h=i.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(e.className).css({top:h.top-a,left:h.left-l,height:i.innerHeight(),width:i.innerWidth(),position:r?"fixed":"absolute"}).animate(u,e.duration,e.easing,function(){d.remove(),t.isFunction(n)&&n()})}}),t.fx.step.clip=function(e){e.clipInit||(e.start=t(e.elem).cssClip(),"string"==typeof e.end&&(e.end=o(e.end,e.elem)),e.clipInit=!0),t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})}}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,n){e[n]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,n){t.easing["easeIn"+e]=n,t.easing["easeOut"+e]=function(t){return 1-n(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?n(2*t)/2:1-n(-2*t+2)/2}})}(),t.effects})},function(t,e,n){var i,o,r;/*!
 * jQuery UI Effects Slide 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(s){o=[n(0),n(1),n(26)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.effects.define("slide","show",function(e,n){var i,o,r=t(this),s={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},a=e.mode,l=e.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,h=e.distance||r["top"===c?"outerHeight":"outerWidth"](!0),d={};t.effects.createPlaceholder(r),i=r.cssClip(),o=r.position()[c],d[c]=(u?-1:1)*h+o,d.clip=r.cssClip(),d.clip[s[l][1]]=d.clip[s[l][0]],"show"===a&&(r.cssClip(d.clip),r.css(c,d[c]),d.clip=i,d[c]=o),r.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:n})})})},function(t,e,n){var i,o,r;!function(s){o=[n(0),n(1)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.ui.plugin={add:function(e,n,i){var o,r=t.ui[e].prototype;for(o in i)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([n,i[o]])},call:function(t,e,n,i){var o,r=t.plugins[e];if(r&&(i||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)t.options[r[o][0]]&&r[o][1].apply(t.element,n)}}})},function(t,e,n){var i,o,r;!function(s){o=[n(0),n(1)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(n){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e}})},function(t,e,n){var i,o,r;!function(s){o=[n(0),n(1)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")}})},function(t,e,n){var i,o,r;/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(s){o=[n(0),n(10),n(7),n(28),n(29),n(30),n(9),n(1),n(5)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging"))return void(this.destroyOnClear=!0);this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(e){var n=this.options;return!(this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blurActiveElement(e),this._blockFrames(!0===n.iframeFix?"iframe":n.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var n=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(n).length||t.ui.safeBlur(n)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(!1===this._trigger("drag",e,i))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==n._trigger("stop",e)&&n._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper),o=i?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,o=this.options,r=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,t(r).width()-this.helperProportions.width-this.margins.left,(t(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),n=t(o.containment),void((i=n[0])&&(e=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,i,o,r,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=n?o-this.offset.click.top>=n[1]||o-this.offset.click.top>n[3]?o:o-this.offset.click.top>=n[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?r-this.offset.click.left>=n[0]||r-this.offset.click.left>n[2]?r:r-this.offset.click.left>=n[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n,i){var o=t.extend({},n,{item:i.element});i.sortables=[],t(i.options.connectToSortable).each(function(){var n=t(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",e,o))})},stop:function(e,n,i){var o=t.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,t.each(i.sortables,function(){var t=this;t.isOver?(t.isOver=0,i.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,o))})},drag:function(e,n,i){t.each(i.sortables,function(){var o=!1,r=this;r.positionAbs=i.positionAbs,r.helperProportions=i.helperProportions,r.offset.click=i.offset.click,r._intersectsWith(r.containerCache)&&(o=!0,t.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&t.contains(r.element[0],this.element[0])&&(o=!1),o})),o?(r.isOver||(r.isOver=1,i._parent=n.helper.parent(),r.currentItem=n.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return n.helper[0]},e.target=r.currentItem[0],r._mouseCapture(e,!0),r._mouseStart(e,!0,!0),r.offset.click.top=i.offset.click.top,r.offset.click.left=i.offset.click.left,r.offset.parent.left-=i.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=i.offset.parent.top-r.offset.parent.top,i._trigger("toSortable",e),i.dropped=r.element,t.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,r.fromOutside=i),r.currentItem&&(r._mouseDrag(e),n.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",e,r._uiHash(r)),r._mouseStop(e,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(e),n.position=i._generatePosition(e,!0),i._trigger("fromSortable",e),i.dropped=!1,t.each(i.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,n,i){var o=t("body"),r=i.options;o.css("cursor")&&(r._cursor=o.css("cursor")),o.css("cursor",r.cursor)},stop:function(e,n,i){var o=i.options;o._cursor&&t("body").css("cursor",o._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n,i){var o=t(n.helper),r=i.options;o.css("opacity")&&(r._opacity=o.css("opacity")),o.css("opacity",r.opacity)},stop:function(e,n,i){var o=i.options;o._opacity&&t(n.helper).css("opacity",o._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(e,n,i){var o=i.options,r=!1,s=i.scrollParentNotHidden[0],a=i.document[0];s!==a&&"HTML"!==s.tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+s.offsetHeight-e.pageY<o.scrollSensitivity?s.scrollTop=r=s.scrollTop+o.scrollSpeed:e.pageY-i.overflowOffset.top<o.scrollSensitivity&&(s.scrollTop=r=s.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+s.offsetWidth-e.pageX<o.scrollSensitivity?s.scrollLeft=r=s.scrollLeft+o.scrollSpeed:e.pageX-i.overflowOffset.left<o.scrollSensitivity&&(s.scrollLeft=r=s.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(e.pageY-t(a).scrollTop()<o.scrollSensitivity?r=t(a).scrollTop(t(a).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<o.scrollSensitivity&&(r=t(a).scrollTop(t(a).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(e.pageX-t(a).scrollLeft()<o.scrollSensitivity?r=t(a).scrollLeft(t(a).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<o.scrollSensitivity&&(r=t(a).scrollLeft(t(a).scrollLeft()+o.scrollSpeed)))),!1!==r&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,n,i){var o=i.options;i.snapElements=[],t(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var e=t(this),n=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:n.top,left:n.left})})},drag:function(e,n,i){var o,r,s,a,l,c,u,h,d,f,p=i.options,m=p.snapTolerance,g=n.offset.left,v=g+i.helperProportions.width,y=n.offset.top,b=y+i.helperProportions.height;for(d=i.snapElements.length-1;d>=0;d--)l=i.snapElements[d].left-i.margins.left,c=l+i.snapElements[d].width,u=i.snapElements[d].top-i.margins.top,h=u+i.snapElements[d].height,v<l-m||g>c+m||b<u-m||y>h+m||!t.contains(i.snapElements[d].item.ownerDocument,i.snapElements[d].item)?(i.snapElements[d].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[d].item})),i.snapElements[d].snapping=!1):("inner"!==p.snapMode&&(o=Math.abs(u-b)<=m,r=Math.abs(h-y)<=m,s=Math.abs(l-v)<=m,a=Math.abs(c-g)<=m,o&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),r&&(n.position.top=i._convertPositionTo("relative",{top:h,left:0}).top),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left)),f=o||r||s||a,"outer"!==p.snapMode&&(o=Math.abs(u-y)<=m,r=Math.abs(h-b)<=m,s=Math.abs(l-g)<=m,a=Math.abs(c-v)<=m,o&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),r&&(n.position.top=i._convertPositionTo("relative",{top:h-i.helperProportions.height,left:0}).top),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left)),!i.snapElements[d].snapping&&(o||r||s||a||f)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[d].item})),i.snapElements[d].snapping=o||r||s||a||f)}}),t.ui.plugin.add("draggable","stack",{start:function(e,n,i){var o,r=i.options,s=t.makeArray(t(r.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});s.length&&(o=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each(function(e){t(this).css("zIndex",o+e)}),this.css("zIndex",o+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n,i){var o=t(n.helper),r=i.options;o.css("zIndex")&&(r._zIndex=o.css("zIndex")),o.css("zIndex",r.zIndex)},stop:function(e,n,i){var o=i.options;o._zIndex&&t(n.helper).css("zIndex",o._zIndex)}}),t.ui.draggable})},function(t,e,n){var i,o,r;/*!
 * jQuery UI Sortable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(s){o=[n(0),n(10),n(7),n(8),n(9),n(1),n(5)],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t){return t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,n){return t>=e&&t<e+n},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,n){var i=null,o=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),t(e.target).parents().each(function(){if(t.data(this,r.widgetName+"-item")===r)return i=t(this),!1}),t.data(e.target,r.widgetName+"-item")===r&&(i=t(e.target)),!!i&&(!(this.options.handle&&!n&&(t(this.options.handle,i).find("*").addBack().each(function(){this===e.target&&(o=!0)}),!o))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,n,i){var o,r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=t("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var n,i,o,r,s=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(e.pageY-this.document.scrollTop()<s.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-s.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<s.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+s.scrollSpeed)),e.pageX-this.document.scrollLeft()<s.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-s.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<s.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+s.scrollSpeed))),!1!==a&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],o=i.item[0],(r=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&!(o===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===o||t.contains(this.placeholder[0],o)||"semi-dynamic"===this.options.type&&t.contains(this.element[0],o))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(e,i),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,n){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var i=this,o=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){i._clear(e)})}else this._clear(e,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},t(n).each(function(){var n=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);n&&i.push((e.key||n[1]+"[]")+"="+(e.key&&e.expression?n[1]:n[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},n.each(function(){i.push(t(e.item||this).attr(e.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,o=i+this.helperProportions.height,r=t.left,s=r+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||i+c>a&&i+c<l,d="y"===this.options.axis||e+u>r&&e+u<s,f=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?f:r<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&a<i+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e,n,i="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),o="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width);return!(!i||!o)&&(e=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection(),this.floating?"right"===n||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function n(){a.push(this)}var i,o,r,s,a=[],l=[],c=this._connectWith();if(c&&e)for(i=c.length-1;i>=0;i--)for(r=t(c[i],this.document[0]),o=r.length-1;o>=0;o--)(s=t.data(r[o],this.widgetFullName))&&s!==this&&!s.options.disabled&&l.push([t.isFunction(s.options.items)?s.options.items.call(s.element):t(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(n);return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var n=0;n<e.length;n++)if(e[n]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var n,i,o,r,s,a,l,c,u=this.items,h=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(n=d.length-1;n>=0;n--)for(o=t(d[n],this.document[0]),i=o.length-1;i>=0;i--)(r=t.data(o[i],this.widgetFullName))&&r!==this&&!r.options.disabled&&(h.push([t.isFunction(r.options.items)?r.options.items.call(r.element[0],e,{item:this.currentItem}):t(r.options.items,r.element),r]),this.containers.push(r));for(n=h.length-1;n>=0;n--)for(s=h[n][1],a=h[n][0],i=0,c=a.length;i<c;i++)l=t(a[i]),l.data(this.widgetName+"-item",s),u.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,o,r;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?t(this.options.toleranceElement,i.item):i.item,e||(i.width=o.outerWidth(),i.height=o.outerHeight()),r=o.offset(),i.left=r.left,i.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)r=this.containers[n].element.offset(),this.containers[n].containerCache.left=r.left,this.containers[n].containerCache.top=r.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var n,i=e.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=e.currentItem[0].nodeName.toLowerCase(),o=t("<"+i+">",e.document[0]);return e._addClass(o,"ui-sortable-placeholder",n||e.currentItem[0].className)._removeClass(o,"ui-sortable-helper"),"tbody"===i?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(o)):"tr"===i?e._createTrPlaceholder(e.currentItem,o):"img"===i&&o.attr("src",e.currentItem.attr("src")),n||o.css("visibility","hidden"),o},update:function(t,o){n&&!i.forcePlaceholderSize||(o.height()||o.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(i.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),i.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,n){var i=this;e.children().each(function(){t("<td>&#160;</td>",i.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(e){var n,i,o,r,s,a,l,c,u,h,d=null,f=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(d&&t.contains(this.containers[n].element[0],d.element[0]))continue;d=this.containers[n],f=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",e,this._uiHash(this)),this.containers[n].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",e,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(o=1e4,r=null,u=d.floating||this._isFloating(this.currentItem),s=u?"left":"top",a=u?"width":"height",h=u?"pageX":"pageY",i=this.items.length-1;i>=0;i--)t.contains(this.containers[f].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(l=this.items[i].item.offset()[s],c=!1,e[h]-l>this.items[i][a]/2&&(c=!0),Math.abs(e[h]-l)<o&&(o=Math.abs(e[h]-l),r=this.items[i],this.direction=c?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[f])return void(this.currentContainer.containerCache.over||(this.containers[f]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(e,r,null,!0):this._rearrange(e,null,this.containers[f].element,!0),this._trigger("change",e,this._uiHash()),this.containers[f]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",e,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||t("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),i[0].style.width&&!n.forceHelperSize||i.width(this.currentItem.width()),i[0].style.height&&!n.forceHelperSize||i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),"document"!==o.containment&&"window"!==o.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(e=t(o.containment)[0],n=t(o.containment).offset(),i="hidden"!==t(e).css("overflow"),this.containment=[n.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*i}},_generatePosition:function(e){var n,i,o=this.options,r=e.pageX,s=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),o.grid&&(n=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1],s=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-o.grid[1]:n+o.grid[1]:n,i=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-o.grid[0]:i+o.grid[0]:i)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!i)})},_clear:function(t,e){function n(t,e,n){return function(i){n._trigger(t,i,e._uiHash(e))}}this.reverting=!1;var i,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&o.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||o.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(o.push(function(t){this._trigger("remove",t,this._uiHash())}),o.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||o.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(o.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(i=0;i<o.length;i++)o[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var n=e||this;return{helper:n.helper,placeholder:n.placeholder||t([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:e?e.element:null}}})})},function(t,e,n){(function(i){var o;/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
"classList"in document.createElement("_")||function(t){"use strict";if("Element"in t){var e=t.Element.prototype,n=Object,i=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array.prototype.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},r=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},s=function(t,e){if(""===e)throw new r("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new r("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(t,e)},a=function(t){for(var e=i.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],o=0,r=n.length;o<r;o++)this.push(n[o]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},l=a.prototype=[],c=function(){return new a(this)};if(r.prototype=Error.prototype,l.item=function(t){return this[t]||null},l.contains=function(t){return t+="",-1!==s(this,t)},l.add=function(){var t,e=arguments,n=0,i=e.length,o=!1;do{t=e[n]+"",-1===s(this,t)&&(this.push(t),o=!0)}while(++n<i);o&&this._updateClassName()},l.remove=function(){var t,e,n=arguments,i=0,o=n.length,r=!1;do{for(t=n[i]+"",e=s(this,t);-1!==e;)this.splice(e,1),r=!0,e=s(this,t)}while(++i<o);r&&this._updateClassName()},l.toggle=function(t,e){t+="";var n=this.contains(t),i=n?!0!==e&&"remove":!1!==e&&"add";return i&&this[i](t),!0===e||!1===e?e:!n},l.toString=function(){return this.join(" ")},n.defineProperty){var u={get:c,enumerable:!0,configurable:!0};try{n.defineProperty(e,"classList",u)}catch(t){-2146823252===t.number&&(u.enumerable=!1,n.defineProperty(e,"classList",u))}}else n.prototype.__defineGetter__&&e.__defineGetter__("classList",c)}}(self),/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
function(t){"use strict";if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(t){}var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},i=function(t,e,n){this.data=t,this.size=t.length,this.type=e,this.encoding=n},o=n.prototype,r=i.prototype,s=t.FileReaderSync,a=function(t){this.code=this[this.name=t]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=l.length,u=t.URL||t.webkitURL||t,h=u.createObjectURL,d=u.revokeObjectURL,f=u,p=t.btoa,m=t.atob,g=t.ArrayBuffer,v=t.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(i.fake=r.fake=!0;c--;)a.prototype[l[c]]=c+1;return u.createObjectURL||(f=t.URL=function(t){var e,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=t,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(e=t.match(y),n.origin=e&&e[1])),n}),f.createObjectURL=function(t){var e,n=t.type;return null===n&&(n="application/octet-stream"),t instanceof i?(e="data:"+n,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):p?e+";base64,"+p(t.data):e+","+encodeURIComponent(t.data)):h?h.call(u,t):void 0},f.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&d&&d.call(u,t)},o.append=function(t){var n=this.data;if(v&&(t instanceof g||t instanceof v)){for(var o="",r=new v(t),l=0,c=r.length;l<c;l++)o+=String.fromCharCode(r[l]);n.push(o)}else if("Blob"===e(t)||"File"===e(t)){if(!s)throw new a("NOT_READABLE_ERR");var u=new s;n.push(u.readAsBinaryString(t))}else t instanceof i?"base64"===t.encoding&&m?n.push(m(t.data)):"URI"===t.encoding?n.push(decodeURIComponent(t.data)):"raw"===t.encoding&&n.push(t.data):("string"!=typeof t&&(t+=""),n.push(unescape(encodeURIComponent(t))))},o.getBlob=function(t){return arguments.length||(t=null),new i(this.data.join(""),t,"raw")},o.toString=function(){return"[object BlobBuilder]"},r.slice=function(t,e,n){var o=arguments.length;return o<3&&(n=null),new i(this.data.slice(t,o>1?e:this.data.length),n,this.encoding)},r.toString=function(){return"[object Blob]"},r.close=function(){this.size=0,delete this.data},n}(t);t.Blob=function(t,n){var i=n?n.type||"":"",o=new e;if(t)for(var r=0,s=t.length;r<s;r++)Uint8Array&&t[r]instanceof Uint8Array?o.append(t[r].buffer):o.append(t[r]);var a=o.getBlob(i);return!a.slice&&a.webkitSlice&&(a.slice=a.webkitSlice),a};var n=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=n(new t.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),function(r,s){"use strict";"object"==typeof t&&void 0!==i&&i&&i.versions&&i.versions.electron||"object"!=typeof t?void 0!==(o=function(){return s}.call(e,n,e,t))&&(t.exports=o):t.exports=s}(0,function(){"use strict";function t(t,e){return this.init(t,e)}return t.extensions={},function(e){function n(t,e){var n,i=Array.prototype.slice.call(arguments,2);e=e||{};for(var o=0;o<i.length;o++){var r=i[o];if(r)for(n in r)r.hasOwnProperty(n)&&void 0!==r[n]&&(t||!1===e.hasOwnProperty(n))&&(e[n]=r[n])}return e}var i=!1;try{var o=document.createElement("div"),r=document.createTextNode(" ");o.appendChild(r),i=o.contains(r)}catch(t){}var s={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),isEdge:null!==/Edge\/\d+/.exec(navigator.userAgent),isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:e.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(t){return!!(s.isMac&&t.metaKey||!s.isMac&&t.ctrlKey)},isKey:function(t,e){var n=s.getKeyCode(t);return!1===Array.isArray(e)?n===e:-1!==e.indexOf(n)},getKeyCode:function(t){var e=t.which;return null===e&&(e=null!==t.charCode?t.charCode:t.keyCode),e},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var t=[!0].concat(Array.prototype.slice.call(arguments));return n.apply(this,t)},defaults:function(){var t=[!1].concat(Array.prototype.slice.call(arguments));return n.apply(this,t)},createLink:function(t,e,n,i){var o=t.createElement("a");return s.moveTextRangeIntoElement(e[0],e[e.length-1],o),o.setAttribute("href",n),i&&("_blank"===i&&o.setAttribute("rel","noopener noreferrer"),o.setAttribute("target",i)),o},findOrCreateMatchingTextNodes:function(t,e,n){for(var i=t.createTreeWalker(e,NodeFilter.SHOW_ALL,null,!1),o=[],r=0,a=!1,l=null,c=null;null!==(l=i.nextNode());)if(!(l.nodeType>3))if(3===l.nodeType){if(!a&&n.start<r+l.nodeValue.length&&(a=!0,c=s.splitStartNodeIfNeeded(l,n.start,r)),a&&s.splitEndNodeIfNeeded(l,c,n.end,r),a&&r===n.end)break;if(a&&r>n.end+1)throw new Error("PerformLinking overshot the target!");a&&o.push(c||l),r+=l.nodeValue.length,null!==c&&(r+=c.nodeValue.length,i.nextNode()),c=null}else"img"===l.tagName.toLowerCase()&&(!a&&n.start<=r&&(a=!0),a&&o.push(l));return o},splitStartNodeIfNeeded:function(t,e,n){return e!==n?t.splitText(e-n):null},splitEndNodeIfNeeded:function(t,e,n,i){var o,r;o=i+t.nodeValue.length+(e?e.nodeValue.length:0)-1,r=n-i-(e?t.nodeValue.length:0),o>=n&&i!==o&&0!==r&&(e||t).splitText(r)},splitByBlockElements:function(e){if(3!==e.nodeType&&1!==e.nodeType)return[];var n=[],i=t.util.blockContainerElementNames.join(",");if(3===e.nodeType||0===e.querySelectorAll(i).length)return[e];for(var o=0;o<e.childNodes.length;o++){var r=e.childNodes[o];if(3===r.nodeType)n.push(r);else if(1===r.nodeType){var s=r.querySelectorAll(i);0===s.length?n.push(r):n=n.concat(t.util.splitByBlockElements(r))}}return n},findAdjacentTextNodeWithContent:function(t,e,n){var i,o=!1,r=n.createNodeIterator(t,NodeFilter.SHOW_TEXT,null,!1);for(i=r.nextNode();i;){if(i===e)o=!0;else if(o&&3===i.nodeType&&i.nodeValue&&i.nodeValue.trim().length>0)break;i=r.nextNode()}return i},findPreviousSibling:function(t){if(!t||s.isMediumEditorElement(t))return!1;for(var e=t.previousSibling;!e&&!s.isMediumEditorElement(t.parentNode);)t=t.parentNode,e=t.previousSibling;return e},isDescendant:function(t,e,n){if(!t||!e)return!1;if(t===e)return!!n;if(1!==t.nodeType)return!1;if(i||3!==e.nodeType)return t.contains(e);for(var o=e.parentNode;null!==o;){if(o===t)return!0;o=o.parentNode}return!1},isElement:function(t){return!(!t||1!==t.nodeType)},throttle:function(t,e){var n,i,o,r=null,s=0,a=function(){s=Date.now(),r=null,o=t.apply(n,i),r||(n=i=null)};return e||0===e||(e=50),function(){var l=Date.now(),c=e-(l-s);return n=this,i=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),s=l,o=t.apply(n,i),r||(n=i=null)):r||(r=setTimeout(a,c)),o}},traverseUp:function(t,e){if(!t)return!1;do{if(1===t.nodeType){if(e(t))return t;if(s.isMediumEditorElement(t))return!1}t=t.parentNode}while(t);return!1},htmlEntities:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(e,n){var i,o,r,a,l,c,u,h=!1,d=["insertHTML",!1,n];if(!t.util.isEdge&&e.queryCommandSupported("insertHTML"))try{return e.execCommand.apply(e,d)}catch(t){}if(i=e.getSelection(),i.rangeCount){if(o=i.getRangeAt(0),u=o.commonAncestorContainer,s.isMediumEditorElement(u)&&!u.firstChild)o.selectNode(u.appendChild(e.createTextNode("")));else if(3===u.nodeType&&0===o.startOffset&&o.endOffset===u.nodeValue.length||3!==u.nodeType&&u.innerHTML===o.toString()){for(;!s.isMediumEditorElement(u)&&u.parentNode&&1===u.parentNode.childNodes.length&&!s.isMediumEditorElement(u.parentNode);)u=u.parentNode;o.selectNode(u)}for(o.deleteContents(),r=e.createElement("div"),r.innerHTML=n,a=e.createDocumentFragment();r.firstChild;)l=r.firstChild,c=a.appendChild(l);o.insertNode(a),c&&(o=o.cloneRange(),o.setStartAfter(c),o.collapse(!0),t.selection.selectRange(e,o)),h=!0}return e.execCommand.callListeners&&e.execCommand.callListeners(d,h),h},execFormatBlock:function(e,n){var i,o=s.getTopBlockContainer(t.selection.getSelectionStart(e));if("blockquote"===n){if(o&&(i=Array.prototype.slice.call(o.childNodes),i.some(function(t){return s.isBlockContainer(t)})))return e.execCommand("outdent",!1,null);if(s.isIE)return e.execCommand("indent",!1,n)}if(o&&n===o.nodeName.toLowerCase()&&(n="p"),s.isIE&&(n="<"+n+">"),o&&"blockquote"===o.nodeName.toLowerCase()){if(s.isIE&&"<p>"===n)return e.execCommand("outdent",!1,n);if((s.isFF||s.isEdge)&&"p"===n)return i=Array.prototype.slice.call(o.childNodes),i.some(function(t){return!s.isBlockContainer(t)})&&e.execCommand("formatBlock",!1,n),e.execCommand("outdent",!1,n)}return e.execCommand("formatBlock",!1,n)},setTargetBlank:function(t,e){var n,i=e||!1;if("a"===t.nodeName.toLowerCase())t.target="_blank",t.rel="noopener noreferrer";else for(t=t.getElementsByTagName("a"),n=0;n<t.length;n+=1)!1!==i&&i!==t[n].attributes.href.value||(t[n].target="_blank",t[n].rel="noopener noreferrer")},removeTargetBlank:function(t,e){var n;if("a"===t.nodeName.toLowerCase())t.removeAttribute("target"),t.removeAttribute("rel");else for(t=t.getElementsByTagName("a"),n=0;n<t.length;n+=1)e===t[n].attributes.href.value&&(t[n].removeAttribute("target"),t[n].removeAttribute("rel"))},addClassToAnchors:function(t,e){var n,i,o=e.split(" ");if("a"===t.nodeName.toLowerCase())for(i=0;i<o.length;i+=1)t.classList.add(o[i]);else{var r=t.getElementsByTagName("a");if(0===r.length){var a=s.getClosestTag(t,"a");t=a?[a]:[]}else t=r;for(n=0;n<t.length;n+=1)for(i=0;i<o.length;i+=1)t[n].classList.add(o[i])}},isListItem:function(t){if(!t)return!1;if("li"===t.nodeName.toLowerCase())return!0;for(var e=t.parentNode,n=e.nodeName.toLowerCase();"li"===n||!s.isBlockContainer(e)&&"div"!==n;){if("li"===n)return!0;if(!(e=e.parentNode))return!1;n=e.nodeName.toLowerCase()}return!1},cleanListDOM:function(e,n){if("li"===n.nodeName.toLowerCase()){var i=n.parentElement;"p"===i.parentElement.nodeName.toLowerCase()&&(s.unwrap(i.parentElement,e),t.selection.moveCursor(e,n.firstChild,n.firstChild.textContent.length))}},splitOffDOMTree:function(t,e,n){for(var i=e,o=null,r=!n;i!==t;){var s,a=i.parentNode,l=a.cloneNode(!1),c=r?i:a.firstChild;for(o&&(r?l.appendChild(o):s=o),o=l;c;){var u=c.nextSibling;c===i?(c.hasChildNodes()?c=c.cloneNode(!1):c.parentNode.removeChild(c),c.textContent&&o.appendChild(c),c=r?u:null):(c.parentNode.removeChild(c),(c.hasChildNodes()||c.textContent)&&o.appendChild(c),c=u)}s&&o.appendChild(s),i=a}return o},moveTextRangeIntoElement:function(t,e,n){if(!t||!e)return!1;var i=s.findCommonRoot(t,e);if(!i)return!1;if(e===t){var o=t.parentNode,r=t.nextSibling;return o.removeChild(t),n.appendChild(t),r?o.insertBefore(n,r):o.appendChild(n),n.hasChildNodes()}for(var a,l,c,u=[],h=0;h<i.childNodes.length;h++)if(c=i.childNodes[h],a){if(s.isDescendant(c,e,!0)){l=c;break}u.push(c)}else s.isDescendant(c,t,!0)&&(a=c);var d=l.nextSibling,f=i.ownerDocument.createDocumentFragment();return a===t?(a.parentNode.removeChild(a),f.appendChild(a)):f.appendChild(s.splitOffDOMTree(a,t)),u.forEach(function(t){t.parentNode.removeChild(t),f.appendChild(t)}),l===e?(l.parentNode.removeChild(l),f.appendChild(l)):f.appendChild(s.splitOffDOMTree(l,e,!0)),n.appendChild(f),l.parentNode===i?i.insertBefore(n,l):d?i.insertBefore(n,d):i.appendChild(n),n.hasChildNodes()},depthOfNode:function(t){for(var e=0,n=t;null!==n.parentNode;)n=n.parentNode,e++;return e},findCommonRoot:function(t,e){for(var n=s.depthOfNode(t),i=s.depthOfNode(e),o=t,r=e;n!==i;)n>i?(o=o.parentNode,n-=1):(r=r.parentNode,i-=1);for(;o!==r;)o=o.parentNode,r=r.parentNode;return o},isElementAtBeginningOfBlock:function(t){for(var e,n;!s.isBlockContainer(t)&&!s.isMediumEditorElement(t);){for(n=t;n=n.previousSibling;)if(e=3===n.nodeType?n.nodeValue:n.textContent,e.length>0)return!1;t=t.parentNode}return!0},isMediumEditorElement:function(t){return t&&t.getAttribute&&!!t.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(t){return s.traverseUp(t,function(t){return s.isMediumEditorElement(t)})},isBlockContainer:function(t){return t&&3!==t.nodeType&&-1!==s.blockContainerElementNames.indexOf(t.nodeName.toLowerCase())},getClosestBlockContainer:function(t){return s.traverseUp(t,function(t){return s.isBlockContainer(t)||s.isMediumEditorElement(t)})},getTopBlockContainer:function(t){var e=!!s.isBlockContainer(t)&&t;return s.traverseUp(t,function(t){return s.isBlockContainer(t)&&(e=t),!(e||!s.isMediumEditorElement(t))&&(e=t,!0)}),e},getFirstSelectableLeafNode:function(t){for(;t&&t.firstChild;)t=t.firstChild;if(t=s.traverseUp(t,function(t){return-1===s.emptyElementNames.indexOf(t.nodeName.toLowerCase())}),"table"===t.nodeName.toLowerCase()){var e=t.querySelector("th, td");e&&(t=e)}return t},getFirstTextNode:function(t){return s.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),s._getFirstTextNode(t)},_getFirstTextNode:function(t){if(3===t.nodeType)return t;for(var e=0;e<t.childNodes.length;e++){var n=s._getFirstTextNode(t.childNodes[e]);if(null!==n)return n}return null},ensureUrlHasProtocol:function(t){return-1===t.indexOf("://")?"http://"+t:t},warn:function(){void 0!==e.console&&"function"==typeof e.console.warn&&e.console.warn.apply(e.console,arguments)},deprecated:function(t,e,n){var i=t+" is deprecated, please use "+e+" instead.";n&&(i+=" Will be removed in "+n),s.warn(i)},deprecatedMethod:function(t,e,n,i){s.deprecated(t,e,i),"function"==typeof this[e]&&this[e].apply(this,n)},cleanupAttrs:function(t,e){e.forEach(function(e){t.removeAttribute(e)})},cleanupTags:function(t,e){-1!==e.indexOf(t.nodeName.toLowerCase())&&t.parentNode.removeChild(t)},unwrapTags:function(e,n){-1!==n.indexOf(e.nodeName.toLowerCase())&&t.util.unwrap(e,document)},getClosestTag:function(t,e){return s.traverseUp(t,function(t){return t.nodeName.toLowerCase()===e.toLowerCase()})},unwrap:function(t,e){for(var n=e.createDocumentFragment(),i=Array.prototype.slice.call(t.childNodes),o=0;o<i.length;o++)n.appendChild(i[o]);n.childNodes.length?t.parentNode.replaceChild(n,t):t.parentNode.removeChild(t)},guid:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}};t.util=s}(window),function(){var e=function(e){t.util.extend(this,e)};e.extend=function(e){var n,i=this;n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return i.apply(this,arguments)},t.util.extend(n,i);var o=function(){this.constructor=n};return o.prototype=i.prototype,n.prototype=new o,e&&t.util.extend(n.prototype,e),n},e.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(t){return this.base.options[t]}},["execAction","on","off","subscribe","trigger"].forEach(function(t){e.prototype[t]=function(){return this.base[t].apply(this.base,arguments)}}),t.Extension=e}(),function(){function e(e){return t.util.isBlockContainer(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var n={findMatchingSelectionParent:function(e,n){var i,o,r=n.getSelection();return 0!==r.rangeCount&&(i=r.getRangeAt(0),o=i.commonAncestorContainer,t.util.traverseUp(o,e))},getSelectionElement:function(e){return this.findMatchingSelectionParent(function(e){return t.util.isMediumEditorElement(e)},e)},exportSelection:function(t,e){if(!t)return null;var n=null,i=e.getSelection();if(i.rangeCount>0){var o,r=i.getRangeAt(0),s=r.cloneRange();s.selectNodeContents(t),s.setEnd(r.startContainer,r.startOffset),o=s.toString().length,n={start:o,end:o+r.toString().length},this.doesRangeStartWithImages(r,e)&&(n.startsWithImage=!0);var a=this.getTrailingImageCount(t,n,r.endContainer,r.endOffset);if(a&&(n.trailingImageCount=a),0!==o){var l=this.getIndexRelativeToAdjacentEmptyBlocks(e,t,r.startContainer,r.startOffset);-1!==l&&(n.emptyBlocksIndex=l)}}return n},importSelection:function(t,e,n,i){if(t&&e){var o=n.createRange();o.setStart(e,0),o.collapse(!0);var r,s=e,a=[],l=0,c=!1,u=!1,h=0,d=!1,f=!1,p=null;for((i||t.startsWithImage||void 0!==t.emptyBlocksIndex)&&(f=!0);!d&&s;)if(s.nodeType>3)s=a.pop();else{if(3!==s.nodeType||u){if(t.trailingImageCount&&u&&("img"===s.nodeName.toLowerCase()&&h++,h===t.trailingImageCount)){for(var m=0;s.parentNode.childNodes[m]!==s;)m++;o.setEnd(s.parentNode,m+1),d=!0}if(!d&&1===s.nodeType)for(var g=s.childNodes.length-1;g>=0;)a.push(s.childNodes[g]),g-=1}else r=l+s.length,!c&&t.start>=l&&t.start<=r&&(f||t.start<r?(o.setStart(s,t.start-l),c=!0):p=s),c&&t.end>=l&&t.end<=r&&(t.trailingImageCount?u=!0:(o.setEnd(s,t.end-l),d=!0)),l=r;d||(s=a.pop())}!c&&p&&(o.setStart(p,p.length),o.setEnd(p,p.length)),void 0!==t.emptyBlocksIndex&&(o=this.importSelectionMoveCursorPastBlocks(n,e,t.emptyBlocksIndex,o)),i&&(o=this.importSelectionMoveCursorPastAnchor(t,o)),this.selectRange(n,o)}},importSelectionMoveCursorPastAnchor:function(e,n){var i=function(t){return"a"===t.nodeName.toLowerCase()};if(e.start===e.end&&3===n.startContainer.nodeType&&n.startOffset===n.startContainer.nodeValue.length&&t.util.traverseUp(n.startContainer,i)){for(var o=n.startContainer,r=n.startContainer.parentNode;null!==r&&"a"!==r.nodeName.toLowerCase();)r.childNodes[r.childNodes.length-1]!==o?r=null:(o=r,r=r.parentNode);if(null!==r&&"a"===r.nodeName.toLowerCase()){for(var s=null,a=0;null===s&&a<r.parentNode.childNodes.length;a++)r.parentNode.childNodes[a]===r&&(s=a);n.setStart(r.parentNode,s+1),n.collapse(!0)}}return n},importSelectionMoveCursorPastBlocks:function(n,i,o,r){var s,a,l=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,e,!1),c=r.startContainer,u=0;for(o=o||1,s=3===c.nodeType&&t.util.isBlockContainer(c.previousSibling)?c.previousSibling:t.util.getClosestBlockContainer(c);l.nextNode();)if(a){if(a=l.currentNode,++u===o)break;if(a.textContent.length>0)break}else s===l.currentNode&&(a=l.currentNode);return a||(a=s),r.setStart(t.util.getFirstSelectableLeafNode(a),0),r},getIndexRelativeToAdjacentEmptyBlocks:function(n,i,o,r){if(o.textContent.length>0&&r>0)return-1;var s=o;if(3!==s.nodeType&&(s=o.childNodes[r]),s){if(!t.util.isElementAtBeginningOfBlock(s))return-1;var a=t.util.findPreviousSibling(s);if(!a)return-1;if(a.nodeValue)return-1}for(var l=t.util.getClosestBlockContainer(o),c=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,e,!1),u=0;c.nextNode();){var h=""===c.currentNode.textContent;if((h||u>0)&&(u+=1),c.currentNode===l)return u;h||(u=0)}return u},doesRangeStartWithImages:function(t,e){if(0!==t.startOffset||1!==t.startContainer.nodeType)return!1;if("img"===t.startContainer.nodeName.toLowerCase())return!0;var n=t.startContainer.querySelector("img");if(!n)return!1;for(var i=e.createTreeWalker(t.startContainer,NodeFilter.SHOW_ALL,null,!1);i.nextNode();){var o=i.currentNode;if(o===n)break;if(o.nodeValue)return!1}return!0},getTrailingImageCount:function(t,e,n,i){if(0===i||1!==n.nodeType)return 0;if("img"!==n.nodeName.toLowerCase()&&!n.querySelector("img"))return 0;for(var o=n.childNodes[i-1];o.hasChildNodes();)o=o.lastChild;for(var r,s=t,a=[],l=0,c=!1,u=!1,h=!1,d=0;!h&&s;)if(s.nodeType>3)s=a.pop();else{if(3!==s.nodeType||u){if("img"===s.nodeName.toLowerCase()&&d++,s===o)h=!0;else if(1===s.nodeType)for(var f=s.childNodes.length-1;f>=0;)a.push(s.childNodes[f]),f-=1}else d=0,r=l+s.length,!c&&e.start>=l&&e.start<=r&&(c=!0),c&&e.end>=l&&e.end<=r&&(u=!0),l=r;h||(s=a.pop())}return d},selectionContainsContent:function(t){var e=t.getSelection();if(!e||e.isCollapsed||!e.rangeCount)return!1;if(""!==e.toString().trim())return!0;var n=this.getSelectedParentElement(e.getRangeAt(0));return!(!n||!("img"===n.nodeName.toLowerCase()||1===n.nodeType&&n.querySelector("img")))},selectionInContentEditableFalse:function(t){var e,n=this.findMatchingSelectionParent(function(t){var n=t&&t.getAttribute("contenteditable");return"true"===n&&(e=!0),"#text"!==t.nodeName&&"false"===n},t);return!e&&n},getSelectionHtml:function(t){var e,n,i,o="",r=t.getSelection();if(r.rangeCount){for(i=t.createElement("div"),e=0,n=r.rangeCount;e<n;e+=1)i.appendChild(r.getRangeAt(e).cloneContents());o=i.innerHTML}return o},getCaretOffsets:function(t,e){var n,i;return e||(e=window.getSelection().getRangeAt(0)),n=e.cloneRange(),i=e.cloneRange(),n.selectNodeContents(t),n.setEnd(e.endContainer,e.endOffset),i.selectNodeContents(t),i.setStart(e.endContainer,e.endOffset),{left:n.toString().length,right:i.toString().length}},rangeSelectsSingleNode:function(t){var e=t.startContainer;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===t.startOffset+1},getSelectedParentElement:function(t){return t?this.rangeSelectsSingleNode(t)&&3!==t.startContainer.childNodes[t.startOffset].nodeType?t.startContainer.childNodes[t.startOffset]:3===t.startContainer.nodeType?t.startContainer.parentNode:t.startContainer:null},getSelectedElements:function(t){var e,n,i,o=t.getSelection();if(!o.rangeCount||o.isCollapsed||!o.getRangeAt(0).commonAncestorContainer)return[];if(e=o.getRangeAt(0),3===e.commonAncestorContainer.nodeType){for(n=[],i=e.commonAncestorContainer;i.parentNode&&1===i.parentNode.childNodes.length;)n.push(i.parentNode),i=i.parentNode;return n}return[].filter.call(e.commonAncestorContainer.getElementsByTagName("*"),function(t){return"function"!=typeof o.containsNode||o.containsNode(t,!0)})},selectNode:function(t,e){var n=e.createRange();n.selectNodeContents(t),this.selectRange(e,n)},select:function(t,e,n,i,o){var r=t.createRange();return r.setStart(e,n),i?r.setEnd(i,o):r.collapse(!0),this.selectRange(t,r),r},clearSelection:function(t,e){e?t.getSelection().collapseToStart():t.getSelection().collapseToEnd()},moveCursor:function(t,e,n){this.select(t,e,n)},getSelectionRange:function(t){var e=t.getSelection();return 0===e.rangeCount?null:e.getRangeAt(0)},selectRange:function(t,e){var n=t.getSelection();n.removeAllRanges(),n.addRange(e)},getSelectionStart:function(t){var e=t.getSelection().anchorNode;return e&&3===e.nodeType?e.parentNode:e}};t.selection=n}(),function(){function e(e,n){return!!e&&e.some(function(e){if("function"!=typeof e.getInteractionElements)return!1;var i=e.getInteractionElements();return!!i&&(Array.isArray(i)||(i=[i]),i.some(function(e){return t.util.isDescendant(e,n,!0)}))})}var n=function(t){this.base=t,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};n.prototype={InputEventOnContenteditableSupported:!t.util.isIE&&!t.util.isEdge,attachDOMEvent:function(e,n,i,o){var r=this.base.options.contentWindow,s=this.base.options.ownerDocument;e=t.util.isElement(e)||[r,s].indexOf(e)>-1?[e]:e,Array.prototype.forEach.call(e,function(t){t.addEventListener(n,i,o),this.events.push([t,n,i,o])}.bind(this))},detachDOMEvent:function(e,n,i,o){var r,s,a=this.base.options.contentWindow,l=this.base.options.ownerDocument;e&&(e=t.util.isElement(e)||[a,l].indexOf(e)>-1?[e]:e,Array.prototype.forEach.call(e,function(t){-1!==(r=this.indexOfListener(t,n,i,o))&&(s=this.events.splice(r,1)[0],s[0].removeEventListener(s[1],s[2],s[3]))}.bind(this)))},indexOfListener:function(t,e,n,i){var o,r,s;for(o=0,r=this.events.length;o<r;o+=1)if(s=this.events[o],s[0]===t&&s[1]===e&&s[2]===n&&s[3]===i)return o;return-1},detachAllDOMEvents:function(){for(var t=this.events.pop();t;)t[0].removeEventListener(t[1],t[2],t[3]),t=this.events.pop()},detachAllEventsFromElement:function(t){for(var e=this.events.filter(function(e){return e&&e[0].getAttribute&&e[0].getAttribute("medium-editor-index")===t.getAttribute("medium-editor-index")}),n=0,i=e.length;n<i;n++){var o=e[n];this.detachDOMEvent(o[0],o[1],o[2],o[3])}},attachAllEventsToElement:function(t){this.listeners.editableInput&&(this.contentCache[t.getAttribute("medium-editor-index")]=t.innerHTML),this.eventsCache&&this.eventsCache.forEach(function(e){this.attachDOMEvent(t,e.name,e.handler.bind(this))},this)},enableCustomEvent:function(t){void 0!==this.disabledEvents[t]&&delete this.disabledEvents[t]},disableCustomEvent:function(t){this.disabledEvents[t]=!0},attachCustomEvent:function(t,e){this.setupListener(t),this.customEvents[t]||(this.customEvents[t]=[]),this.customEvents[t].push(e)},detachCustomEvent:function(t,e){var n=this.indexOfCustomListener(t,e);-1!==n&&this.customEvents[t].splice(n,1)},indexOfCustomListener:function(t,e){return this.customEvents[t]&&this.customEvents[t].length?this.customEvents[t].indexOf(e):-1},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(t,e,n){this.customEvents[t]&&!this.disabledEvents[t]&&this.customEvents[t].forEach(function(t){t(e,n)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(t){t.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(t){this.handleDocumentExecCommand(t)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var t=this.options.ownerDocument;if(this.execCommandListener&&t.execCommand.listeners){var e=t.execCommand.listeners.indexOf(this.execCommandListener);-1!==e&&t.execCommand.listeners.splice(e,1),t.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var t=this.options.ownerDocument;if(!t.execCommand.listeners){var e=function(e,n){t.execCommand.listeners&&t.execCommand.listeners.forEach(function(t){t({command:e[0],value:e[2],args:e,result:n})})},n=function(){var n=t.execCommand.orig.apply(this,arguments);if(!t.execCommand.listeners)return n;var i=Array.prototype.slice.call(arguments);return e(i,n),n};n.orig=t.execCommand,n.listeners=[],n.callListeners=e,t.execCommand=n}},unwrapExecCommand:function(){var t=this.options.ownerDocument;t.execCommand.orig&&(t.execCommand=t.execCommand.orig)},setupListener:function(t){if(!this.listeners[t]){switch(t){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach(function(t){this.contentCache[t.getAttribute("medium-editor-index")]=t.innerHTML},this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":case"editableKeydownEnter":case"editableKeydownTab":case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste)}this.listeners[t]=!0}},attachToEachElement:function(t,e){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach(function(n){this.attachDOMEvent(n,t,e.bind(this))},this),this.eventsCache.push({name:t,handler:e})},cleanupElement:function(t){var e=t.getAttribute("medium-editor-index");e&&(this.detachAllEventsFromElement(t),this.contentCache&&delete this.contentCache[e])},focusElement:function(t){t.focus(),this.updateFocus(t,{target:t,type:"focus"})},updateFocus:function(n,i){var o,r=this.base.getFocusedElement();r&&"click"===i.type&&this.lastMousedownTarget&&(t.util.isDescendant(r,this.lastMousedownTarget,!0)||e(this.base.extensions,this.lastMousedownTarget))&&(o=r),o||this.base.elements.some(function(e){return!o&&t.util.isDescendant(e,n,!0)&&(o=e),!!o},this);var s=!t.util.isDescendant(r,n,!0)&&!e(this.base.extensions,n);o!==r&&(r&&s&&(r.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",i,r)),o&&(o.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",i,o))),s&&this.triggerCustomEvent("externalInteraction",i)},updateInput:function(t,e){if(this.contentCache){var n=t.getAttribute("medium-editor-index"),i=t.innerHTML;i!==this.contentCache[n]&&this.triggerCustomEvent("editableInput",e,t),this.contentCache[n]=i}},handleDocumentSelectionChange:function(e){if(e.currentTarget&&e.currentTarget.activeElement){var n,i=e.currentTarget.activeElement;this.base.elements.some(function(e){return!!t.util.isDescendant(e,i,!0)&&(n=e,!0)},this),n&&this.updateInput(n,{target:i,currentTarget:n})}},handleDocumentExecCommand:function(){var t=this.base.getFocusedElement();t&&this.updateInput(t,{target:t,currentTarget:t})},handleBodyClick:function(t){this.updateFocus(t.target,t)},handleBodyFocus:function(t){this.updateFocus(t.target,t)},handleBodyMousedown:function(t){this.lastMousedownTarget=t.target},handleInput:function(t){this.updateInput(t.currentTarget,t)},handleClick:function(t){this.triggerCustomEvent("editableClick",t,t.currentTarget)},handleBlur:function(t){this.triggerCustomEvent("editableBlur",t,t.currentTarget)},handleKeypress:function(t){if(this.triggerCustomEvent("editableKeypress",t,t.currentTarget),this.keypressUpdateInput){var e={target:t.target,currentTarget:t.currentTarget};setTimeout(function(){this.updateInput(e.currentTarget,e)}.bind(this),0)}},handleKeyup:function(t){this.triggerCustomEvent("editableKeyup",t,t.currentTarget)},handleMouseover:function(t){this.triggerCustomEvent("editableMouseover",t,t.currentTarget)},handleDragging:function(t){this.triggerCustomEvent("editableDrag",t,t.currentTarget)},handleDrop:function(t){this.triggerCustomEvent("editableDrop",t,t.currentTarget)},handlePaste:function(t){this.triggerCustomEvent("editablePaste",t,t.currentTarget)},handleKeydown:function(e){return this.triggerCustomEvent("editableKeydown",e,e.currentTarget),t.util.isKey(e,t.util.keyCode.SPACE)?this.triggerCustomEvent("editableKeydownSpace",e,e.currentTarget):t.util.isKey(e,t.util.keyCode.ENTER)||e.ctrlKey&&t.util.isKey(e,t.util.keyCode.M)?this.triggerCustomEvent("editableKeydownEnter",e,e.currentTarget):t.util.isKey(e,t.util.keyCode.TAB)?this.triggerCustomEvent("editableKeydownTab",e,e.currentTarget):t.util.isKey(e,[t.util.keyCode.DELETE,t.util.keyCode.BACKSPACE])?this.triggerCustomEvent("editableKeydownDelete",e,e.currentTarget):void 0}},t.Events=n}(),function(){var e=t.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(n){e.isBuiltInButton(n)?t.Extension.call(this,this.defaults[n]):t.Extension.call(this,n)},init:function(){t.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return"function"==typeof this.action?this.action(this.base.options):this.action},getAria:function(){return"function"==typeof this.aria?this.aria(this.base.options):this.aria},getTagNames:function(){return"function"==typeof this.tagNames?this.tagNames(this.base.options):this.tagNames},createButton:function(){var t=this.document.createElement("button"),e=this.contentDefault,n=this.getAria(),i=this.getEditorOption("buttonLabels");return t.classList.add("medium-editor-action"),t.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(e){t.classList.add(e)}),t.setAttribute("data-action",this.getAction()),n&&(t.setAttribute("title",n),t.setAttribute("aria-label",n)),this.attrs&&Object.keys(this.attrs).forEach(function(e){t.setAttribute(e,this.attrs[e])},this),"fontawesome"===i&&this.contentFA&&(e=this.contentFA),t.innerHTML=e,t},handleClick:function(t){t.preventDefault(),t.stopPropagation();var e=this.getAction();e&&this.execAction(e)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var t=null;return this.useQueryState&&(t=this.base.queryCommandState(this.getAction())),t},isAlreadyApplied:function(t){var e,n,i=!1,o=this.getTagNames();return!1===this.knownState||!0===this.knownState?this.knownState:(o&&o.length>0&&(i=-1!==o.indexOf(t.nodeName.toLowerCase())),!i&&this.style&&(e=this.style.value.split("|"),n=this.window.getComputedStyle(t,null).getPropertyValue(this.style.prop),e.forEach(function(t){this.knownState||((i=-1!==n.indexOf(t))||"text-decoration"!==this.style.prop)&&(this.knownState=i)},this)),i)}});e.isBuiltInButton=function(e){return"string"==typeof e&&t.extensions.button.prototype.defaults.hasOwnProperty(e)},t.extensions.button=e}(),function(){t.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},html:{name:"html",action:"html",aria:"evaluate html",tagNames:["iframe","object"],contentDefault:"<b>html</b>",contentFA:'<i class="fa fa-code"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}}}(),function(){var e=t.extensions.button.extend({init:function(){t.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return!!this.hasForm&&this.getForm().classList.contains(this.activeClass)},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var t=this.base.getExtensionByName("toolbar");t&&t.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var t=this.base.getExtensionByName("toolbar");t&&t.hideToolbarDefaultActions()},setToolbarPosition:function(){var t=this.base.getExtensionByName("toolbar");t&&t.setToolbarPosition()}});t.extensions.form=e}(),function(){var e=t.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){t.extensions.form.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(e){e.preventDefault(),e.stopPropagation();var n=t.selection.getSelectionRange(this.document);return"a"===n.startContainer.nodeName.toLowerCase()||"a"===n.endContainer.nodeName.toLowerCase()||t.util.getClosestTag(t.selection.getSelectedParentElement(n),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(e){t.util.isKey(e,t.util.keyCode.K)&&t.util.isMetaCtrlKey(e)&&!e.shiftKey&&this.handleClick(e)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var t=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return t.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),t.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&t.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">','<label for="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">',this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&t.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),t.join("")},isDisplayed:function(){return t.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){t.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(e){var n=this.getInput(),i=this.getAnchorTargetCheckbox(),o=this.getAnchorButtonCheckbox();if(e=e||{value:""},"string"==typeof e&&(e={value:e}),this.base.saveSelection(),this.hideToolbarDefaultActions(),t.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),n.value=e.value,n.focus(),i&&(i.checked="_blank"===e.target),o){var r=e.buttonClass?e.buttonClass.split(" "):[];o.checked=-1!==r.indexOf(this.customClassOption)}},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},getFormOpts:function(){var t=this.getAnchorTargetCheckbox(),e=this.getAnchorButtonCheckbox(),n={value:this.getInput().value.trim()};return this.linkValidation&&(n.value=this.checkLinkFormat(n.value)),n.target="_self",t&&t.checked&&(n.target="_blank"),e&&e.checked&&(n.buttonClass=this.customClassOption),n},doFormSave:function(){var t=this.getFormOpts();this.completeFormSave(t)},completeFormSave:function(t){this.base.restoreSelection(),this.execAction(this.action,t),this.base.checkSelection()},ensureEncodedUri:function(t){return t===decodeURI(t)?encodeURI(t):t},ensureEncodedUriComponent:function(t){return t===decodeURIComponent(t)?encodeURIComponent(t):t},ensureEncodedParam:function(t){var e=t.split("="),n=e[0],i=e[1];return n+(void 0===i?"":"="+this.ensureEncodedUriComponent(i))},ensureEncodedQuery:function(t){return t.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(t){var e=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i,n=e.test(t),i="",o=/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/,r=t.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/),s=r[1],a=r[2],l=r[3];if(o.test(t))return"tel:"+t;if(!n){var c=s.split("/")[0];(c.match(/.+(\.|:).+/)||"localhost"===c)&&(i="http://")}return i+this.ensureEncodedUri(s)+(void 0===a?"":"?"+this.ensureEncodedQuery(a))+(void 0===l?"":"#"+l)},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(t){var e=t.querySelector(".medium-editor-toolbar-close"),n=t.querySelector(".medium-editor-toolbar-save"),i=t.querySelector(".medium-editor-toolbar-input");this.on(t,"click",this.handleFormClick.bind(this)),this.on(i,"keyup",this.handleTextboxKeyup.bind(this)),this.on(e,"click",this.handleCloseClick.bind(this)),this.on(n,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var t=this.document,e=t.createElement("div");return e.className="medium-editor-toolbar-form",e.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),e.innerHTML=this.getTemplate(),this.attachFormEvents(e),e},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(e){if(e.keyCode===t.util.keyCode.ENTER)return e.preventDefault(),void this.doFormSave();e.keyCode===t.util.keyCode.ESCAPE&&(e.preventDefault(),this.doFormCancel())},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}});t.extensions.anchor=e}(),function(){var e=t.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var t=this.document.createElement("div");return t.id="medium-editor-anchor-preview-"+this.getEditorId(),t.className="medium-editor-anchor-preview",t.innerHTML=this.getTemplate(),this.on(t,"click",this.handleClick.bind(this)),t},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview&&this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(t){return!(!this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")&&!t.getAttribute("data-disable-preview"))||(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=t.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=t.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=t,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(t){t=t||this.activeAnchor;var e,n,i,o,r,s=this.window.innerWidth,a=this.anchorPreview.offsetHeight,l=t.getBoundingClientRect(),c=this.diffLeft,u=this.diffTop,h=this.getEditorOption("elementsContainer"),d=["absolute","fixed"].indexOf(window.getComputedStyle(h).getPropertyValue("position"))>-1,f={};e=this.anchorPreview.offsetWidth/2;var p=this.base.getExtensionByName("toolbar");p&&(c=p.diffLeft,u=p.diffTop),n=c-e,d?(o=h.getBoundingClientRect(),["top","left"].forEach(function(t){f[t]=l[t]-o[t]}),f.width=l.width,f.height=l.height,l=f,s=o.width,r=h.scrollTop):r=this.window.pageYOffset,i=l.left+l.width/2,r+=a+l.top+l.height-u-this.anchorPreview.offsetHeight,this.anchorPreview.style.top=Math.round(r)+"px",this.anchorPreview.style.right="initial",i<e?(this.anchorPreview.style.left=n+e+"px",this.anchorPreview.style.right="initial"):s-i<e?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=n+i+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(t){var e=this.base.getExtensionByName("anchor"),n=this.activeAnchor;e&&n&&(t.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){if(n){var t={value:n.attributes.href.value,target:n.getAttribute("target"),buttonClass:n.getAttribute("class")};e.showForm(t),n=null}}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(e){var n=t.util.getClosestTag(e.target,"a");if(!1!==n){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(n.outerHTML)||/href=["']#\S+["']/.test(n.outerHTML)))return!0;var i=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&i&&i.isDisplayed&&i.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==n&&this.detachPreviewHandlers(),this.anchorToPreview=n,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(t){t.relatedTarget&&/anchor-preview/.test(t.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;(new Date).getTime()-this.lastOver>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});t.extensions.anchorPreview=e}(),function(){function e(e){return!t.util.getClosestTag(e,"a")}var n,i,o,r,s;n=[" ","\t","\n","\r"," "," "," "," "," ","\u2028","\u2029"],i="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",o="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+i+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?«»“”‘’])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+i+"))",r=new RegExp("^("+i+")$","i"),s=new RegExp(o,"gi");var a=t.Extension.extend({init:function(){t.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var t=0,e=0;e<this.window._mediumEditors.length;e++){var n=this.window._mediumEditors[e];null!==n&&void 0!==n.getExtensionByName("autoLink")&&t++}return 1===t},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(t,e){this.performLinking(e)},onKeypress:function(e){this.disableEventHandling||t.util.isKey(e,[t.util.keyCode.SPACE,t.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var t=this.base.exportSelection();this.performLinking(e.target)&&this.base.importSelection(t,!0)}catch(t){window.console&&window.console.error("Failed to perform linking",t),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(e){var n=t.util.splitByBlockElements(e),i=!1;0===n.length&&(n=[e]);for(var o=0;o<n.length;o++)i=this.removeObsoleteAutoLinkSpans(n[o])||i,i=this.performLinkingWithinElement(n[o])||i;return this.base.events.updateInput(e,{target:e,currentTarget:e}),i},removeObsoleteAutoLinkSpans:function(n){if(!n||3===n.nodeType)return!1;for(var i=n.querySelectorAll('span[data-auto-link="true"]'),o=!1,r=0;r<i.length;r++){var s=i[r].textContent;if(-1===s.indexOf("://")&&(s=t.util.ensureUrlHasProtocol(s)),i[r].getAttribute("data-href")!==s&&e(i[r])){o=!0;var a=s.replace(/\s+$/,"");if(i[r].getAttribute("data-href")===a){var l=s.length-a.length,c=t.util.splitOffDOMTree(i[r],this.splitTextBeforeEnd(i[r],l));i[r].parentNode.insertBefore(c,i[r].nextSibling)}else t.util.unwrap(i[r],this.document)}}return o},splitTextBeforeEnd:function(t,e){for(var n=this.document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1),i=!0;i;)i=null!==n.lastChild();for(var o,r,s;e>0&&null!==s;)o=n.currentNode,r=o.nodeValue,r.length>e?(s=o.splitText(r.length-e),e=0):(s=n.previousNode(),e-=r.length);return s},performLinkingWithinElement:function(e){for(var n=this.findLinkableText(e),i=0;i<n.length;i++){var o=t.util.findOrCreateMatchingTextNodes(this.document,e,n[i]);this.shouldNotLink(o)||this.createAutoLink(o,n[i].href)}return!1},shouldNotLink:function(e){for(var n=!1,i=0;i<e.length&&!1===n;i++)n=!!t.util.traverseUp(e[i],function(t){return"a"===t.nodeName.toLowerCase()||t.getAttribute&&"true"===t.getAttribute("data-auto-link")});return n},findLinkableText:function(t){for(var e=t.textContent,i=null,o=[];null!==(i=s.exec(e));){var a=!0,l=i.index+i[0].length;a=!(0!==i.index&&-1===n.indexOf(e[i.index-1])||l!==e.length&&-1===n.indexOf(e[l])),a=a&&(-1!==i[0].indexOf("/")||r.test(i[0].split(".").pop().split("?").shift())),a&&o.push({href:i[0],start:i.index,end:l})}return o},createAutoLink:function(e,n){n=t.util.ensureUrlHasProtocol(n);var i=t.util.createLink(this.document,e,n,this.getEditorOption("targetBlank")?"_blank":null),o=this.document.createElement("span");for(o.setAttribute("data-auto-link","true"),o.setAttribute("data-href",n),i.insertBefore(o,i.firstChild);i.childNodes.length>1;)o.appendChild(i.childNodes[1])}});t.extensions.autoLink=a}(),function(){function e(e){var i=t.util.getContainerEditorElement(e);Array.prototype.slice.call(i.parentElement.querySelectorAll("."+n)).forEach(function(t){t.classList.remove(n)})}var n="medium-editor-dragover",i=t.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){t.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy";var i=t.target.classList?t.target:t.target.parentElement;e(i),"dragover"===t.type&&i.classList.add(n)},handleDrop:function(t){t.preventDefault(),t.stopPropagation(),this.base.selectElement(t.target);var n=this.base.exportSelection();n.start=n.end,this.base.importSelection(n),t.dataTransfer.files&&Array.prototype.slice.call(t.dataTransfer.files).forEach(function(t){this.isAllowedFile(t)&&t.type.match("image")&&this.insertImageFile(t)},this),e(t.target)},isAllowedFile:function(t){return this.allowedTypes.some(function(e){return!!t.type.match(e)})},insertImageFile:function(e){if("function"==typeof FileReader){var n=new FileReader;n.readAsDataURL(e),n.addEventListener("load",function(e){var n=this.document.createElement("img");n.src=e.target.result,t.util.insertHTMLCommand(this.document,n.outerHTML)}.bind(this))}}});t.extensions.fileDragging=i}(),function(){var e=t.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){t.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach(function(t){var e=t.key.charCodeAt(0);this.keys[e]||(this.keys[e]=[]),this.keys[e].push(t)},this)},handleKeydown:function(e){var n=t.util.getKeyCode(e);if(this.keys[n]){var i=t.util.isMetaCtrlKey(e),o=!!e.shiftKey,r=!!e.altKey;this.keys[n].forEach(function(t){t.meta!==i||t.shift!==o||t.alt!==r&&void 0!==t.alt||(e.preventDefault(),e.stopPropagation(),"function"==typeof t.command?t.command.apply(this):!1!==t.command&&this.execAction(t.command))},this)}}});t.extensions.keyboardCommands=e}(),function(){var e=t.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){t.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(t){if(t.preventDefault(),t.stopPropagation(),!this.isDisplayed()){var e=this.document.queryCommandValue("fontName")+"";this.showForm(e)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(t){var e=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),e.value=t||"",e.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var t,e=this.document,n=e.createElement("div"),i=e.createElement("select"),o=e.createElement("a"),r=e.createElement("a");n.className="medium-editor-toolbar-form",n.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(n,"click",this.handleFormClick.bind(this));for(var s=0;s<this.fonts.length;s++)t=e.createElement("option"),t.innerHTML=this.fonts[s],t.value=this.fonts[s],i.appendChild(t);return i.className="medium-editor-toolbar-select",n.appendChild(i),this.on(i,"change",this.handleFontChange.bind(this)),r.setAttribute("href","#"),r.className="medium-editor-toobar-save",r.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",n.appendChild(r),this.on(r,"click",this.handleSaveClick.bind(this),!0),o.setAttribute("href","#"),o.className="medium-editor-toobar-close",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",n.appendChild(o),this.on(o,"click",this.handleCloseClick.bind(this)),n},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){t.selection.getSelectedElements(this.document).forEach(function(t){"font"===t.nodeName.toLowerCase()&&t.hasAttribute("face")&&t.removeAttribute("face")})},handleFontChange:function(){var t=this.getSelect().value;""===t?this.clearFontName():this.execAction("fontName",{value:t})},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}});t.extensions.fontName=e}(),function(){var e=t.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){t.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(t){if(t.preventDefault(),t.stopPropagation(),!this.isDisplayed()){var e=this.document.queryCommandValue("fontSize")+"";this.showForm(e)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(t){var e=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),e.value=t||"",e.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var t=this.document,e=t.createElement("div"),n=t.createElement("input"),i=t.createElement("a"),o=t.createElement("a");return e.className="medium-editor-toolbar-form",e.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(e,"click",this.handleFormClick.bind(this)),n.setAttribute("type","range"),n.setAttribute("min","1"),n.setAttribute("max","7"),n.className="medium-editor-toolbar-input",e.appendChild(n),this.on(n,"change",this.handleSliderChange.bind(this)),o.setAttribute("href","#"),o.className="medium-editor-toobar-save",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",e.appendChild(o),this.on(o,"click",this.handleSaveClick.bind(this),!0),i.setAttribute("href","#"),i.className="medium-editor-toobar-close",i.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",e.appendChild(i),this.on(i,"click",this.handleCloseClick.bind(this)),e},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){t.selection.getSelectedElements(this.document).forEach(function(t){"font"===t.nodeName.toLowerCase()&&t.hasAttribute("size")&&t.removeAttribute("size")})},handleSliderChange:function(){var t=this.getInput().value;"4"===t?this.clearFontSize():this.execAction("fontSize",{value:t})},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}});t.extensions.fontSize=e}(),function(){function e(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|“|”)(((?!&quot;|&rdquo;|&ldquo;|"|“|”).)*)(?:&quot;|&rdquo;|&ldquo;|"|“|”)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}function n(t,e,n){var i=t.clipboardData||e.clipboardData||n.dataTransfer,o={};if(!i)return o;if(i.getData){var r=i.getData("Text");r&&r.length>0&&(o["text/plain"]=r)}if(i.types)for(var s=0;s<i.types.length;s++){var a=i.types[s];o[a]=i.getData(a)}return o}var i=null,o=null,r=function(t){t.stopPropagation()},s=t.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){t.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach(function(t){this.on(t,"paste",this.handlePaste.bind(this))},this),this.subscribe("addElement",this.handleAddElement.bind(this)))},handleAddElement:function(t,e){this.on(e,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(t,e){if(!t.defaultPrevented){var i=n(t,this.window,this.document),o=i["text/html"],r=i["text/plain"];this.window.clipboardData&&void 0===t.clipboardData&&!o&&(o=r),(o||r)&&(t.preventDefault(),this.doPaste(o,r,e))}},doPaste:function(e,n,i){var o,r,s="";if(this.cleanPastedHTML&&e)return this.cleanPaste(e);if(n){if(this.getEditorOption("disableReturn")||i&&i.getAttribute("data-disable-return"))s=t.util.htmlEntities(n);else if(o=n.split(/[\r\n]+/g),o.length>1)for(r=0;r<o.length;r+=1)""!==o[r]&&(s+="<p>"+t.util.htmlEntities(o[r])+"</p>");else s=t.util.htmlEntities(o[0]);t.util.insertHTMLCommand(this.document,s)}},handlePasteBinPaste:function(t){if(t.defaultPrevented)return void this.removePasteBin();var e=n(t,this.window,this.document),i=e["text/html"],r=e["text/plain"],s=o;if(!this.cleanPastedHTML||i)return t.preventDefault(),this.removePasteBin(),this.doPaste(i,r,s),void this.trigger("editablePaste",{currentTarget:s,target:s},s);setTimeout(function(){this.cleanPastedHTML&&(i=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(i,r,s),this.trigger("editablePaste",{currentTarget:s,target:s},s)}.bind(this),0)},handleKeydown:function(e,n){t.util.isKey(e,t.util.keyCode.V)&&t.util.isMetaCtrlKey(e)&&(e.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(n))},createPasteBin:function(e){var n,s=t.selection.getSelectionRange(this.document),a=this.window.pageYOffset;o=e,s&&(n=s.getClientRects(),n.length?a+=n[0].top:void 0!==s.startContainer.getBoundingClientRect?a+=s.startContainer.getBoundingClientRect().top:a+=s.getBoundingClientRect().top),i=s;var l=this.document.createElement("div");l.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),l.setAttribute("style","border: 1px red solid; position: absolute; top: "+a+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),l.setAttribute("contentEditable",!0),l.innerHTML="%ME_PASTEBIN%",this.document.body.appendChild(l),this.on(l,"focus",r),this.on(l,"focusin",r),this.on(l,"focusout",r),l.focus(),t.selection.selectNode(l,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(l,"paste",this.boundHandlePaste)},removePasteBin:function(){null!==i&&(t.selection.selectRange(this.document,i),i=null),null!==o&&(o=null);var e=this.getPasteBin();e&&e&&(this.off(e,"focus",r),this.off(e,"focusin",r),this.off(e,"focusout",r),this.off(e,"paste",this.boundHandlePaste),e.parentElement.removeChild(e))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var t=this.getPasteBin();if(!t)return!1;if(t.firstChild&&"mcepastebin"===t.firstChild.id)return!1;var e=t.innerHTML;return!(!e||"%ME_PASTEBIN%"===e)&&e},cleanPaste:function(t){var n,i,o,r,s=/<p|<br|<div/.test(t),a=[].concat(this.preCleanReplacements||[],e(),this.cleanReplacements||[]);for(n=0;n<a.length;n+=1)t=t.replace(a[n][0],a[n][1]);if(!s)return this.pasteHTML(t);for(o=this.document.createElement("div"),o.innerHTML="<p>"+t.split("<br><br>").join("</p><p>")+"</p>",i=o.querySelectorAll("a,p,div,br"),n=0;n<i.length;n+=1)switch(r=i[n],r.innerHTML=r.innerHTML.replace(/\n/gi," "),r.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(r);break;case"br":this.filterLineBreak(r)}this.pasteHTML(o.innerHTML)},pasteHTML:function(e,n){n=t.util.defaults({},n,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var i,o,r,s,a=this.document.createDocumentFragment();for(a.appendChild(this.document.createElement("body")),s=a.querySelector("body"),s.innerHTML=e,this.cleanupSpans(s),i=s.querySelectorAll("*"),r=0;r<i.length;r+=1)o=i[r],"a"===o.nodeName.toLowerCase()&&this.getEditorOption("targetBlank")&&t.util.setTargetBlank(o),t.util.cleanupAttrs(o,n.cleanAttrs),t.util.cleanupTags(o,n.cleanTags),t.util.unwrapTags(o,n.unwrapTags);t.util.insertHTMLCommand(this.document,s.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(t){return t&&("p"===t.nodeName.toLowerCase()||"div"===t.nodeName.toLowerCase())},filterCommonBlocks:function(t){/^\s*$/.test(t.textContent)&&t.parentNode&&t.parentNode.removeChild(t)},filterLineBreak:function(t){this.isCommonBlock(t.previousElementSibling)?this.removeWithParent(t):!this.isCommonBlock(t.parentNode)||t.parentNode.firstChild!==t&&t.parentNode.lastChild!==t?t.parentNode&&1===t.parentNode.childElementCount&&""===t.parentNode.textContent&&this.removeWithParent(t):this.removeWithParent(t)},removeWithParent:function(t){t&&t.parentNode&&(t.parentNode.parentNode&&1===t.parentNode.childElementCount?t.parentNode.parentNode.removeChild(t.parentNode):t.parentNode.removeChild(t))},cleanupSpans:function(e){var n,i,o,r=e.querySelectorAll(".replace-with"),s=function(t){return t&&"#text"!==t.nodeName&&"false"===t.getAttribute("contenteditable")};for(n=0;n<r.length;n+=1)i=r[n],o=this.document.createElement(i.classList.contains("bold")?"b":"i"),i.classList.contains("bold")&&i.classList.contains("italic")?o.innerHTML="<i>"+i.innerHTML+"</i>":o.innerHTML=i.innerHTML,i.parentNode.replaceChild(o,i);for(r=e.querySelectorAll("span"),n=0;n<r.length;n+=1){if(i=r[n],t.util.traverseUp(i,s))return!1;t.util.unwrap(i,this.document)}}});t.extensions.paste=s}(),function(){var e=t.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){t.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(t,e){this.initElement(e)},initElement:function(t){t.getAttribute("data-placeholder")||t.setAttribute("data-placeholder",this.text),this.updatePlaceholder(t)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(t,e){this.cleanupElement(e)},cleanupElement:function(t){t.getAttribute("data-placeholder")===this.text&&t.removeAttribute("data-placeholder")},showPlaceholder:function(e){e&&(t.util.isFF&&0===e.childNodes.length?(e.classList.add("medium-editor-placeholder-relative"),e.classList.remove("medium-editor-placeholder")):(e.classList.add("medium-editor-placeholder"),e.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(t){t&&(t.classList.remove("medium-editor-placeholder"),t.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(t,e){if(t.querySelector("img, blockquote, ul, ol, table")||""!==t.textContent.replace(/^\s+|\s+$/g,""))return this.hidePlaceholder(t);e||this.showPlaceholder(t)},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("addElement",this.handleAddElement.bind(this)),this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(t,e){var n=this.hideOnClick&&e===this.base.getFocusedElement();this.updatePlaceholder(e,n)},handleFocus:function(t,e){this.hidePlaceholder(e)},handleBlur:function(t,e){this.updatePlaceholder(e)}});t.extensions.placeholder=e}(),function(){var e=t.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){t.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(t,e){return this.base.extensions.forEach(function(n){if(n!==this)return t.apply(e||this,arguments)},this)},createToolbar:function(){var t=this.document.createElement("div");return t.id="medium-editor-toolbar-"+this.getEditorId(),t.className="medium-editor-toolbar",this.static?t.className+=" static-toolbar":this.relativeContainer?t.className+=" medium-editor-relative-toolbar":t.className+=" medium-editor-stalker-toolbar",t.appendChild(this.createToolbarButtons()),this.forEachExtension(function(e){e.hasForm&&t.appendChild(e.getForm())}),this.attachEventHandlers(),t},createToolbarButtons:function(){var e,n,i,o,r,s,a=this.document.createElement("ul");return a.id="medium-editor-toolbar-actions"+this.getEditorId(),a.className="medium-editor-toolbar-actions",a.style.display="block",this.buttons.forEach(function(i){"string"==typeof i?(r=i,s=null):(r=i.name,s=i),(o=this.base.addBuiltInExtension(r,s))&&"function"==typeof o.getButton&&(n=o.getButton(this.base),e=this.document.createElement("li"),t.util.isElement(n)?e.appendChild(n):e.innerHTML=n,a.appendChild(e))},this),i=a.querySelectorAll("button"),i.length>0&&(i[0].classList.add(this.firstButtonClass),i[i.length-1].classList.add(this.lastButtonClass)),a},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=t.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.static&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(e){if(e&&e.target&&t.util.isDescendant(this.getToolbarElement(),e.target))return!1;this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension(function(t){t.hasForm&&t.isDisplayed()&&t.hideForm()})},multipleBlockElementsSelected:function(){var e=/<[^\/>][^>]*><\/[^>]+>/gim,n=new RegExp("<("+t.util.blockContainerElementNames.join("|")+")[^>]*>","g"),i=t.selection.getSelectionHtml(this.document).replace(e,""),o=i.match(n);return!!o&&o.length>1},modifySelection:function(){var e=this.window.getSelection(),n=e.getRangeAt(0);if(this.standardizeSelectionStart&&n.startContainer.nodeValue&&n.startOffset===n.startContainer.nodeValue.length){var i=t.util.findAdjacentTextNodeWithContent(t.selection.getSelectionElement(this.window),n.startContainer,this.document);if(i){for(var o=0;0===i.nodeValue.substr(o,1).trim().length;)o+=1;n=t.selection.select(this.document,i,o,n.endContainer,n.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||t.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var e=t.selection.getSelectionElement(this.window);return!e||-1===this.getEditorElements().indexOf(e)||e.getAttribute("data-disable-toolbar")?this.hideToolbar():this.updateOnEmptySelection&&this.static?this.showAndUpdateToolbar():!t.selection.selectionContainsContent(this.document)||!1===this.allowMultiParagraphSelection&&this.multipleBlockElementsSelected()?this.hideToolbar():void this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(t){"function"==typeof t.isActive&&"function"==typeof t.setInactive&&t.setInactive()}),this.checkActiveButtons()},checkActiveButtons:function(){var e,n=[],i=null,o=t.selection.getSelectionRange(this.document),r=function(t){"function"==typeof t.checkState?t.checkState(e):"function"==typeof t.isActive&&"function"==typeof t.isAlreadyApplied&&"function"==typeof t.setActive&&!t.isActive()&&t.isAlreadyApplied(e)&&t.setActive()};if(o&&(this.forEachExtension(function(t){if("function"==typeof t.queryCommandState&&null!==(i=t.queryCommandState()))return void(i&&"function"==typeof t.setActive&&t.setActive());n.push(t)}),e=t.selection.getSelectedParentElement(o),this.getEditorElements().some(function(n){return t.util.isDescendant(n,e,!0)})))for(;e&&(n.forEach(r),!t.util.isMediumEditorElement(e));)e=e.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var t=this.base.getFocusedElement(),e=this.window.getSelection();if(!t)return this;!this.static&&e.isCollapsed||(this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(t):this.positionToolbar(e)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))},positionStaticToolbar:function(t){this.getToolbarElement().style.left="0";var e,n=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,i=this.window.innerWidth,o=this.getToolbarElement(),r=t.getBoundingClientRect(),s=r.top+n,a=r.left+r.width/2,l=o.offsetHeight,c=o.offsetWidth,u=c/2;switch(this.sticky?n>s+t.offsetHeight-l-this.stickyTopOffset?(o.style.top=s+t.offsetHeight-l+"px",o.classList.remove("medium-editor-sticky-toolbar")):n>s-l-this.stickyTopOffset?(o.classList.add("medium-editor-sticky-toolbar"),o.style.top=this.stickyTopOffset+"px"):(o.classList.remove("medium-editor-sticky-toolbar"),o.style.top=s-l+"px"):o.style.top=s-l+"px",this.align){case"left":e=r.left;break;case"right":e=r.right-c;break;case"center":e=a-u}e<0?e=0:e+c>i&&(e=i-Math.ceil(c)-1),o.style.left=e+"px"},positionToolbar:function(t){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var e=t.getRangeAt(0),n=e.getBoundingClientRect();(!n||0===n.height&&0===n.width&&e.startContainer===e.endContainer)&&(n=1===e.startContainer.nodeType&&e.startContainer.querySelector("img")?e.startContainer.querySelector("img").getBoundingClientRect():e.startContainer.getBoundingClientRect());var i,o,r=this.window.innerWidth,s=this.getToolbarElement(),a=s.offsetHeight,l=s.offsetWidth,c=l/2,u=this.diffLeft-c,h=this.getEditorOption("elementsContainer"),d=["absolute","fixed"].indexOf(window.getComputedStyle(h).getPropertyValue("position"))>-1,f={},p={};d?(o=h.getBoundingClientRect(),["top","left"].forEach(function(t){p[t]=n[t]-o[t]}),p.width=n.width,p.height=n.height,n=p,r=o.width,f.top=h.scrollTop):f.top=this.window.pageYOffset,i=n.left+n.width/2,f.top+=n.top-a,n.top<50?(s.classList.add("medium-toolbar-arrow-over"),s.classList.remove("medium-toolbar-arrow-under"),f.top+=50+n.height-this.diffTop):(s.classList.add("medium-toolbar-arrow-under"),s.classList.remove("medium-toolbar-arrow-over"),f.top+=this.diffTop),i<c?(f.left=u+c,f.right="initial"):r-i<c?(f.left="auto",f.right=0):(f.left=u+i,f.right="initial"),["top","left","right"].forEach(function(t){s.style[t]=f[t]+(isNaN(f[t])?"":"px")})}});t.extensions.toolbar=e}(),function(){var e=t.Extension.extend({init:function(){t.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy","dragover"===t.type?t.target.classList.add("medium-editor-dragover"):"dragleave"===t.type&&t.target.classList.remove("medium-editor-dragover")},handleDrop:function(e){var n;e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&(n=Array.prototype.slice.call(e.dataTransfer.files,0),n.some(function(e){if(e.type.match("image")){var n,i;n=new FileReader,n.readAsDataURL(e),i="medium-img-"+ +new Date,t.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+i+'" />'),n.onload=function(){var t=this.document.getElementById(i);t&&(t.removeAttribute("id"),t.removeAttribute("class"),t.src=n.result)}.bind(this)}}.bind(this))),e.target.classList.remove("medium-editor-dragover")}});t.extensions.imageDragging=e}(),function(){function e(e){var n=t.selection.getSelectionStart(this.options.ownerDocument),i=n.textContent,o=t.selection.getCaretOffsets(n);(void 0===i[o.left-1]||""===i[o.left-1].trim()||void 0!==i[o.left]&&""===i[o.left].trim())&&e.preventDefault()}function n(e,n){if(this.options.disableReturn||n.getAttribute("data-disable-return"))e.preventDefault();else if(this.options.disableDoubleReturn||n.getAttribute("data-disable-double-return")){var i=t.selection.getSelectionStart(this.options.ownerDocument);(i&&""===i.textContent.trim()&&"li"!==i.nodeName.toLowerCase()||i.previousElementSibling&&"br"!==i.previousElementSibling.nodeName.toLowerCase()&&""===i.previousElementSibling.textContent.trim())&&e.preventDefault()}}function i(e){var n=t.selection.getSelectionStart(this.options.ownerDocument);"pre"===(n&&n.nodeName.toLowerCase())&&(e.preventDefault(),t.util.insertHTMLCommand(this.options.ownerDocument,"    ")),t.util.isListItem(n)&&(e.preventDefault(),e.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function o(e){var n,i=t.selection.getSelectionStart(this.options.ownerDocument),o=i.nodeName.toLowerCase(),r=/^(\s+|<br\/?>)?$/i,s=/h\d/i;t.util.isKey(e,[t.util.keyCode.BACKSPACE,t.util.keyCode.ENTER])&&i.previousElementSibling&&s.test(o)&&0===t.selection.getCaretOffsets(i).left?t.util.isKey(e,t.util.keyCode.BACKSPACE)&&r.test(i.previousElementSibling.innerHTML)?(i.previousElementSibling.parentNode.removeChild(i.previousElementSibling),e.preventDefault()):!this.options.disableDoubleReturn&&t.util.isKey(e,t.util.keyCode.ENTER)&&(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.previousElementSibling.parentNode.insertBefore(n,i),e.preventDefault()):t.util.isKey(e,t.util.keyCode.DELETE)&&i.nextElementSibling&&i.previousElementSibling&&!s.test(o)&&r.test(i.innerHTML)&&s.test(i.nextElementSibling.nodeName.toLowerCase())?(t.selection.moveCursor(this.options.ownerDocument,i.nextElementSibling),i.previousElementSibling.parentNode.removeChild(i),e.preventDefault()):t.util.isKey(e,t.util.keyCode.BACKSPACE)&&"li"===o&&r.test(i.innerHTML)&&!i.previousElementSibling&&!i.parentElement.previousElementSibling&&i.nextElementSibling&&"li"===i.nextElementSibling.nodeName.toLowerCase()?(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.parentElement.parentElement.insertBefore(n,i.parentElement),t.selection.moveCursor(this.options.ownerDocument,n),i.parentElement.removeChild(i),e.preventDefault()):t.util.isKey(e,t.util.keyCode.BACKSPACE)&&!1!==t.util.getClosestTag(i,"blockquote")&&0===t.selection.getCaretOffsets(i).left?(e.preventDefault(),t.util.execFormatBlock(this.options.ownerDocument,"p")):t.util.isKey(e,t.util.keyCode.ENTER)&&!1!==t.util.getClosestTag(i,"blockquote")&&0===t.selection.getCaretOffsets(i).right?(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.parentElement.insertBefore(n,i.nextSibling),t.selection.moveCursor(this.options.ownerDocument,n),e.preventDefault()):t.util.isKey(e,t.util.keyCode.BACKSPACE)&&t.util.isMediumEditorElement(i.parentElement)&&!i.previousElementSibling&&i.nextElementSibling&&r.test(i.innerHTML)&&(e.preventDefault(),t.selection.moveCursor(this.options.ownerDocument,i.nextSibling),i.parentElement.removeChild(i))}function r(e){var n,i=t.selection.getSelectionStart(this.options.ownerDocument);i&&(t.util.isMediumEditorElement(i)&&0===i.children.length&&!t.util.isBlockContainer(i)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),!t.util.isKey(e,t.util.keyCode.ENTER)||t.util.isListItem(i)||t.util.isBlockContainer(i)||(n=i.nodeName.toLowerCase(),"a"===n?this.options.ownerDocument.execCommand("unlink",!1,null):e.shiftKey||e.ctrlKey||this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function s(t,e){var n=e.parentNode.querySelector('textarea[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]');n&&(n.value=e.innerHTML.trim())}function a(t){t._mediumEditors||(t._mediumEditors=[null]),this.id||(this.id=t._mediumEditors.length),t._mediumEditors[this.id]=this}function l(t){t._mediumEditors&&t._mediumEditors[this.id]&&(t._mediumEditors[this.id]=null)}function c(e,n,i){var o=[];if(e||(e=[]),"string"==typeof e&&(e=n.querySelectorAll(e)),t.util.isElement(e)&&(e=[e]),i)for(var r=0;r<e.length;r++){var s=e[r];!t.util.isElement(s)||s.getAttribute("data-medium-editor-element")||s.getAttribute("medium-editor-textarea-id")||o.push(s)}else o=Array.prototype.slice.apply(e);return o}function u(t){var e=t.parentNode.querySelector('textarea[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]');e&&(e.classList.remove("medium-editor-hidden"),e.removeAttribute("medium-editor-textarea-id")),t.parentNode&&t.parentNode.removeChild(t)}function h(t,e){return Object.keys(e).forEach(function(n){void 0===t[n]&&(t[n]=e[n])}),t}function d(t,e,n){return t=h(t,{window:n.options.contentWindow,document:n.options.ownerDocument,base:n}),"function"==typeof t.init&&t.init(),t.name||(t.name=e),t}function f(){return!this.elements.every(function(t){return!!t.getAttribute("data-disable-toolbar")})&&!1!==this.options.toolbar}function p(){return!!f.call(this)&&!1!==this.options.anchorPreview}function m(){return!1!==this.options.placeholder}function g(){return!1!==this.options.autoLink}function v(){return!1!==this.options.imageDragging}function y(){return!1!==this.options.keyboardCommands}function b(){return!this.options.extensions.imageDragging}function w(t){for(var e=this.options.ownerDocument.createElement("div"),n=Date.now(),i="medium-editor-"+n,o=t.attributes;this.options.ownerDocument.getElementById(i);)n++,i="medium-editor-"+n;e.className=t.className,e.id=i,e.innerHTML=t.value,t.setAttribute("medium-editor-textarea-id",i);for(var r=0,s=o.length;r<s;r++)e.hasAttribute(o[r].nodeName)||e.setAttribute(o[r].nodeName,o[r].value);return t.form&&this.on(t.form,"reset",function(t){t.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(i))}.bind(this)),t.classList.add("medium-editor-hidden"),t.parentNode.insertBefore(e,t),e}function x(e,i){if(!e.getAttribute("data-medium-editor-element")){"textarea"===e.nodeName.toLowerCase()&&(e=w.call(this,e),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=s.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),this.options.disableEditing||e.getAttribute("data-disable-editing")||(e.setAttribute("contentEditable",!0),e.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(e.getAttribute("data-disable-return")||e.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),this.options.disableReturn||e.getAttribute("data-disable-return")||this.on(e,"keyup",r.bind(this));var o=t.util.guid();e.setAttribute("data-medium-editor-element",!0),e.classList.add("medium-editor-element"),e.setAttribute("role","textbox"),e.setAttribute("aria-multiline",!0),e.setAttribute("data-medium-editor-editor-index",i),e.setAttribute("medium-editor-index",o),E[o]=e.innerHTML,this.events.attachAllEventsToElement(e)}return e}function C(){this.subscribe("editableKeydownTab",i.bind(this)),this.subscribe("editableKeydownDelete",o.bind(this)),this.subscribe("editableKeydownEnter",o.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",e.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function _(){if(this.extensions=[],Object.keys(this.options.extensions).forEach(function(t){"toolbar"!==t&&this.options.extensions[t]&&this.extensions.push(d(this.options.extensions[t],t,this))},this),b.call(this)){var e=this.options.fileDragging;e||(e={},v.call(this)||(e.allowedTypes=[])),this.addBuiltInExtension("fileDragging",e)}var n={paste:!0,"anchor-preview":p.call(this),autoLink:g.call(this),keyboardCommands:y.call(this),placeholder:m.call(this)};Object.keys(n).forEach(function(t){n[t]&&this.addBuiltInExtension(t)},this);var i=this.options.extensions.toolbar;if(!i&&f.call(this)){var o=t.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});i=new t.extensions.toolbar(o)}i&&this.extensions.push(d(i,"toolbar",this))}function S(e,n){var i=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];return n&&i.forEach(function(e){n.hasOwnProperty(e[0])&&void 0!==n[e[0]]&&t.util.deprecated(e[0],e[1],"v6.0.0")}),t.util.defaults({},n,e)}function k(e,n){var i,o,r=/^append-(.+)$/gi,s=/justify([A-Za-z]*)$/g;if(i=r.exec(e))return t.util.execFormatBlock(this.options.ownerDocument,i[1]);if("fontSize"===e)return n.size&&t.util.deprecated(".size option for fontSize command",".value","6.0.0"),o=n.value||n.size,this.options.ownerDocument.execCommand("fontSize",!1,o);if("fontName"===e)return n.name&&t.util.deprecated(".name option for fontName command",".value","6.0.0"),o=n.value||n.name,this.options.ownerDocument.execCommand("fontName",!1,o);if("createLink"===e)return this.createLink(n);if("image"===e){var a=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,a)}if("html"===e){var l=this.options.contentWindow.getSelection().toString().trim();return t.util.insertHTMLCommand(this.options.ownerDocument,l)}if(s.exec(e)){var c=this.options.ownerDocument.execCommand(e,!1,null),u=t.selection.getSelectedParentElement(t.selection.getSelectionRange(this.options.ownerDocument));return u&&T.call(this,t.util.getTopBlockContainer(u)),c}return o=n&&n.value,this.options.ownerDocument.execCommand(e,!1,o)}function T(e){if(e){var n,i=Array.prototype.slice.call(e.childNodes).filter(function(t){var e="div"===t.nodeName.toLowerCase();return e&&!n&&(n=t.style.textAlign),e});i.length&&(this.saveSelection(),i.forEach(function(e){if(e.style.textAlign===n){var i=e.lastChild;if(i){t.util.unwrap(e,this.options.ownerDocument);var o=this.options.ownerDocument.createElement("BR");i.parentNode.insertBefore(o,i.nextSibling)}}},this),e.style.textAlign=n,this.restoreSelection())}}var E={};t.prototype={init:function(t,e){return this.options=S.call(this,this.defaults,e),this.origElements=t,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(a.call(this,this.options.contentWindow),this.events=new t.Events(this),this.elements=[],this.addElements(this.origElements),0!==this.elements.length&&(this.isActive=!0,_.call(this),C.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(t){"function"==typeof t.destroy&&t.destroy()},this),this.events.destroy(),this.elements.forEach(function(t){this.options.spellcheck&&(t.innerHTML=t.innerHTML),t.removeAttribute("contentEditable"),t.removeAttribute("spellcheck"),t.removeAttribute("data-medium-editor-element"),t.classList.remove("medium-editor-element"),t.removeAttribute("role"),t.removeAttribute("aria-multiline"),t.removeAttribute("medium-editor-index"),t.removeAttribute("data-medium-editor-editor-index"),t.getAttribute("medium-editor-textarea-id")&&u(t)},this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,l.call(this,this.options.contentWindow))},on:function(t,e,n,i){return this.events.attachDOMEvent(t,e,n,i),this},off:function(t,e,n,i){return this.events.detachDOMEvent(t,e,n,i),this},subscribe:function(t,e){return this.events.attachCustomEvent(t,e),this},unsubscribe:function(t,e){return this.events.detachCustomEvent(t,e),this},trigger:function(t,e,n){return this.events.triggerCustomEvent(t,e,n),this},delay:function(t){var e=this;return setTimeout(function(){e.isActive&&t()},this.options.delay)},serialize:function(){var t,e,n={},i=this.elements.length;for(t=0;t<i;t+=1)e=""!==this.elements[t].id?this.elements[t].id:"element-"+t,n[e]={value:this.elements[t].innerHTML.trim()};return n},getExtensionByName:function(t){var e;return this.extensions&&this.extensions.length&&this.extensions.some(function(n){return n.name===t&&(e=n,!0)}),e},addBuiltInExtension:function(e,n){var i,o=this.getExtensionByName(e);if(o)return o;switch(e){case"anchor":i=t.util.extend({},this.options.anchor,n),o=new t.extensions.anchor(i);break;case"anchor-preview":o=new t.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":o=new t.extensions.autoLink;break;case"fileDragging":o=new t.extensions.fileDragging(n);break;case"fontname":o=new t.extensions.fontName(this.options.fontName);break;case"fontsize":o=new t.extensions.fontSize(n);break;case"keyboardCommands":o=new t.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":o=new t.extensions.paste(this.options.paste);break;case"placeholder":o=new t.extensions.placeholder(this.options.placeholder);break;default:t.extensions.button.isBuiltInButton(e)&&(n?(i=t.util.defaults({},n,t.extensions.button.prototype.defaults[e]),o=new t.extensions.button(i)):o=new t.extensions.button(e))}return o&&this.extensions.push(d(o,e,this)),o},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var t=this.getExtensionByName("toolbar");return t&&t.checkState(),this},queryCommandState:function(t){var e,n=/^full-(.+)$/gi,i=null;(e=n.exec(t))&&(t=e[1]);try{i=this.options.ownerDocument.queryCommandState(t)}catch(t){i=null}return i},execAction:function(e,n){var i,o,r=/^full-(.+)$/gi;return i=r.exec(e),i?(this.saveSelection(),this.selectAllContents(),o=k.call(this,i[1],n),this.restoreSelection()):o=k.call(this,e,n),"insertunorderedlist"!==e&&"insertorderedlist"!==e||t.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),o},getSelectedParentElement:function(e){return void 0===e&&(e=this.options.contentWindow.getSelection().getRangeAt(0)),t.selection.getSelectedParentElement(e)},selectAllContents:function(){var e=t.selection.getSelectionElement(this.options.contentWindow);if(e){for(;1===e.children.length;)e=e.children[0];this.selectElement(e)}},selectElement:function(e){t.selection.selectNode(e,this.options.ownerDocument);var n=t.selection.getSelectionElement(this.options.contentWindow);n&&this.events.focusElement(n)},getFocusedElement:function(){var t;return this.elements.some(function(e){return!t&&e.getAttribute("data-medium-focused")&&(t=e),!!t},this),t},exportSelection:function(){var e=t.selection.getSelectionElement(this.options.contentWindow),n=this.elements.indexOf(e),i=null;return n>=0&&(i=t.selection.exportSelection(e,this.options.ownerDocument)),null!==i&&0!==n&&(i.editableElementIndex=n),i},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(e,n){if(e){var i=this.elements[e.editableElementIndex||0];t.selection.importSelection(e,i,this.options.ownerDocument,n)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(e){var n,i=t.selection.getSelectionElement(this.options.contentWindow),o={};if(-1!==this.elements.indexOf(i)){try{if(this.events.disableCustomEvent("editableInput"),e.url&&t.util.deprecated(".url option for createLink",".value","6.0.0"),(n=e.url||e.value)&&n.trim().length>0){var r=this.options.contentWindow.getSelection();if(r){var s,a,l,c,u=r.getRangeAt(0),h=u.commonAncestorContainer;if(3===u.endContainer.nodeType&&3!==u.startContainer.nodeType&&0===u.startOffset&&u.startContainer.firstChild===u.endContainer&&(h=u.endContainer),a=t.util.getClosestBlockContainer(u.startContainer),l=t.util.getClosestBlockContainer(u.endContainer),3!==h.nodeType&&0!==h.textContent.length&&a===l){var d=a||i,f=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),s=this.exportSelection(),f.appendChild(d.cloneNode(!0)),i===d?t.selection.select(this.options.ownerDocument,d.firstChild,0,d.lastChild,3===d.lastChild.nodeType?d.lastChild.nodeValue.length:d.lastChild.childNodes.length):t.selection.select(this.options.ownerDocument,d,0,d,d.childNodes.length);var p=this.exportSelection();c=t.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,f,{start:s.start-p.start,end:s.end-p.start,editableElementIndex:s.editableElementIndex}),0===c.length&&(f=this.options.ownerDocument.createDocumentFragment(),f.appendChild(h.cloneNode(!0)),c=[f.firstChild.firstChild,f.firstChild.lastChild]),t.util.createLink(this.options.ownerDocument,c,n.trim());var m=(f.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;t.util.insertHTMLCommand(this.options.ownerDocument,f.firstChild.innerHTML.replace(/^\s+/,"")),s.start-=m,s.end-=m,this.importSelection(s)}else this.options.ownerDocument.execCommand("createLink",!1,n);this.options.targetBlank||"_blank"===e.target?t.util.setTargetBlank(t.selection.getSelectionStart(this.options.ownerDocument),n):t.util.removeTargetBlank(t.selection.getSelectionStart(this.options.ownerDocument),n),e.buttonClass&&t.util.addClassToAnchors(t.selection.getSelectionStart(this.options.ownerDocument),e.buttonClass)}}if(this.options.targetBlank||"_blank"===e.target||e.buttonClass){o=this.options.ownerDocument.createEvent("HTMLEvents"),o.initEvent("input",!0,!0,this.options.contentWindow);for(var g=0,v=this.elements.length;g<v;g+=1)this.elements[g].dispatchEvent(o)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",o,i)}},cleanPaste:function(t){this.getExtensionByName("paste").cleanPaste(t)},pasteHTML:function(t,e){this.getExtensionByName("paste").pasteHTML(t,e)},setContent:function(t,e){if(e=e||0,this.elements[e]){var n=this.elements[e];n.innerHTML=t,this.checkContentChanged(n)}},getContent:function(t){return t=t||0,this.elements[t]?this.elements[t].innerHTML.trim():null},checkContentChanged:function(e){e=e||t.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(e,{target:e,currentTarget:e})},resetContent:function(t){if(t){var e=this.elements.indexOf(t);return void(-1!==e&&this.setContent(E[t.getAttribute("medium-editor-index")],e))}this.elements.forEach(function(t,e){this.setContent(E[t.getAttribute("medium-editor-index")],e)},this)},addElements:function(t){var e=c(t,this.options.ownerDocument,!0);if(0===e.length)return!1;e.forEach(function(t){t=x.call(this,t,this.id),this.elements.push(t),this.trigger("addElement",{target:t,currentTarget:t},t)},this)},removeElements:function(t){var e=c(t,this.options.ownerDocument),n=e.map(function(t){return t.getAttribute("medium-editor-textarea-id")&&t.parentNode?t.parentNode.querySelector('div[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]'):t});this.elements=this.elements.filter(function(t){return-1===n.indexOf(t)||(this.events.cleanupElement(t),t.getAttribute("medium-editor-textarea-id")&&u(t),this.trigger("removeElement",{target:t,currentTarget:t},t),!1)},this)}},t.getEditorFromElement=function(t){var e=t.getAttribute("data-medium-editor-editor-index"),n=t&&t.ownerDocument&&(t.ownerDocument.defaultView||t.ownerDocument.parentWindow);return n&&n._mediumEditors&&n._mediumEditors[e]?n._mediumEditors[e]:null}}(),function(){t.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0}}(),t.parseVersionString=function(t){var e=t.split("-"),n=e[0].split("."),i=e.length>1?e[1]:"";return{major:parseInt(n[0],10),minor:parseInt(n[1],10),revision:parseInt(n[2],10),preRelease:i,toString:function(){return[n[0],n[1],n[2]].join(".")+(i?"-"+i:"")}}},t.version=t.parseVersionString.call(this,{version:"5.23.3"}.version),t}())}).call(e,n(34))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function r(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){m&&f&&(m=!1,f.length?p=f.concat(p):g=-1,p.length&&a())}function a(){if(!m){var t=o(s);m=!0;for(var e=p.length;e;){for(f=p,p=[];++g<e;)f&&f[g].run();g=-1,e=p.length}f=null,m=!1,r(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var u,h,d=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var f,p=[],m=!1,g=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new l(t,e)),1!==p.length||m||o(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),o=(n(3),n(2)),r=function(t,e,n){function r(t){f&&e.confirmButtonColor&&(d.style.backgroundColor=t)}var l,c,u,h=t||window.event,d=h.target||h.srcElement,f=-1!==d.className.indexOf("confirm"),p=-1!==d.className.indexOf("sweet-overlay"),m=o.hasClass(n,"visible"),g=e.doneFunction&&"true"===n.getAttribute("data-has-done-function");switch(f&&e.confirmButtonColor&&(l=e.confirmButtonColor,c=i.colorLuminance(l,-.04),u=i.colorLuminance(l,-.14)),h.type){case"mouseover":r(c);break;case"mouseout":r(l);break;case"mousedown":r(u);break;case"mouseup":r(c);break;case"focus":var v=n.querySelector("button.confirm"),y=n.querySelector("button.cancel");f?y.style.boxShadow="none":v.style.boxShadow="none";break;case"click":var b=n===d,w=o.isDescendant(n,d);if(!b&&!w&&m&&!e.allowOutsideClick)break;f&&g&&m?s(n,e):g&&m||p?a(n,e):o.isDescendant(n,d)&&"BUTTON"===d.tagName&&sweetAlert.close()}},s=function(t,e){var n=!0;o.hasClass(t,"show-input")&&((n=t.querySelector("input").value)||(n="")),e.doneFunction(n),e.closeOnConfirm&&sweetAlert.close(),e.showLoaderOnConfirm&&sweetAlert.disableButtons()},a=function(t,e){var n=String(e.doneFunction).replace(/\s/g,"");"function("===n.substring(0,9)&&")"!==n.substring(9,10)&&e.doneFunction(!1),e.closeOnCancel&&sweetAlert.close()};e.default={handleButton:r,handleConfirm:s,handleCancel:a},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(3),r=function(t,e,n){var r=t||window.event,s=r.keyCode||r.which,a=n.querySelector("button.confirm"),l=n.querySelector("button.cancel"),c=n.querySelectorAll("button[tabindex]");if(-1!==[9,13,32,27].indexOf(s)){for(var u=r.target||r.srcElement,h=-1,d=0;d<c.length;d++)if(u===c[d]){h=d;break}9===s?(u=-1===h?a:h===c.length-1?c[0]:c[h+1],i.stopEventPropagation(r),u.focus(),e.confirmButtonColor&&o.setFocusStyle(u,e.confirmButtonColor)):13===s?("INPUT"===u.tagName&&(u=a,a.focus()),u=-1===h?a:void 0):27===s&&!0===e.allowEscapeKey?(u=l,i.fireClick(u,r)):u=void 0}};e.default=r,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert"><div class="sa-icon sa-error">\n      <span class="sa-x-mark">\n        <span class="sa-line sa-left"></span>\n        <span class="sa-line sa-right"></span>\n      </span>\n    </div><div class="sa-icon sa-warning">\n      <span class="sa-body"></span>\n      <span class="sa-dot"></span>\n    </div><div class="sa-icon sa-info"></div><div class="sa-icon sa-success">\n      <span class="sa-line sa-tip"></span>\n      <span class="sa-line sa-long"></span>\n\n      <div class="sa-placeholder"></div>\n      <div class="sa-fix"></div>\n    </div><div class="sa-icon sa-custom"></div><h2>Title</h2>\n    <p>Text</p>\n    <fieldset>\n      <input type="text" tabIndex="3" />\n      <div class="sa-input-error"></div>\n    </fieldset><div class="sa-error-container">\n      <div class="icon">!</div>\n      <p>Not valid!</p>\n    </div><div class="sa-button-container">\n      <button class="cancel" tabIndex="2">Cancel</button>\n      <div class="sa-confirm-button-container">\n        <button class="confirm" tabIndex="1">OK</button><div class="la-ball-fall">\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n    </div></div>',t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),o=n(3),r=n(2),s=["error","warning","info","success","input","prompt"],a=function(t){var e=o.getModal(),n=e.querySelector("h2"),a=e.querySelector("p"),l=e.querySelector("button.cancel"),c=e.querySelector("button.confirm");if(n.innerHTML=t.html?t.title:r.escapeHtml(t.title).split("\n").join("<br>"),a.innerHTML=t.html?t.text:r.escapeHtml(t.text||"").split("\n").join("<br>"),t.text&&r.show(a),t.customClass)r.addClass(e,t.customClass),e.setAttribute("data-custom-class",t.customClass);else{var u=e.getAttribute("data-custom-class");r.removeClass(e,u),e.setAttribute("data-custom-class","")}if(r.hide(e.querySelectorAll(".sa-icon")),t.type&&!i.isIE8()){var h=function(){for(var n=!1,i=0;i<s.length;i++)if(t.type===s[i]){n=!0;break}if(!n)return logStr("Unknown alert type: "+t.type),{v:!1};var a=["success","error","warning","info"],l=void 0;-1!==a.indexOf(t.type)&&(l=e.querySelector(".sa-icon.sa-"+t.type),r.show(l));var c=o.getInput();switch(t.type){case"success":r.addClass(l,"animate"),r.addClass(l.querySelector(".sa-tip"),"animateSuccessTip"),r.addClass(l.querySelector(".sa-long"),"animateSuccessLong");break;case"error":r.addClass(l,"animateErrorIcon"),r.addClass(l.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":r.addClass(l,"pulseWarning"),r.addClass(l.querySelector(".sa-body"),"pulseWarningIns"),r.addClass(l.querySelector(".sa-dot"),"pulseWarningIns");break;case"input":case"prompt":c.setAttribute("type",t.inputType),c.value=t.inputValue,c.setAttribute("placeholder",t.inputPlaceholder),r.addClass(e,"show-input"),setTimeout(function(){c.focus(),c.addEventListener("keyup",swal.resetInputError)},400)}}();if("object"==typeof h)return h.v}if(t.imageUrl){var d=e.querySelector(".sa-icon.sa-custom");d.style.backgroundImage="url("+t.imageUrl+")",r.show(d);var f=80,p=80;if(t.imageSize){var m=t.imageSize.toString().split("x"),g=m[0],v=m[1];g&&v?(f=g,p=v):logStr("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+t.imageSize)}d.setAttribute("style",d.getAttribute("style")+"width:"+f+"px; height:"+p+"px")}e.setAttribute("data-has-cancel-button",t.showCancelButton),t.showCancelButton?l.style.display="inline-block":r.hide(l),e.setAttribute("data-has-confirm-button",t.showConfirmButton),t.showConfirmButton?c.style.display="inline-block":r.hide(c),t.cancelButtonText&&(l.innerHTML=r.escapeHtml(t.cancelButtonText)),t.confirmButtonText&&(c.innerHTML=r.escapeHtml(t.confirmButtonText)),t.confirmButtonColor&&(c.style.backgroundColor=t.confirmButtonColor,c.style.borderLeftColor=t.confirmLoadingButtonColor,c.style.borderRightColor=t.confirmLoadingButtonColor,o.setFocusStyle(c,t.confirmButtonColor)),e.setAttribute("data-allow-outside-click",t.allowOutsideClick);var y=!!t.doneFunction;e.setAttribute("data-has-done-function",y),t.animation?"string"==typeof t.animation?e.setAttribute("data-animation",t.animation):e.setAttribute("data-animation","pop"):e.setAttribute("data-animation","none"),e.setAttribute("data-timer",t.timer)};e.default=a,t.exports=e.default},function(t,e,n){"use strict";var i=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o,r,s,a,l=n(2),c=n(4),u=n(3),h=n(35),d=n(36),f=i(d),p=n(11),m=i(p),g=n(38),v=i(g);e.default=s=a=function(){function t(t){var n=e;return void 0===n[t]?m.default[t]:n[t]}var e=arguments[0];if(l.addClass(document.body,"stop-scrolling"),u.resetInput(),void 0===e)return c.logStr("SweetAlert expects at least 1 attribute!"),!1;var n=c.extend({},m.default);switch(typeof e){case"string":n.title=e,n.text=arguments[1]||"",n.type=arguments[2]||"";break;case"object":if(void 0===e.title)return c.logStr('Missing "title" argument!'),!1;n.title=e.title;for(var i in m.default)n[i]=t(i);n.confirmButtonText=n.showCancelButton?"Confirm":m.default.confirmButtonText,n.confirmButtonText=t("confirmButtonText"),n.doneFunction=arguments[1]||null;break;default:return c.logStr('Unexpected type of argument! Expected "string" or "object", got '+typeof e),!1}v.default(n),u.fixVerticalPosition(),u.openModal(arguments[1]);for(var s=u.getModal(),d=s.querySelectorAll("button"),p=["onclick","onmouseover","onmouseout","onmousedown","onmouseup","onfocus"],g=function(t){return h.handleButton(t,n,s)},y=0;y<d.length;y++)for(var b=0;b<p.length;b++){var w=p[b];d[y][w]=g}u.getOverlay().onclick=g,o=window.onkeydown;var x=function(t){return f.default(t,n,s)};window.onkeydown=x,window.onfocus=function(){setTimeout(function(){void 0!==r&&(r.focus(),r=void 0)},0)},a.enableButtons()},s.setDefaults=a.setDefaults=function(t){if(!t)throw new Error("userParams is required");if("object"!=typeof t)throw new Error("userParams has to be a object");c.extend(m.default,t)},s.close=a.close=function(){var t=u.getModal();l.fadeOut(u.getOverlay(),5),l.fadeOut(t,5),l.removeClass(t,"showSweetAlert"),l.addClass(t,"hideSweetAlert"),l.removeClass(t,"visible");var e=t.querySelector(".sa-icon.sa-success");l.removeClass(e,"animate"),l.removeClass(e.querySelector(".sa-tip"),"animateSuccessTip"),l.removeClass(e.querySelector(".sa-long"),"animateSuccessLong");var n=t.querySelector(".sa-icon.sa-error");l.removeClass(n,"animateErrorIcon"),l.removeClass(n.querySelector(".sa-x-mark"),"animateXMark");var i=t.querySelector(".sa-icon.sa-warning");return l.removeClass(i,"pulseWarning"),l.removeClass(i.querySelector(".sa-body"),"pulseWarningIns"),l.removeClass(i.querySelector(".sa-dot"),"pulseWarningIns"),setTimeout(function(){var e=t.getAttribute("data-custom-class");l.removeClass(t,e)},300),l.removeClass(document.body,"stop-scrolling"),window.onkeydown=o,window.previousActiveElement&&window.previousActiveElement.focus(),r=void 0,clearTimeout(t.timeout),!0},s.showInputError=a.showInputError=function(t){var e=u.getModal(),n=e.querySelector(".sa-input-error");l.addClass(n,"show");var i=e.querySelector(".sa-error-container");l.addClass(i,"show"),i.querySelector("p").innerHTML=t,setTimeout(function(){s.enableButtons()},1),e.querySelector("input").focus()},s.resetInputError=a.resetInputError=function(t){if(t&&13===t.keyCode)return!1;var e=u.getModal(),n=e.querySelector(".sa-input-error");l.removeClass(n,"show");var i=e.querySelector(".sa-error-container");l.removeClass(i,"show")},s.disableButtons=a.disableButtons=function(t){var e=u.getModal(),n=e.querySelector("button.confirm"),i=e.querySelector("button.cancel");n.disabled=!0,i.disabled=!0},s.enableButtons=a.enableButtons=function(t){var e=u.getModal(),n=e.querySelector("button.confirm"),i=e.querySelector("button.cancel");n.disabled=!1,i.disabled=!1},"undefined"!=typeof window?window.sweetAlert=window.swal=s:c.logStr("SweetAlert is a frontend module!"),t.exports=e.default},,function(t,e,n){n(13),t.exports=n(14)}]);